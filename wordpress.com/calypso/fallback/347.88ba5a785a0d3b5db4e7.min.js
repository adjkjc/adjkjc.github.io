(window.webpackJsonp=window.webpackJsonp||[]).push([[347],{"../packages/components/dist/esm/screen-reader-text/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("../node_modules/react/index.js"),a=s.n(n);s("../packages/components/dist/esm/screen-reader-text/style.scss");function i(e){var t=e.children;return a.a.createElement("span",{className:"screen-reader-text"},t)}},"../packages/components/dist/esm/screen-reader-text/style.scss":function(e,t,s){},"./blocks/site-icon/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/prop-types/index.js"),a=s.n(n),i=s("../node_modules/react/index.js"),r=s.n(i),o=s("../node_modules/react-redux/es/index.js"),c=s("../node_modules/lodash-es/get.js"),l=s("../node_modules/classnames/index.js"),u=s.n(l),d=s("./components/gridicon/index.tsx"),p=s("./components/image/index.js"),m=s("./my-sites/media-library/media-image.tsx"),h=s("./components/spinner/index.jsx"),b=s("./components/data/query-sites/index.jsx"),j=s("./state/sites/selectors/get-site.js"),f=s("./state/selectors/get-site-icon-id.js"),g=s("./state/selectors/get-site-icon-url.js"),v=s("./state/selectors/get-media-item.js");function _(e,t,s){return!!Object(c.a)(Object(v.a)(e,t,s),"transient")}var y=s("./lib/resize-image-url/index.js");s("./blocks/site-icon/style.scss");function x(e){var t=e.siteId,s=e.site,n=e.iconUrl,a=e.size,i=e.imgSize,o=e.isTransientIcon,c=Object(y.a)(n,i),l=u()("site-icon",{"is-blank":!c,"is-transient":o}),j={height:a,width:a,lineHeight:a+"px",fontSize:a+"px"};return r.a.createElement("div",{className:l,style:j},!s&&t>0&&r.a.createElement(b.a,{siteId:t}),c?r.a.createElement(m.a,{component:p.a,className:"site-icon__img",src:c,alt:""}):r.a.createElement(d.a,{icon:"site",size:Math.round(a/1.3)}),o&&r.a.createElement(h.a,null))}x.propTypes={siteId:a.a.number,site:a.a.object,iconUrl:a.a.string,size:a.a.number,imgSize:a.a.number,isTransientIcon:a.a.bool},x.defaultProps={imgSize:120,size:32};t.a=Object(o.c)((function(e,t){var s=t.site,n=t.siteId,a=t.imgSize,i=Object(j.a)(e,Object(c.a)(s,"ID",n));if(!i)return{iconUrl:Object(c.a)(s,"icon.img")};var r=Object(f.a)(e,i.ID);return{site:i,iconUrl:Object(g.a)(e,i.ID,a),isTransientIcon:_(e,i.ID,r)}}))(x)},"./blocks/site-icon/style.scss":function(e,t,s){},"./blocks/site/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(i),o=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(o),l=s("../node_modules/@babel/runtime/helpers/inherits.js"),u=s.n(l),d=s("../node_modules/@babel/runtime/helpers/createSuper.js"),p=s.n(d),m=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),h=s.n(m),b=s("../node_modules/react/index.js"),j=s.n(b),f=s("../node_modules/prop-types/index.js"),g=s.n(f),v=s("../node_modules/react-redux/es/index.js"),_=s("../node_modules/classnames/index.js"),y=s.n(_),x=s("../node_modules/lodash-es/noop.js"),E=s("./components/gridicon/index.tsx"),k=s("../packages/i18n-calypso/dist/esm/index.js"),O=s("../node_modules/page/page.js"),I=s.n(O),S=s("./config/index.js"),C=s("./blocks/site-icon/index.jsx"),w=s("../node_modules/@babel/runtime/helpers/extends.js"),U=s.n(w),N=s("./components/animate/index.jsx"),T=s("../packages/components/dist/esm/button/index.js"),D=s("./components/external-link/index.jsx"),L=s("./state/analytics/actions/record.js"),P=s("./state/analytics/actions/compose-analytics.js"),q=s("./components/data/query-site-connection-status/index.jsx"),A=s("./state/sites/selectors/is-jetpack-site.js"),z=s("../node_modules/lodash-es/get.js"),R=s("./state/selectors/get-raw-site.js");function M(e,t){return Object(z.a)(Object(R.a)(e,t),"updates",null)}var G=s("./state/selectors/can-current-user.js"),F=s("./state/selectors/get-site-connection-status.js"),J=s("./state/selectors/is-site-automated-transfer.js"),V=(s("./my-sites/site-indicator/style.scss"),function(e){return j.a.createElement(D.a,U()({icon:!0,iconSize:12,target:"_blank"},e))}),W=function(e){u()(s,e);var t=p()(s);function s(){var e;a()(this,s);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),h()(c()(e),"state",{expand:!1}),h()(c()(e),"toggleExpand",(function(){e.setState({expand:!e.state.expand});var t=e.state.expand?"Collapse":"Expand";e.props.recordGoogleEvent("Site-Indicator","Clicked to ".concat(t," the Site Indicator"))})),h()(c()(e),"handlePluginsUpdate",(function(){var t=e.props.siteUpdates;e.recordEvent("Clicked updates available link to plugins updates",t&&t.total)})),h()(c()(e),"handleThemesUpdate",(function(){var t=e.props.siteUpdates;e.recordEvent("Clicked updates available link to theme updates",t&&t.total)})),h()(c()(e),"handleCoreUpdate",(function(){e.recordEvent("Clicked updates available link to WordPress updates",1)})),h()(c()(e),"handleMultipleUpdate",(function(){var t=e.props.siteUpdates;e.recordEvent("Clicked updates available link for multiple updates",t&&t.total)})),h()(c()(e),"handleGenericUpdate",(function(){var t=e.props.siteUpdates;e.props.recordGoogleEvent("Site-Indicator","Clicked updates available link to wp-admin updates","Total Updates",t&&t.total)})),e}return r()(s,[{key:"hasUpdate",value:function(){var e=this.props.siteUpdates;return e&&!this.hasError()&&e.total>0}},{key:"hasError",value:function(){return!1===this.props.siteIsConnected}},{key:"showIndicator",value:function(){var e=this.props,t=e.siteIsAutomatedTransfer,s=e.siteIsJetpack;return e.userCanManage&&s&&!t&&(this.hasUpdate()||this.hasError())}},{key:"updatesAvailable",value:function(){var e=this.props,t=e.site,s=e.siteUpdates,n=e.translate,a="/activity-log/"+t.slug;return s.wordpress===s.total&&t.canUpdateFiles?j.a.createElement("span",null,n("A newer version of WordPress is available. {{link}}Update to %(version)s{{/link}}",{components:{link:j.a.createElement("a",{href:a,onClick:this.handleCoreUpdate})},args:{version:s.wp_update_version}})):s.plugins===s.total&&t.canUpdateFiles?j.a.createElement("span",null,j.a.createElement("a",{onClick:this.handlePluginsUpdate,href:a},n("There is a plugin update available.","There are plugin updates available.",{count:s.total}))):s.themes===s.total&&t.canUpdateFiles?j.a.createElement("span",null,j.a.createElement("a",{onClick:this.handleThemesUpdate,href:a},n("There is a theme update available.","There are theme updates available.",{count:s.total}))):s.themes+s.plugins+s.wordpress===s.total&&t.canUpdateFiles?j.a.createElement("span",null,j.a.createElement("a",{onClick:this.handleMultipleUpdate,href:a},n("There are updates available."))):j.a.createElement("span",null,j.a.createElement(V,{onClick:this.handleGenericUpdate,href:t.options.admin_url+"update-core.php"},n("There is an update available.","There are updates available.",{count:s.total})))}},{key:"recordEvent",value:function(e,t){window.scrollTo(0,0),this.setState({expand:!1}),this.props.recordGoogleEvent("Site-Indicator",e,"Total Updates",t)}},{key:"errorAccessing",value:function(){var e=this.props,t=e.site,s=e.translate;return t?j.a.createElement("span",null,s("This site cannot be accessed."),j.a.createElement(T.a,{borderless:!0,compact:!0,scary:!0,href:"/settings/disconnect-site/".concat(t.slug),onClick:this.props.trackSiteDisconnect},s("Remove Site"))):j.a.createElement("span",null,s("This site cannot be accessed."))}},{key:"getText",value:function(){return this.hasUpdate()?this.updatesAvailable():this.hasError()?this.errorAccessing():null}},{key:"getIcon",value:function(){return this.hasUpdate()?"sync":this.hasError()?"notice":void 0}},{key:"renderIndicator",value:function(){var e=y()({"is-expanded":this.state.expand,"is-update":this.hasUpdate(),"is-error":this.hasError(),"is-action":!0,"site-indicator__main":!0});return j.a.createElement("div",{className:e},!this.state.expand&&j.a.createElement(N.a,{type:"appear"},j.a.createElement("button",{className:"site-indicator__button",onClick:this.toggleExpand},j.a.createElement(E.a,{icon:this.getIcon(),size:16}))),this.state.expand&&j.a.createElement("div",{className:"site-indicator__message"},j.a.createElement("div",{className:"site-indicator__action"},this.getText()),j.a.createElement("button",{className:"site-indicator__button",onClick:this.toggleExpand},j.a.createElement(N.a,{type:"appear"},j.a.createElement(E.a,{icon:"cross",size:18})))))}},{key:"render",value:function(){var e=this.props,t=e.site,s=e.siteIsJetpack;return j.a.createElement("div",{className:"site-indicator__wrapper"},s&&j.a.createElement(q.a,{siteId:t.ID}),this.showIndicator()&&this.renderIndicator())}}]),s}(b.Component);h()(W,"propTypes",{site:g.a.object,siteIsJetpack:g.a.bool,siteUpdates:g.a.object,siteIsConnected:g.a.bool,recordGoogleEvent:g.a.func,recordTracksEvent:g.a.func});var H=Object(v.c)((function(e,t){var s=t.site;return{siteIsConnected:s&&Object(F.a)(e,s.ID),siteIsJetpack:s&&Object(A.a)(e,s.ID),siteIsAutomatedTransfer:s&&Object(J.a)(e,s.ID),siteUpdates:s&&M(e,s.ID),userCanManage:s&&Object(G.b)(e,s.ID,"manage_options")}}),{recordGoogleEvent:L.c,recordTracksEvent:L.e,trackSiteDisconnect:function(){return Object(P.a)(Object(L.c)("Jetpack","Clicked in site indicator to start Jetpack Disconnect flow"),Object(L.e)("calypso_jetpack_site_indicator_disconnect_start"))}})(Object(k.c)(W)),K=s("./state/sites/selectors/get-site.js"),B=s("./state/sites/selectors/is-site-previewable.js"),Q=s("./state/sites/selectors/get-site-slug.js"),X=(s("./blocks/site/style.scss"),function(e){u()(s,e);var t=p()(s);function s(){var e;a()(this,s);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),h()(c()(e),"onSelect",(function(t){e.props.onSelect(t,e.props.site.ID)})),h()(c()(e),"onMouseEnter",(function(t){e.props.onMouseEnter(t,e.props.site.ID)})),h()(c()(e),"onMouseLeave",(function(t){e.props.onMouseLeave(t,e.props.site.ID)})),h()(c()(e),"onViewSiteClick",(function(t){var s=e.props,n=s.isPreviewable,a=s.siteSlug;return n?t.altKey||t.ctrlKey||t.metaKey||t.shiftKey?(e.props.recordTracksEvent("calypso_mysites_sidebar_view_site_modifier_clicked"),void e.props.recordGoogleEvent("Sidebar","Clicked View Site | Modifier Key")):(t.preventDefault(),e.props.recordTracksEvent("calypso_mysites_sidebar_view_site_clicked"),e.props.recordGoogleEvent("Sidebar","Clicked View Site | Calypso"),void I()("/view/"+a)):(e.props.recordTracksEvent("calypso_mysites_sidebar_view_site_unpreviewable_clicked"),void e.props.recordGoogleEvent("Sidebar","Clicked View Site | Unpreviewable"))})),e}return r()(s,[{key:"render",value:function(){var e=this.props,t=e.site,s=e.translate;if(!t)return null;var n=y()({site:!0,"is-jetpack":t.jetpack,"is-primary":t.primary,"is-private":t.is_private,"is-redirect":t.options&&t.options.is_redirect,"is-selected":this.props.isSelected,"is-highlighted":this.props.isHighlighted,"is-compact":this.props.compact});return j.a.createElement("div",{className:n},j.a.createElement("a",{className:"site__content",href:this.props.homeLink?t.URL:this.props.href,"data-tip-target":this.props.tipTarget,target:this.props.externalLink&&"_blank",title:this.props.homeLink?s("View %(domain)s",{args:{domain:t.domain}}):t.domain,onClick:this.props.homeLink?this.onViewSiteClick:this.onSelect,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,"aria-label":this.props.homeLink?s("View %(domain)s",{args:{domain:t.domain}}):t.domain},j.a.createElement(C.a,{site:t,size:this.props.compact?24:32}),j.a.createElement("div",{className:"site__info"},j.a.createElement("div",{className:"site__title"},t.title),j.a.createElement("div",{className:"site__domain"},this.props.homeLink?s("View %(domain)s",{args:{domain:t.domain}}):t.domain),this.props.site.is_private&&j.a.createElement("span",{className:"site__badge site__badge-private"},this.props.site.is_coming_soon?s("Coming Soon"):s("Private")),t.options&&t.options.is_redirect&&j.a.createElement("span",{className:"site__badge site__badge-redirect"},s("Redirect")),t.options&&t.options.is_domain_only&&j.a.createElement("span",{className:"site__badge site__badge-domain-only"},s("Domain"))),this.props.homeLink&&this.props.showHomeIcon&&j.a.createElement("span",{className:"site__home"},j.a.createElement(E.a,{icon:"house",size:18}))),this.props.indicator&&Object(S.c)("site-indicator")?j.a.createElement(H,{site:t}):null)}}]),s}(j.a.Component));h()(X,"defaultProps",{onSelect:x.a,onMouseEnter:x.a,onMouseLeave:x.a,href:null,indicator:!0,isSelected:!1,homeLink:!1,showHomeIcon:!0,compact:!1}),h()(X,"propTypes",{href:g.a.string,externalLink:g.a.bool,indicator:g.a.bool,onSelect:g.a.func,onMouseEnter:g.a.func,onMouseLeave:g.a.func,isSelected:g.a.bool,isHighlighted:g.a.bool,site:g.a.object,siteId:g.a.number,homeLink:g.a.bool,showHomeIcon:g.a.bool,compact:g.a.bool});t.a=Object(v.c)((function(e,t){var s=t.siteId||t.site.ID;return{siteId:s,site:s?Object(K.a)(e,s):t.site,isPreviewable:Object(B.a)(e,s),siteSlug:Object(Q.a)(e,s)}}),{recordGoogleEvent:L.c,recordTracksEvent:L.e})(Object(k.c)(X))},"./blocks/site/style.scss":function(e,t,s){},"./components/animate/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/react/index.js"),a=s.n(n),i=s("../node_modules/prop-types/index.js"),r=s.n(i),o=(s("./components/animate/style.scss"),function(e){var t=e.type,s=e.children;return a.a.createElement("div",{className:"animate__".concat(t)},s)});o.propTypes={type:r.a.oneOf(["appear","fade-in"])},t.a=o},"./components/animate/style.scss":function(e,t,s){},"./components/data/query-site-connection-status/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(i),o=s("../node_modules/@babel/runtime/helpers/inherits.js"),c=s.n(o),l=s("../node_modules/@babel/runtime/helpers/createSuper.js"),u=s.n(l),d=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(d),m=s("../node_modules/prop-types/index.js"),h=s.n(m),b=s("../node_modules/react/index.js"),j=s("../node_modules/react-redux/es/index.js"),f=s("../node_modules/lodash-es/get.js");function g(e,t){return Object(f.a)(e.sites.connection.requesting,t,!1)}var v=s("./state/action-types.js"),_=s("./lib/wp/browser.js"),y=function(e){c()(s,e);var t=u()(s);function s(){return a()(this,s),t.apply(this,arguments)}return r()(s,[{key:"UNSAFE_componentWillMount",value:function(){this.request(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){!e.requestingSiteConnectionStatus&&e.siteId&&e.requestConnectionStatus(e.siteId)}},{key:"render",value:function(){return null}}]),s}(b.Component);p()(y,"propTypes",{siteId:h.a.number,requestingSiteConnectionStatus:h.a.bool,requestConnectionStatus:h.a.func});t.a=Object(j.c)((function(e,t){return{requestingSiteConnectionStatus:g(e,t.siteId)}}),{requestConnectionStatus:function(e){return function(t){return t({type:v.iq,siteId:e}),_.a.undocumented().testConnectionJetpack(e).then((function(s){t({type:v.hq,siteId:e,status:s.connected}),t({type:v.kq,siteId:e})})).catch((function(s){t({type:v.jq,siteId:e,error:s})}))}}})(y)},"./components/external-link/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(i),o=s("../node_modules/@babel/runtime/helpers/inherits.js"),c=s.n(o),l=s("../node_modules/@babel/runtime/helpers/createSuper.js"),u=s.n(l),d=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(d),m=s("../node_modules/react/index.js"),h=s.n(m),b=s("../node_modules/prop-types/index.js"),j=s.n(b),f=s("../node_modules/classnames/index.js"),g=s.n(f),v=s("../node_modules/lodash-es/assign.js"),_=s("../node_modules/lodash-es/omit.js"),y=s("./components/gridicon/index.tsx"),x=s("../packages/i18n-calypso/dist/esm/index.js"),E=s("../packages/components/dist/esm/screen-reader-text/index.js"),k=s("./lib/i18n-utils/browser.js"),O=(s("./components/external-link/style.scss"),function(e){c()(s,e);var t=u()(s);function s(){return a()(this,s),t.apply(this,arguments)}return r()(s,[{key:"render",value:function(){var e=g()("external-link",this.props.className,{"icon-first":this.props.showIconFirst,"has-icon":this.props.icon}),t=Object(v.a)(Object(_.a)(this.props,"icon","iconSize","showIconFirst","iconClassName"),{className:e,rel:"external"});this.props.icon&&(t.target="_blank"),t.target&&(t.rel=t.rel.concat(" noopener noreferrer")),t.href&&(t.href=Object(k.l)(t.href));var s=h.a.createElement(y.a,{className:this.props.iconClassName,icon:"external",size:this.props.iconSize});return h.a.createElement("a",t,this.props.icon&&this.props.showIconFirst&&s,this.props.children,this.props.icon&&!this.props.showIconFirst&&s,this.props.icon&&h.a.createElement(E.a,null,Object(x.f)("(opens in a new tab)",{comment:"accessibility label for an external link"})))}}]),s}(m.Component));p()(O,"defaultProps",{iconSize:18,showIconFirst:!1}),p()(O,"propTypes",{className:j.a.string,href:j.a.string,onClick:j.a.func,icon:j.a.bool,iconSize:j.a.number,target:j.a.string,showIconFirst:j.a.bool,iconClassName:j.a.string}),t.a=O},"./components/external-link/style.scss":function(e,t,s){},"./components/image-preloader/index.tsx":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n,a=s("../node_modules/@babel/runtime/helpers/extends.js"),i=s.n(a),r=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),o=s.n(r),c=s("../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),l=s.n(c),u=s("../node_modules/react/index.js"),d=s.n(u),p=s("../node_modules/lodash-es/noop.js");function m(e){var t,s=e.children,a=e.src,r=e.placeholder,c=e.onLoad,m=e.onError,h=l()(e,["children","src","placeholder","onLoad","onError"]),b=Object(u.useState)(n.PENDING),j=o()(b,2),f=j[0],g=j[1],v=Object(u.useRef)(null),_=Object(u.useRef)(c),y=Object(u.useRef)(m);switch(Object(u.useEffect)((function(){_.current=c,y.current=m}),[m,c]),Object(u.useEffect)((function(){if(g(n.LOADING),a)return v.current=new Image,v.current.src=a,v.current.onload=t,v.current.onerror=t,e;function e(){v.current&&(v.current.onload=p.a,v.current.onerror=p.a,v.current=null)}function t(t){if(e(),!t||"load"!==t.type)return g(n.FAILED),void(y.current&&y.current(t));g(n.LOADED),_.current&&_.current(t)}}),[a]),f){case n.LOADING:t=r;break;case n.LOADED:t=d.a.createElement("img",i()({src:a},h));break;case n.FAILED:t=s}return d.a.createElement("div",{className:"image-preloader"},t)}!function(e){e[e.PENDING=0]="PENDING",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.FAILED=3]="FAILED"}(n||(n={}))},"./components/image/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var n=s("../node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),i=s("../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),r=s.n(i),o=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),c=s.n(o),l=s("../node_modules/@babel/runtime/helpers/createClass.js"),u=s.n(l),d=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=s.n(d),m=s("../node_modules/@babel/runtime/helpers/inherits.js"),h=s.n(m),b=s("../node_modules/@babel/runtime/helpers/createSuper.js"),j=s.n(b),f=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),g=s.n(f),v=s("../node_modules/react/index.js"),_=s.n(v),y=s("../node_modules/classnames/index.js"),x=s.n(y),E=(s("./components/image/style.scss"),function(e){h()(s,e);var t=j()(s);function s(){var e;c()(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),g()(p()(e),"state",{isError:!1}),g()(p()(e),"handleError",(function(){e.setState({isError:!0})})),e}return u()(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.setState({isError:!1})}},{key:"render",value:function(){var e=this.props,t=e.className,s=r()(e,["className"]),n=x()(t,{image:!0,"is-error":this.state.isError});return _.a.createElement("img",a()({onError:this.handleError,className:n},s))}}]),s}(v.Component));g()(E,"defaultProps",{className:""})},"./components/image/style.scss":function(e,t,s){},"./my-sites/media-library/media-file.tsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),i=s("../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),r=s.n(i),o=s("../node_modules/react/index.js"),c=s.n(o),l=s("../node_modules/react-redux/es/index.js"),u=s("./state/selectors/is-private-site.ts"),d=s("./state/selectors/is-site-automated-transfer.js"),p=s("./state/ui/selectors/get-selected-site-id.js"),m=s("./state/ui/selectors/get-selected-site-slug.js"),h=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),b=s.n(h),j=s("../node_modules/debug/src/browser.js"),f=s.n(j),g=s("./lib/wp/browser.js"),v=f()("calypso:my-sites:media-library:proxied-image"),_=(globalThis.Blob,{}),y=function(e){var t=e.siteSlug,s=e.filePath,n=e.query,i=e.placeholder,l=e.maxSize,u=e.onError,d=e.component,p=r()(e,["siteSlug","filePath","query","placeholder","maxSize","onError","component"]),m=Object(o.useState)(""),h=b()(m,2),j=h[0],f=h[1],y="media-library-proxied-image-".concat(t).concat(s).concat(n);return Object(o.useEffect)((function(){if(!j)if(_[y]){var e=URL.createObjectURL(_[y]);f(e),v("set image from cache",{url:e})}else{v("requesting image from API",{requestId:y,imageObjectUrl:j});var a={query:n};null!==l&&(a.maxSize=l),g.a.undocumented().getAtomicSiteMediaViaProxyRetry(t,s,a).then((function(e){!function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4,n=Object.keys(_);n.length>100&&delete _[n[0]],_[e]=t,setTimeout((function(){delete _[e]}),s)}(y,e),f(URL.createObjectURL(e)),v("got image from API",{requestId:y,imageObjectUrl:j,data:e})})).catch(u)}return function(){j&&(v("Cleared blob from memory on dismount: "+j),URL.revokeObjectURL(j))}}),[s,y,t]),j?c.a.createElement(d,a()({src:j},p)):i};y.defaultProps={placeholder:null};var x=y,E=s("./lib/media/utils.js"),k=function(e){var t=e.src,s=e.query,n=e.filePath,i=e.siteSlug,o=e.useProxy,l=void 0!==o&&o,u=e.placeholder,d=void 0===u?null:u,p=e.maxSize,m=(e.dispatch,e.component),h=e.proxiedComponent,b=r()(e,["src","query","filePath","siteSlug","useProxy","placeholder","maxSize","dispatch","component","proxiedComponent"]);return l?c.a.createElement(x,a()({siteSlug:i,filePath:n,query:s,component:h||m,placeholder:d,maxSize:p},b)):c.a.createElement(m,a()({src:t},b))};k.defaultProps={placeholder:null,component:"img"};t.a=Object(l.c)((function(e,t){var s=t.src,n=Object(p.a)(e),a=Object(m.a)(e),i=!!Object(d.a)(e,n),r=!!Object(u.a)(e,n),o=Object(E.n)(s,a),c=o.filePath,l=o.query,h=o.isRelativeToSiteRoot;return{query:l,siteSlug:a,useProxy:i&&r&&c&&h,filePath:c}}))(k)},"./my-sites/media-library/media-image.tsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),i=s("../node_modules/react/index.js"),r=s.n(i),o=s("./components/image-preloader/index.tsx"),c=s("./my-sites/media-library/media-file.tsx"),l=function(e){var t=e.component;return"img"===t&&e.placeholder&&(t=o.a),r.a.createElement(c.a,a()({},e,{component:t}))};l.defaultProps={component:"img",proxiedComponent:"img"},t.a=l},"./my-sites/site-indicator/style.scss":function(e,t,s){},"./state/selectors/get-media-item.js":function(e,t,s){"use strict";function n(e,t,s){var n=e.media.queries[t];if(!n)return null;var a=n.getItem(s)||null;return null===a?null:a.URL?a:null}s.d(t,"a",(function(){return n}))},"./state/selectors/get-site-connection-status.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("../node_modules/lodash-es/get.js");function a(e,t){return Object(n.a)(e.sites.connection.items,t,null)}},"./state/selectors/get-site-icon-id.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("../node_modules/lodash-es/get.js"),a=s("./state/selectors/get-raw-site.js"),i=s("./state/site-settings/selectors.js");function r(e,t){var s=Object(a.a)(e,t);if(s)return Object(n.a)(s,"icon.media_id",null);var r=Object(i.a)(e,t);return r?r.site_icon:null}},"./state/selectors/get-site-icon-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("../node_modules/lodash-es/get.js"),a=s("./state/selectors/get-raw-site.js"),i=s("./lib/safe-image-url/index.js"),r=s("./state/selectors/get-media-item.js");var o=s("./state/selectors/get-site-icon-id.js");function c(e,t){var s=function(e,t,s){var n=Object(r.a)(e,t,s);return n?Object(i.a)(n.URL):null}(e,t,Object(o.a)(e,t));return s||Object(n.a)(Object(a.a)(e,t),"icon.img",null)}},"./state/selectors/get-sites.js":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=s.n(n),i=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),r=s.n(i),o=s("../node_modules/lodash-es/sortBy.js"),c=s("../node_modules/lodash-es/partition.js"),l=s("./lib/create-selector/index.js"),u=s("./state/sites/selectors/get-site.js"),d=s("./state/selectors/get-primary-site-id.js"),p=s("./state/selectors/get-sites-items.js");t.a=Object(l.a)((function(e){var t,s=Object(d.a)(e),n=Object(c.a)(Object(p.a)(e),{ID:s}),i=r()(n,2),l=i[0],m=i[1];return[].concat(a()(l),a()((t=m,Object(o.a)(t,["name","URL"])))).map((function(t){return Object(u.a)(e,t.ID)}))}),(function(e){return[Object(p.a)(e),e.currentUser.capabilities]}))},"./state/selectors/is-private-site.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/selectors/get-raw-site.js"),a=s("./state/site-settings/selectors.js");function i(e,t){var s=Object(n.a)(e,t);if(s)return s.is_private;var i=Object(a.a)(e,t);return i?-1===parseInt(i.blog_public,10):null}},"./state/site-settings/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("../node_modules/lodash-es/get.js");function a(e,t){return Object(n.a)(e.siteSettings.requesting,[t],!1)}function i(e,t){return Object(n.a)(e.siteSettings.saveRequests,[t,"saving"],!1)}function r(e,t){return Object(n.a)(e.siteSettings.items,[t],null)}function o(e,t){return"success"===function(e,t){return Object(n.a)(e.siteSettings.saveRequests,[t,"status"])}(e,t)}function c(e,t){return Object(n.a)(e.siteSettings.saveRequests,[t,"error"],!1)}},"./state/ui/selectors/get-selected-site-slug.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/sites/selectors/get-site-slug.js"),a=s("./state/ui/selectors/get-selected-site-id.js");function i(e){var t=Object(a.a)(e);return t?Object(n.a)(e,t):null}}}]);