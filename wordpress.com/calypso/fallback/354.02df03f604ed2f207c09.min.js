(window.webpackJsonp=window.webpackJsonp||[]).push([[354],{"./blocks/site/placeholder.jsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var s=n("../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(s),i=n("../node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(i),r=n("../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(r),l=n("../node_modules/@babel/runtime/helpers/createSuper.js"),u=n.n(l),d=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=n.n(d),m=n("../node_modules/react/index.js"),h=n.n(m),f=n("../node_modules/debug/src/browser.js"),b=n.n(f)()("calypso:my-sites:site"),y=function(e){c()(n,e);var t=u()(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"componentDidMount",value:function(){b("The Site component is mounted.")}},{key:"render",value:function(){return h.a.createElement("div",{className:"site is-loading"},h.a.createElement("div",{className:"site__content"},h.a.createElement("div",{className:"site-icon"}),h.a.createElement("div",{className:"site__info"},h.a.createElement("div",{className:"site__title"},"This is an example"),h.a.createElement("div",{className:"site__domain"},"example.wordpress.com"))))}}]),n}(h.a.Component);p()(y,"displayName","SitePlaceholder")},"./blocks/visit-site/index.jsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n("../node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(s),i=n("../node_modules/react/index.js"),o=n.n(i),r=n("../packages/i18n-calypso/dist/esm/index.js"),c=n("./lib/wp/browser.js");n("./blocks/visit-site/style.scss");function l(e){var t=e.siteSlug,n=Object(r.h)(),s=function(e){var t=Object(i.useState)(null),n=a()(t,2),s=n[0],o=n[1];return Object(i.useEffect)((function(){c.a.site(e).get({apiVersion:"1.2"}).then(o)}),[e]),s}(t);if(!s)return null;var l=o.a.createElement("a",{href:s.URL},s.name.trim());return o.a.createElement("div",{className:"visit-site"},n("or visit {{siteLink/}}",{components:{siteLink:l},context:"Alternative link under login/site-selection header, leads to site frontend."}))}},"./blocks/visit-site/style.scss":function(e,t,n){},"./components/close-on-escape/index.jsx":function(e,t,n){"use strict";var s=n("../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(s),i=n("../node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(i),r=n("../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(r),l=n("../node_modules/@babel/runtime/helpers/createSuper.js"),u=n.n(l),d=n("../node_modules/lodash-es/isEmpty.js"),p=n("../node_modules/lodash-es/last.js"),m=n("../node_modules/lodash-es/includes.js"),h=n("../node_modules/lodash-es/filter.js"),f=n("../node_modules/lodash-es/noop.js"),b=n("../node_modules/prop-types/index.js"),y=n.n(b),_=n("../node_modules/react/index.js"),j=[];function g(e){var t;Object(d.a)(j)||27!==e.keyCode||(t=e.target,Object(m.a)(["INPUT","TEXTAREA"],t.nodeName))||Object(p.a)(j).onEscape()}function v(e,t){j.push({component:e,onEscape:t}),Object(d.a)(j)||document.addEventListener("keydown",g,!0)}function O(e){j=Object(h.a)(j,(function(t){return t.component!==e})),Object(d.a)(j)&&document.removeEventListener("keydown",g,!0)}var S=function(e){c()(n,e);var t=u()(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"componentDidMount",value:function(){v(this,this.props.onEscape)}},{key:"componentWillUnmount",value:function(){O(this,this.props.onEscape)}},{key:"render",value:function(){return null}}]),n}(_.Component);S.propTypes={onEscape:y.a.func},S.defaultProps={onEscape:f.a},t.a=S},"./components/data/query-site-domains/index.jsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n("../node_modules/prop-types/index.js"),a=n.n(s),i=n("../node_modules/react/index.js"),o=n("../node_modules/react-redux/es/index.js"),r=n("./state/sites/domains/selectors.js"),c=n("./state/sites/domains/actions.js");function l(e){var t=e.siteId,n=Object(o.d)();return Object(i.useEffect)((function(){n(function(e){return function(t,n){e&&!Object(r.e)(n(),e)&&t(Object(c.d)(e))}}(t))}),[n,t]),null}l.propTypes={siteId:a.a.number.isRequired}},"./components/empty-content/no-sites-message/index.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/index.js"),a=n.n(s),i=n("../packages/i18n-calypso/dist/esm/index.js"),o=n("./config/index.js"),r=n("./components/empty-content/index.jsx");t.a=Object(i.c)((function(e){var t=e.translate;return a.a.createElement(r.a,{title:t("You don't have any WordPress sites yet."),line:t("Would you like to start one?"),action:t("Create Site"),actionURL:Object(o.a)("signup_url")+"?ref=calypso-nosites",illustration:"/calypso/images/illustrations/illustration-nosites.svg"})}))},"./components/main/index.jsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("../node_modules/react/index.js"),a=n.n(s),i=n("../node_modules/classnames/index.js"),o=n.n(i);n("./components/main/style.scss");function r(e){var t=e.className,n=e.children,s=e.wideLayout,i=void 0!==s&&s,r=o()(t,"main",{"is-wide-layout":i});return a.a.createElement("main",{className:r,role:"main"},n)}},"./components/main/style.scss":function(e,t,n){},"./components/search/index.jsx":function(e,t,n){"use strict";var s=n("../node_modules/@babel/runtime/helpers/extends.js"),a=n.n(s),i=n("../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(i),r=n("../node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(r),l=n("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),u=n.n(l),d=n("../node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(d),m=n("../node_modules/@babel/runtime/helpers/createSuper.js"),h=n.n(m),f=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),b=n.n(f),y=n("../packages/viewport/dist/esm/index.js"),_=n("../node_modules/react/index.js"),j=n.n(_),g=n("../node_modules/prop-types/index.js"),v=n.n(g),O=n("../node_modules/classnames/index.js"),S=n.n(O),k=n("../node_modules/lodash-es/uniqueId.js"),x=n("../node_modules/lodash-es/debounce.js"),E=n("../node_modules/lodash-es/noop.js"),w=n("../packages/i18n-calypso/dist/esm/index.js"),C=n("./components/gridicon/index.tsx"),I=n("./components/spinner/index.jsx"),N=n("./components/translatable/proptype.js"),P=n("./lib/analytics/ga.js");n("./components/search/style.scss");function D(e,t){switch(t.key){case" ":case"Enter":this[e](t)}}var T=function(e){p()(n,e);var t=h()(n);function n(e){var s;return o()(this,n),s=t.call(this,e),b()(u()(s),"setOpenIconRef",(function(e){return s.openIcon=e})),b()(u()(s),"setSearchInputRef",(function(e){return s.searchInput=e})),b()(u()(s),"setOverlayRef",(function(e){return s.overlay=e})),b()(u()(s),"scrollOverlay",(function(){s.overlay&&window.requestAnimationFrame((function(){s.overlay&&s.searchInput&&(s.overlay.scrollLeft=s.getScrollLeft(s.searchInput))}))})),b()(u()(s),"getScrollLeft",(function(e){if(!e.createTextRange)return e.scrollLeft;var t=e.createTextRange(),n=window.getComputedStyle(e,void 0),s=parseFloat(n.paddingLeft),a=t.getBoundingClientRect();return e.getBoundingClientRect().left+e.clientLeft+s-a.left})),b()(u()(s),"focus",(function(){setTimeout((function(){return s.searchInput&&s.searchInput.focus()}),0)})),b()(u()(s),"blur",(function(){return s.searchInput.blur()})),b()(u()(s),"clear",(function(){return s.setState({keyword:""})})),b()(u()(s),"onBlur",(function(e){s.props.onBlur&&s.props.onBlur(e),s.setState({hasFocus:!1})})),b()(u()(s),"onChange",(function(e){s.setState({keyword:e.target.value})})),b()(u()(s),"openSearch",(function(e){e.preventDefault(),s.setState({keyword:"",isOpen:!0}),Object(P.a)(s.props.analyticsGroup,"Clicked Open Search")})),b()(u()(s),"closeSearch",(function(e){e.preventDefault(),s.props.disabled||(s.setState({keyword:"",isOpen:s.props.isOpen||!1}),s.searchInput.value="",s.searchInput.blur(),s.props.pinned&&s.openIcon.focus(),s.props.onSearchClose(e),Object(P.a)(s.props.analyticsGroup,"Clicked Close Search"))})),b()(u()(s),"keyUp",(function(e){"Enter"===e.key&&Object(y.e)()&&s.blur(),s.props.pinned&&("Escape"===e.key&&s.closeSearch(e),s.scrollOverlay())})),b()(u()(s),"keyDown",(function(e){s.scrollOverlay(),"Escape"===e.key&&""===e.target.value&&s.closeSearch(e),s.props.onKeyDown(e)})),b()(u()(s),"onFocus",(function(){if(s.searchInput){var e=s.searchInput.value;e&&(s.searchInput.value="",s.searchInput.value=e),s.setState({hasFocus:!0}),s.props.onSearchOpen()}})),s.instanceId=Object(k.a)(),s.state={keyword:e.initialValue||"",isOpen:!!e.isOpen,hasFocus:e.autoFocus},s.closeListener=D.bind(u()(s),"closeSearch"),s.openListener=D.bind(u()(s),"openSearch"),s}return c()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.onSearch===this.props.onSearch&&e.delaySearch===this.props.delaySearch||(this.onSearch=this.props.delaySearch?Object(x.a)(this.props.onSearch,this.props.delayTimeout):this.props.onSearch),this.props.isOpen!==e.isOpen&&this.setState({isOpen:e.isOpen}),this.props.value===e.value||!e.value&&""!==e.value||e.value===this.state.keyword||this.setState({keyword:e.value})}},{key:"componentDidUpdate",value:function(e,t){this.scrollOverlay(),(this.state.isOpen&&!t.isOpen||this.props.autoFocus&&!e.autoFocus)&&this.focus(),this.state.keyword!==t.keyword&&(this.state.keyword?this.onSearch(this.state.keyword):(this.props.delaySearch&&this.onSearch.cancel(),this.props.onSearch(this.state.keyword)),this.props.onSearchChange(this.state.keyword))}},{key:"componentDidMount",value:function(){this.onSearch=this.props.delaySearch?Object(x.a)(this.props.onSearch,this.props.delayTimeout):this.props.onSearch}},{key:"render",value:function(){var e=this.state.keyword,t=this.props.placeholder||w.a.translate("Searchâ€¦",{textOnly:!0}),n=this.props.inputLabel,s=this.props.pinned&&!this.state.isOpen,i=this.state.isOpen||!this.props.pinned||this.props.initialValue,o=this.props.disableAutocorrect&&{autoComplete:"off",autoCorrect:"off",spellCheck:"false"},r=S()(this.props.additionalClasses,this.props.dir,{"is-expanded-to-container":this.props.fitsContainer,"is-open":i,"is-searching":this.props.searching,"is-compact":this.props.compact,"has-focus":this.state.hasFocus,"has-open-icon":!this.props.hideOpenIcon,search:!0}),c=S()("search__input-fade",this.props.dir),l=S()("search__input",this.props.dir);return j.a.createElement("div",{dir:this.props.dir||null,className:r,role:"search"},j.a.createElement(I.a,null),j.a.createElement("div",{role:"button",className:"search__icon-navigation",ref:this.setOpenIconRef,onClick:s?this.openSearch:this.focus,tabIndex:s?"0":null,onKeyDown:s?this.openListener:null,"aria-controls":"search-component-"+this.instanceId,"aria-label":w.a.translate("Open Search",{context:"button label"})},!this.props.hideOpenIcon&&j.a.createElement(C.a,{icon:"search",className:"search__open-icon"})),j.a.createElement("div",{className:c},j.a.createElement("input",a()({type:"search",id:"search-component-"+this.instanceId,autoFocus:this.props.autoFocus,"aria-describedby":this.props.describedBy,"aria-label":n||w.a.translate("Search"),"aria-hidden":!i,className:l,placeholder:t,role:"searchbox",value:e,ref:this.setSearchInputRef,onChange:this.onChange,onKeyUp:this.keyUp,onKeyDown:this.keyDown,onMouseUp:this.props.onClick,onFocus:this.onFocus,onBlur:this.onBlur,disabled:this.props.disabled,autoCapitalize:"none",dir:this.props.dir,maxLength:this.props.maxLength,minLength:this.props.minLength},o)),this.props.overlayStyling&&this.renderStylingDiv()),this.closeButton())}},{key:"renderStylingDiv",value:function(){return j.a.createElement("div",{className:"search__text-overlay",ref:this.setOverlayRef},this.props.overlayStyling(this.state.keyword))}},{key:"closeButton",value:function(){return this.props.hideClose||!this.state.keyword&&!this.state.isOpen?null:j.a.createElement("div",{role:"button",className:"search__icon-navigation",onClick:this.closeSearch,tabIndex:"0",onKeyDown:this.closeListener,"aria-controls":"search-component-"+this.instanceId,"aria-label":w.a.translate("Close Search",{context:"button label"})},j.a.createElement(C.a,{icon:"cross",className:"search__close-icon"}))}}]),n}(_.Component);b()(T,"propTypes",{additionalClasses:v.a.string,initialValue:v.a.string,value:v.a.string,placeholder:N.a,pinned:v.a.bool,delaySearch:v.a.bool,delayTimeout:v.a.number,describedBy:v.a.string,onSearch:v.a.func.isRequired,onSearchChange:v.a.func,onSearchOpen:v.a.func,onSearchClose:v.a.func,analyticsGroup:v.a.string,overlayStyling:v.a.func,autoFocus:v.a.bool,disabled:v.a.bool,onKeyDown:v.a.func,onClick:v.a.func,disableAutocorrect:v.a.bool,onBlur:v.a.func,searching:v.a.bool,isOpen:v.a.bool,dir:v.a.oneOf(["ltr","rtl"]),fitsContainer:v.a.bool,maxLength:v.a.number,minLength:v.a.number,hideClose:v.a.bool,compact:v.a.bool,hideOpenIcon:v.a.bool,inputLabel:v.a.string}),b()(T,"defaultProps",{pinned:!1,delaySearch:!1,delayTimeout:300,autoFocus:!1,disabled:!1,describedBy:null,onSearchChange:E.a,onSearchOpen:E.a,onSearchClose:E.a,onKeyDown:E.a,onClick:E.a,overlayStyling:void 0,disableAutocorrect:!1,searching:!1,isOpen:!1,dir:void 0,fitsContainer:!1,hideClose:!1,compact:!1,hideOpenIcon:!1}),t.a=T},"./components/search/style.scss":function(e,t,n){},"./components/spinner/index.jsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var s=n("../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(s),i=n("../node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(i),r=n("../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(r),l=n("../node_modules/@babel/runtime/helpers/createSuper.js"),u=n.n(l),d=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=n.n(d),m=n("../node_modules/prop-types/index.js"),h=n.n(m),f=n("../node_modules/react/index.js"),b=n.n(f),y=n("../node_modules/classnames/index.js"),_=n.n(y),j=(n("./components/spinner/style.scss"),function(e){c()(n,e);var t=u()(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=_()("spinner",this.props.className),t={width:this.props.size,height:this.props.size,fontSize:this.props.size};return b.a.createElement("div",{className:e},b.a.createElement("div",{className:"spinner__outer",style:t},b.a.createElement("div",{className:"spinner__inner"})))}}]),n}(f.PureComponent));p()(j,"propTypes",{className:h.a.string,size:h.a.number}),p()(j,"defaultProps",{size:20})},"./components/spinner/style.scss":function(e,t,n){},"./my-sites/controller.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return Re})),n.d(t,"e",(function(){return Be})),n.d(t,"a",(function(){return Le})),n.d(t,"b",(function(){return Ae})),n.d(t,"f",(function(){return Fe})),n.d(t,"d",(function(){return Ue}));var s=n("../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(s),i=n("../node_modules/page/page.js"),o=n.n(i),r=n("../node_modules/react/index.js"),c=n.n(r),l=n("../packages/i18n-calypso/dist/esm/index.js"),u=n("../node_modules/lodash-es/startsWith.js"),d=n("../node_modules/lodash-es/noop.js"),p=n("../node_modules/lodash-es/some.js"),m=n("../node_modules/lodash-es/get.js"),h=n("../node_modules/lodash-es/uniq.js"),f=n("./state/sites/actions.js"),b=n("./state/sites/selectors/get-site-admin-url.js"),y=n("./state/sites/selectors/get-site.js"),_=n("./state/sites/selectors/get-site-slug.js"),j=n("./state/sites/selectors/is-jetpack-site.js"),g=n("./state/sites/selectors/is-jetpack-module-active.js"),v=n("./state/ui/selectors/get-selected-site.js"),O=n("./state/ui/selectors/get-selected-site-id.js"),S=n("./state/ui/actions/index.js"),k=n("./state/preferences/actions.js"),x=n("./state/preferences/selectors.js"),E=n("../node_modules/@babel/runtime/helpers/extends.js"),w=n.n(E),C=n("../node_modules/@babel/runtime/helpers/classCallCheck.js"),I=n.n(C),N=n("../node_modules/@babel/runtime/helpers/createClass.js"),P=n.n(N),D=n("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),T=n.n(D),R=n("../node_modules/@babel/runtime/helpers/inherits.js"),B=n.n(R),L=n("../node_modules/@babel/runtime/helpers/createSuper.js"),A=n.n(L),F=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),U=n.n(F),q=n("./config/index.js"),M=n("../node_modules/prop-types/index.js"),W=n.n(M),G=n("../node_modules/react-click-outside/dist/index.js"),z=n.n(G),H=n("../node_modules/react-redux/es/index.js"),Y=n("./components/close-on-escape/index.jsx"),K=n("./components/site-selector/index.jsx"),V=n("./lib/touch-detect/index.js"),J=n("./state/ui/layout-focus/selectors.js"),Q=n("./state/ui/layout-focus/actions.js"),X=function(e){B()(n,e);var t=A()(n);function n(){var e;I()(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),U()(T()(e),"state",{isAutoFocused:!1,isRendered:"sites"===e.props.currentLayoutFocus}),U()(T()(e),"onClose",(function(t,n){"Escape"===t.key?e.closePicker():(e.props.setNextLayoutFocus("sidebar"),n&&e.scrollToTop()),e.props.onClose(t,n)})),U()(T()(e),"scrollToTop",(function(){document.getElementById("secondary").scrollTop=0,window.scrollTo(0,0)})),U()(T()(e),"closePicker",(function(t){"sites"===e.props.currentLayoutFocus&&(e.props.setLayoutFocus("sidebar"),t&&e.scrollToTop())})),U()(T()(e),"handleClickOutside",(function(){e.closePicker(null)})),e}return P()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if("sites"!==e.currentLayoutFocus||this.state.isRendered||this.setState({isRendered:!0}),e.currentLayoutFocus&&!Object(V.a)()){var t="sites"===e.currentLayoutFocus;t!==this.state.isAutoFocused&&this.setState({isAutoFocused:t})}}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Y.a,{onEscape:this.closePicker}),c.a.createElement(K.a,{isPlaceholder:!this.state.isRendered,indicator:!0,showAddNewSite:!0,showAllSites:!0,allSitesPath:this.props.allSitesPath,siteBasePath:this.props.siteBasePath,autoFocus:this.state.isAutoFocused,onClose:this.onClose,groups:!0}))}}]),n}(c.a.Component);U()(X,"displayName","SitePicker"),U()(X,"propTypes",{onClose:W.a.func,currentLayoutFocus:W.a.string,setNextLayoutFocus:W.a.func.isRequired,setLayoutFocus:W.a.func.isRequired}),U()(X,"defaultProps",{onClose:d.a});var Z=Object(H.c)((function(e){return{currentLayoutFocus:Object(J.a)(e)}}),{setNextLayoutFocus:Q.c,setLayoutFocus:Q.b})(z()(X)),$=n("./components/async-load/index.jsx"),ee=function(e){n.e(357).then(n.bind(null,"./landing/jetpack-cloud/components/sidebar/index.jsx")).then((function(t){e(t.default)}))},te=function(e){Promise.all([n.e(456),n.e(376),n.e(155)]).then(n.bind(null,"./my-sites/sidebar/index.jsx")).then((function(t){e(t.default)}))},ne=function(e){B()(n,e);var t=A()(n);function n(){var e;I()(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),U()(T()(e),"preventPickerDefault",(function(e){e.preventDefault(),e.stopPropagation()})),e}return P()(n,[{key:"render",value:function(){var e={placeholder:null,path:this.props.path,siteBasePath:this.props.siteBasePath},t=q.a.isEnabled("jetpack-cloud")?c.a.createElement($.a,w()({require:ee},e)):c.a.createElement($.a,w()({require:te},e));return c.a.createElement("div",null,c.a.createElement(Z,{allSitesPath:this.props.allSitesPath,siteBasePath:this.props.siteBasePath,onClose:this.preventPickerDefault}),t)}}]),n}(c.a.Component);U()(ne,"displayName","MySitesNavigation");var se=ne,ae=n("./lib/route/path.ts"),ie=n("./lib/url/add-query-args.ts"),oe=n("./notices/index.js"),re=n("./lib/analytics/page-view.js"),ce=n("./lib/analytics/tracks.js"),le=n("./state/selectors/get-primary-domain-by-site-id.js"),ue=n("./state/selectors/get-primary-site-id.js"),de=n("./state/selectors/get-site-id.js"),pe=n("./state/current-user/selectors.js"),me=n("./state/selectors/is-domain-only-site.js"),he=n("./state/selectors/is-site-automated-transfer.js"),fe=n("./state/selectors/is-site-migration-in-progress.js"),be=n("./state/selectors/can-current-user.js"),ye=n("./my-sites/domains/paths.js"),_e=n("./my-sites/email/paths.js"),je=n("../packages/components/dist/esm/card/index.js"),ge=n("./components/main/index.jsx"),ve=n("./blocks/visit-site/index.jsx"),Oe=(n("./my-sites/sites/style.scss"),function(e){B()(n,e);var t=A()(n);function n(){var e;I()(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),U()(T()(e),"filterSites",(function(t){var n=e.props.siteBasePath;return/^\/domains/.test(n)?!t.jetpack||t.options.is_automated_transfer:/^\/plans/.test(n)?!t.jetpack||t.isSiteUpgradeable:/^\/block-editor/.test(n)?!t.is_vip:/^\/hosting-config/.test(n)?!!t.capabilities.view_hosting:/^\/home/.test(n)?!(t.is_vip||t.jetpack&&!t.options.is_automated_transfer):t})),e}return P()(n,[{key:"getHeaderText",value:function(){if(this.props.getSiteSelectionHeaderText)return this.props.getSiteSelectionHeaderText();var e=this.props.siteBasePath.split("?")[0].split("/")[1];void 0!==e&&(e=e.toLowerCase());var t=this.props.translate;if(["page","post","edit","block-editor"].includes(e))return t("Select a site to start writing");switch(e){case"activity-log":e=t("Activity");break;case"stats":e=t("Insights");break;case"plans":e=t("Plans");break;case"media":e=t("Media");break;case"sharing":e=t("Sharing");break;case"people":e=t("People");break;case"domains":e=t("Domains");break;case"settings":e=t("Settings");break;case"home":e=t("My Home");break;case"hosting-config":e=t("Hosting Configuration")}return t("Select a site to open {{strong}}%(path)s{{/strong}}",{args:{path:e},components:{strong:c.a.createElement("strong",null)}})}},{key:"render",value:function(){return c.a.createElement(ge.a,{className:"sites"},c.a.createElement("div",{className:"sites__select-header"},c.a.createElement("h2",{className:"sites__select-heading"},this.getHeaderText()),this.props.fromSite&&c.a.createElement(ve.a,{siteSlug:this.props.fromSite})),c.a.createElement(je.a,{className:"sites__select-wrapper"},c.a.createElement(K.a,{filter:this.filterSites,siteBasePath:this.props.siteBasePath,groups:!0})))}}]),n}(r.Component));U()(Oe,"propTypes",{siteBasePath:W.a.string.isRequired});var Se=Object(l.c)(Oe),ke=n("./state/notices/actions.js"),xe=n("./controller/index.web.js"),Ee=n("./components/empty-content/no-sites-message/index.jsx"),we=n("./components/empty-content/index.jsx"),Ce=n("./my-sites/domains/domain-management/list/domain-only.jsx"),Ie=function(e){return{getState:function(){return e.store.getState()},dispatch:function(t){return e.store.dispatch(t)}}},Ne=function(e){n.e(417).then(n.bind(null,"./me/sidebar/index.jsx")).then((function(t){e(t.default)}))};function Pe(e){var t=Object(ae.d)(e.pathname),n=e.pathname;return t&&(n=Object(ae.h)(e.pathname)),Object(u.a)(e.pathname,Object(ye.x)())?c.a.createElement($.a,{require:Ne,context:e}):c.a.createElement(se,{path:e.path,allSitesPath:n,siteBasePath:n})}function De(e){e.store.dispatch(Object(S.h)({group:"sites",secondary:!1}))}function Te(e,t){var n=e.store.getState(),s=Object(v.a)(n),i=Object(he.a)(n,s.ID),r=Object(be.b)(n,s.ID,"manage_options"),l=i&&q.a.isEnabled("calypsoify/plugins");if(Object(fe.a)(n,s.ID)&&!Object(u.a)(e.pathname,"/migrate/"))return o.a.redirect("/migrate/".concat(s.slug)),!1;if(r&&l&&/^\/plugins/.test(t)){var f=Object(m.a)(e,"params.plugin"),_="";f&&(_=["tab=search","s=".concat(f),"type=term","modal-mode=true","plugin=".concat(f)].join("&"));var j="plugin-install.php?calypsoify=1"+"&".concat(_),g=Object(b.a)(n,s.ID)+j;return window.location.replace(g),!1}var O=Object(le.a)(n,s.ID);if(Object(me.a)(n,s.ID)&&!function(e,t,n,s){var a=[ye.d,ye.e,ye.g,ye.h,ye.k,ye.m,ye.o,ye.r,ye.u,ye.w,_e.a,_e.b,_e.e,_e.d],i=a.map((function(e){return e===_e.e?Object(_e.e)(t,t,s.planType):e(t,t)}));n&&t!==n.name&&(i=i.concat(a.map((function(e){return e(t,n.name)}))));var o=["/checkout/","/me/purchases/".concat(t)];return!!Object(p.a)(o,(function(t){return Object(u.a)(e,t)}))||i.indexOf(e)>-1}(e.pathname,s.slug,O,e.params))return function(e,t){e.primary=c.a.createElement(Ce.a,{siteId:t.ID,hasNotice:!1}),e.secondary=Pe(e),Object(xe.c)(e,d.a),Object(xe.e)(e)}(e,s),!1;if(Object(x.c)(n)){var S=Object(x.b)(n,"recentSites");if(s.ID!==S[0]){var E=Object(h.a)([s.ID].concat(a()(S))).slice(0,5).filter((function(e){return!!Object(y.a)(n,e)}));e.store.dispatch(Object(k.b)("recentSites",E))}}return!0}function Re(e,t){return e.store.dispatch(Object(S.i)(null)),t()}function Be(e,t){var n=Ie(e),s=n.getState,a=n.dispatch,i=e.params.site||Object(ae.d)(e.path),r=Object(ae.h)(e.path,i),u=Object(pe.b)(s()),p=u&&1===u.visible_site_count;if(u&&0===u.site_count)return function(e){De(e),e.primary=c.a.createElement(Ee.a),Object(xe.c)(e,d.a),Object(xe.e)(e)}(e),Object(re.a)("/no-sites","Sites > No Sites",{base_path:r});if(u&&0===u.visible_site_count)return function(e){var t=Ie(e).getState,n=Object(pe.b)(t()),s=n&&n.site_count-n.visible_site_count,a=Object(q.a)("signup_url");De(e),e.primary=c.a.createElement(we.a,{title:l.a.translate("You have %(hidden)d hidden WordPress site.","You have %(hidden)d hidden WordPress sites.",{count:s,args:{hidden:s}}),line:l.a.translate("To manage it here, set it to visible.","To manage them here, set them to visible.",{count:s}),action:l.a.translate("Change Visibility"),actionURL:"//dashboard.wordpress.com/wp-admin/index.php?page=my-blogs",secondaryAction:l.a.translate("Create New Site"),secondaryActionURL:"".concat(a,"?ref=calypso-nosites")}),Object(xe.c)(e,d.a),Object(xe.e)(e)}(e),Object(re.a)("/no-sites","".concat("Sites"," > All Sites Hidden"),{base_path:r});if(!p||i){if(!i)return a(Object(S.e)()),t();var m=Object(de.a)(s(),i);m?(a(Object(S.i)(m)),Te(e,r)&&t()):a(Object(f.e)(i)).then((function(){var n=Object(de.a)(s(),i);if(n)a(Object(S.i)(n)),Te(e,r)&&t();else{var c=Object(ie.a)({site:i},Object(ae.h)(e.path,i));o.a.redirect(c)}}))}else{var h=Object(ue.a)(s()),b=function(t){var n="".concat(e.pathname,"/").concat(t);e.querystring&&(n+="?".concat(e.querystring)),o.a.redirect(n)},y=Object(_.a)(s(),h);y?b(y):a(Object(f.e)(h)).then((function(){var e=Object(_.a)(s(),h);e?b(e):function(e,t){var n={username:e.username,primary_blog:e.primary_blog,primary_blog_url:e.primary_blog_url,primary_blog_is_jetpack:e.primary_blog_is_jetpack};e.primary_blog_is_jetpack?(t(Object(ke.g)(l.a.translate("Please check your Primary Site's Jetpack connection"),{button:"wp-admin",href:"".concat(e.primary_blog_url,"/wp-admin")})),Object(ce.recordTracksEvent)("calypso_mysites_single_site_jetpack_connection_error",n)):Object(ce.recordTracksEvent)("calypso_mysites_single_site_error",n)}(u,a)}))}}function Le(e,t){return function(n,s){var a=Ie(n).getState,i=Object(O.a)(a()),r=Object(j.a)(a(),i),c=Object(g.a)(a(),i,e);if(!r)return s();c||!1===t?s():o.a.redirect("string"==typeof t?t:"/stats")}}function Ae(e,t){e.secondary=Pe(e),t()}function Fe(e,t){"1"===e.query.verified&&oe.a.success(l.a.translate("Email verified! Now that you've confirmed your email address you can publish posts on your blog.")),e.store.dispatch(Object(Q.b)("content")),De(e),e.primary=function(e){var t=Object(ae.h)(e.path),n="/sites"===t?"/home":t;return Object(re.a)(t,"Sites"),c.a.createElement(Se,{siteBasePath:n,getSiteSelectionHeaderText:e.getSiteSelectionHeaderText,fromSite:e.query.site})}(e),t()}function Ue(e){return function(t,n){var s=t.store.getState();return Object(O.a)(s)?n():o.a.redirect(e)}}},"./my-sites/domains/domain-management/list/domain-only.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react-redux/es/index.js"),a=n("../packages/i18n-calypso/dist/esm/index.js"),i=n("../node_modules/prop-types/index.js"),o=n.n(i),r=n("../node_modules/react/index.js"),c=n.n(r),l=n("../packages/components/dist/esm/button/index.js"),u=n("./components/empty-content/index.jsx"),d=n("./lib/gsuite/index.js"),p=n("./components/data/query-site-domains/index.jsx"),m=n("./my-sites/domains/paths.js"),h=n("./my-sites/email/paths.js"),f=n("./state/selectors/get-primary-domain-by-site-id.js"),b=n("./state/sites/selectors/get-site-slug.js"),y=n("./state/analytics/actions/record.js"),_=(n("./my-sites/domains/domain-management/list/domain-only.scss"),function(e){var t=e.primaryDomain,n=e.hasNotice,s=e.recordTracks,a=e.siteId,i=e.slug,o=e.translate;if(!t)return c.a.createElement("div",null,c.a.createElement(p.a,{siteId:a}),c.a.createElement(u.a,{className:"domain-only-site__placeholder",illustration:"/calypso/images/drake/drake-browser.svg"}));var r=t.name,f=Object(d.j)(t);return c.a.createElement("div",null,c.a.createElement(u.a,{title:o("%(domainName)s is ready when you are.",{args:{domainName:r}}),line:o("Start a site now to unlock everything WordPress.com can offer."),action:o("Create site"),actionURL:"/start/site-selected/?siteSlug=".concat(encodeURIComponent(i),"&siteId=").concat(encodeURIComponent(a)),secondaryAction:o("Manage domain"),secondaryActionURL:Object(m.g)(i,r),illustration:"/calypso/images/drake/drake-browser.svg"},c.a.createElement(l.a,{className:"empty-content__action button",href:Object(h.a)(i,r),primary:!f,onClick:function(){s(f?"calypso_domain_only_gsuite_manage":"calypso_domain_only_gsuite_cta",{domain:r})}},o(f?"Manage email":"Add email"))),n&&c.a.createElement("div",{className:"domain-only-site__settings-notice"},o("Your domain should start working immediately, but may be unreliable during the first 30 minutes.")))});_.propTypes={primaryDomain:o.a.object,hasNotice:o.a.bool.isRequired,translate:o.a.func.isRequired,siteId:o.a.number.isRequired},t.a=Object(s.c)((function(e,t){return{slug:Object(b.a)(e,t.siteId),primaryDomain:Object(f.a)(e,t.siteId)}}),{recordTracks:y.e})(Object(a.c)(_))},"./my-sites/domains/domain-management/list/domain-only.scss":function(e,t,n){},"./my-sites/email/paths.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c}));var s=n("../node_modules/lodash-es/startsWith.js");function a(e,t){return t?l(e,t,"gsuite/add-users"):"/email/gsuite/add-users/"+e}function i(e,t){return t?l(e,t,"add-gsuite-users"):"/email/add-gsuite-users/"+e}function o(e,t,n){return l(e,t,"gsuite/new/"+n)}function r(e,t){return t?l(e,t,"manage"):e?"/email/"+e:"/email"}function c(e,t){return l(e,t,"forwarding")}function l(e,t,n){return n=n||"manage",Object(s.a)(t,":")||(t=encodeURIComponent(encodeURIComponent(t))),"/email/"+t+"/"+n+"/"+e}},"./my-sites/sites/style.scss":function(e,t,n){},"./state/analytics/actions/compose-analytics.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("./state/action-types.js"),a=n("../node_modules/lodash-es/flatMap.js"),i=n("../node_modules/lodash-es/property.js");function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:s.y,meta:{analytics:Object(a.a)(t,Object(i.a)("meta.analytics"))}}}},"./state/selectors/get-primary-domain-by-site-id.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("./state/sites/domains/selectors.js");function a(e,t){var n=Object(s.c)(e,t);return 0===n.length?null:n.filter((function(e){return e.isPrimary}))[0]}},"./state/selectors/get-site-id.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("./state/sites/selectors/get-site.js");function a(e,t){if(!t)return null;var n=Object(s.a)(e,t);return n?n.ID:null}},"./state/sites/domains/actions.js":function(e,t,n){"use strict";n.d(t,"d",(function(){return D})),n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return R})),n.d(t,"f",(function(){return B})),n.d(t,"b",(function(){return L})),n.d(t,"e",(function(){return A}));var s=n("../node_modules/debug/src/browser.js"),a=n.n(s),i=n("../node_modules/lodash-es/map.js"),o=n("../node_modules/lodash-es/noop.js"),r=n("../packages/i18n-calypso/dist/esm/index.js");var c=n("./lib/domains/constants.js");function l(e){switch(e.gdpr_consent_status){case"NONE":return c.e.NONE;case"PENDING":return c.e.PENDING;case"PENDING_ASYNC":return c.e.PENDING_ASYNC;case"ACCEPTED_CONTRACTUAL_MINIMUM":return c.e.ACCEPTED_CONTRACTUAL_MINIMUM;case"ACCEPTED_FULL":return c.e.ACCEPTED_FULL;case"DENIED":return c.e.DENIED;case"FORCED_ALL_CONTRACTUAL":return c.e.FORCED_ALL_CONTRACTUAL;default:return null}}function u(e){return"redirect"===e.type?c.i.SITE_REDIRECT:"transfer"===e.type?c.i.TRANSFER:e.wpcom_domain?c.i.WPCOM:e.has_registration?c.i.REGISTERED:c.i.MAPPED}function d(e){return"pending_owner"===e.transfer_status?c.h.PENDING_OWNER:"pending_registry"===e.transfer_status?c.h.PENDING_REGISTRY:"cancelled"===e.transfer_status?c.h.CANCELLED:"completed"===e.transfer_status?c.h.COMPLETED:"pending_start"===e.transfer_status?c.h.PENDING_START:null}var p=n("../node_modules/lodash-es/mapKeys.js"),m=n("../node_modules/lodash-es/camelCase.js");function h(e){if(e)return Object(p.a)(e,(function(e,t){return Object(m.default)(t)}))}var f,b=function(e){var t,n,s=null;return e.transfer_start_date&&((s=new Date(e.transfer_start_date)).setDate(s.getDate()+7),s=s.toIsoString()),{autoRenewalDate:String(e.auto_renewal_date),adminEmail:e.admin_email,autoRenewing:Boolean(e.auto_renewing),blogId:Number(e.blog_id),bundledPlanSubscriptionId:e.bundled_plan_subscription_id,canSetAsPrimary:Boolean(e.can_set_as_primary),contactInfoDisclosureAvailable:Boolean(e.contact_info_disclosure_available),contactInfoDisclosed:Boolean(e.contact_info_disclosed),currentUserCanManage:Boolean(e.current_user_can_manage),domain:String(e.domain),domainLockingAvailable:Boolean(e.domain_locking_available),domainRegistrationAgreementUrl:(t=e,null!==(n=null==t?void 0:t.domain_registration_agreement_url)&&void 0!==n?n:null),emailForwardsCount:Number(e.email_forwards_count),expired:Boolean(e.expired),expiry:e.expiry?String(e.expiry):null,expirySoon:Boolean(e.expiry_soon),gdprConsentStatus:l(e),googleAppsSubscription:h(e.google_apps_subscription),hasRegistration:Boolean(e.has_registration),hasWpcomNameservers:e.has_wpcom_nameservers,hasZone:Boolean(e.has_zone),isLocked:Boolean(e.is_locked),isRenewable:Boolean(e.is_renewable),isRedeemable:Boolean(e.is_redeemable),isEligibleForInboundTransfer:Boolean(e.is_eligible_for_inbound_transfer),isAutoRenewing:Boolean(e.auto_renewing),isPendingIcannVerification:Boolean(e.is_pending_icann_verification),isPrimary:Boolean(e.primary_domain),isPendingWhoisUpdate:Boolean(e.pending_whois_update),isSubdomain:Boolean(e.is_subdomain),isWPCOMDomain:Boolean(e.wpcom_domain),isWpcomStagingDomain:Boolean(e.is_wpcom_staging_domain),manualTransferRequired:Boolean(e.manual_transfer_required),mustRemovePrivacyBeforeContactUpdate:Boolean(e.must_remove_privacy_before_contact_update),newRegistration:Boolean(e.new_registration),name:String(e.domain),owner:String(e.owner),partnerDomain:Boolean(e.partner_domain),pendingRegistration:Boolean(e.pending_registration),pendingRegistrationTime:String(e.pending_registration_time),pendingTransfer:e.pending_transfer,pointsToWpcom:Boolean(e.points_to_wpcom),privateDomain:e.private_domain,privacyAvailable:Boolean(e.privacy_available),registrar:String(e.registrar),registrationDate:String(e.registration_date),renewableUntil:String(e.renewable_until),redeemableUntil:String(e.redeemable_until),sslStatus:e.ssl_status?String(e.ssl_status):null,subscriptionId:e.subscription_id,supportsDomainConnect:Boolean(e.supports_domain_connect),supportsGdprConsentManagement:Boolean(e.supports_gdpr_consent_management),supportsTransferApproval:Boolean(e.supports_transfer_approval),tldMaintenanceEndTime:e.tld_maintenance_end_time,transferAwayEligibleAt:e.transfer_away_eligible_at?String(e.transfer_away_eligible_at):null,transferLockOnWhoisUpdateOptional:Boolean(e.transfer_lock_on_whois_update_optional),type:u(e),transferStatus:d(e),transferStartDate:e.transfer_start_date?String(e.transfer_start_date):null,transferEndDate:s,whoisUpdateUnmodifiableFields:e.whois_update_unmodifiable_fields}},y=n("./lib/wp/browser.js"),_=n("./state/action-types.js"),j=n("./state/sites/actions.js"),g=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(g),O=n("../node_modules/lodash-es/get.js"),S=n("./state/data-layer/wpcom-http/actions.js"),k=n("./state/data-layer/wpcom-http/utils.js"),x=n("./state/data-layer/handler-registry.js"),E=n("./state/notices/actions.js"),w=function(e){return function(t){return Object(S.a)({apiVersion:"1",method:"POST",path:"/domains/"+t.domain+"/privacy/"+e},t)}},C=function(e){return function(t){var n=t.siteId,s=t.domain,a=function(e){switch(e){case _.kd:return Object(r.f)("Privacy has been successfully disabled!");case _.nd:return Object(r.f)("Yay, privacy has been successfully enabled!");case _.Pc:return Object(r.f)("Your contact information is now publicly visible!");case _.Sc:return Object(r.f)("Your contact information is now redacted!");default:return""}}(e);return[{type:e,siteId:n,domain:s},Object(E.f)(a,{duration:5e3})]}},I=function(e){return function(t,n){var s=t.siteId,a=t.domain,i=Object(O.a)(n,"message",Object(r.f)("Unknown error when updating the domain privacy settings"));return[{type:e,siteId:s,domain:a},Object(E.b)(i,{duration:2e4,id:"domain-privacy-settings-save-failure-notice",isPersistent:!0,href:"https://wordpress.com/help/contact",button:Object(r.f)("Get Help"),showDismiss:!1})]}};Object(x.b)("state/data-layer/wpcom/domains/privacy/index.js",(f={},v()(f,_.ld,[Object(k.a)({fetch:w("enable"),onSuccess:C(_.nd),onError:I(_.md)})]),v()(f,_.id,[Object(k.a)({fetch:w("disable"),onSuccess:C(_.kd),onError:I(_.jd)})]),v()(f,_.Nc,[Object(k.a)({fetch:w("disclose"),onSuccess:C(_.Pc),onError:I(_.Oc)})]),v()(f,_.Qc,[Object(k.a)({fetch:w("redact"),onSuccess:C(_.Sc),onError:I(_.Rc)})]),f));var N=a()("calypso:state:sites:domains:actions"),P=y.a.undocumented();function D(e){return function(t){return t(function(e){var t={type:_.qq,siteId:e};return N("returning action: %o",t),t}(e)),P.site(e).domains().then((function(n){var s=n.domains,a=void 0===s?[]:s;t(function(e){var t={type:_.sq,siteId:e};return N("returning action: %o",t),t}(e)),t(function(e,t){var n={type:_.pq,siteId:e,domains:Object(i.a)(t,b)};return N("returning action: %o",n),n}(e,a))})).catch((function(n){var s=n instanceof Error?n.message:Object(r.f)("There was a problem fetching site domains. Please try again later or contact support.");t(function(e,t){var n={type:_.rq,siteId:e,error:t};return N("returning action: %o",n),n}(e,s))}))}}function T(e,t){return{type:_.ld,siteId:e,domain:t}}function R(e,t){return{type:_.id,siteId:e,domain:t}}var B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a;return function(s){return N("setPrimaryDomain",e,t),P.setPrimaryDomain(e,t,(function(t,a){return t?n(t,a):s(D(e)).then((function(){n(null,a),s(Object(j.e)(e))}))}))}};function L(e,t){return{type:_.Nc,siteId:e,domain:t}}function A(e,t){return{type:_.Qc,siteId:e,domain:t}}},"./state/sites/domains/selectors.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return l}));var s=Object.freeze([]),a=function(e,t){return t&&e.sites.domains.items[t]||s},i=function(e){return e.sites.domains.items},o=function(e,t){var n,s,a;return Boolean(null==e||null===(n=e.sites)||void 0===n||null===(s=n.domains)||void 0===s||null===(a=s.items)||void 0===a?void 0:a[t])},r=function(e,t){return e.sites.domains.requesting[t]||!1},c=function(e){return e.sites.domains.requesting},l=function(e,t,n){var s,a,i,o;return null==e||null===(s=e.sites)||void 0===s||null===(a=s.domains)||void 0===a||null===(i=a.updatingPrivacy)||void 0===i||null===(o=i[t])||void 0===o?void 0:o[n]}},"./state/sites/selectors/is-jetpack-module-active.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("../node_modules/lodash-es/includes.js"),a=n("./state/sites/selectors/get-site-option.js");function i(e,t,n){var i=Object(a.a)(e,t,"active_modules");return i?Object(s.a)(i,n):null}}}]);