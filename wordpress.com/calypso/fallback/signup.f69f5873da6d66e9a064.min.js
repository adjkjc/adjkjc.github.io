(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{"../node_modules/email-validator/index.js":function(e,t,s){"use strict";var n=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;t.validate=function(e){if(!e)return!1;if(e.length>254)return!1;if(!n.test(e))return!1;var t=e.split("@");return!(t[0].length>64)&&!t[1].split(".").some((function(e){return e.length>63}))}},"../node_modules/immutability-helper/index.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("../node_modules/invariant/browser.js"),i=Object.prototype.hasOwnProperty,o=Array.prototype.splice,r=Object.prototype.toString;function a(e){return r.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return u(t).forEach((function(s){i.call(t,s)&&(e[s]=t[s])})),e},u="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function l(e){return Array.isArray(e)?c(e.constructor(e.length),e):"Map"===a(e)?new Map(e):"Set"===a(e)?new Set(e):e&&"object"==typeof e?c(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=c({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var s=this,o="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(o)||n(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),n("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var r=e;return u(o).forEach((function(t){if(i.call(s.commands,t)){var n=e===r;r=s.commands[t](o[t],r,o,e),n&&s.isEquals(r,e)&&(r=e)}else{var c="Map"===a(e)?s.update(e.get(t),o[t]):s.update(e[t],o[t]),u="Map"===a(r)?r.get(t):r[t];s.isEquals(c,u)&&(void 0!==c||i.call(e,t))||(r===e&&(r=l(e)),"Map"===a(r)?r.set(t,c):r[t]=c)}})),r},e}();t.Context=p;var d={$push:function(e,t,s){return g(t,s,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,s){return g(t,s,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,s,i){return function(e,t){n(Array.isArray(e),"Expected $splice target to be an array; got %s",e),h(t.$splice)}(t,s),e.forEach((function(e){h(e),t===i&&e.length&&(t=l(i)),o.apply(t,e)})),t},$set:function(e,t,s){return function(e){n(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(s),e},$toggle:function(e,t){f(e,"$toggle");var s=e.length?l(t):t;return e.forEach((function(e){s[e]=!t[e]})),s},$unset:function(e,t,s,n){return f(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=l(n)),delete t[e])})),t},$add:function(e,t,s,n){return j(t,"$add"),f(e,"$add"),"Map"===a(t)?e.forEach((function(e){var s=e[0],i=e[1];t===n&&t.get(s)!==i&&(t=l(n)),t.set(s,i)})):e.forEach((function(e){t!==n||t.has(e)||(t=l(n)),t.add(e)})),t},$remove:function(e,t,s,n){return j(t,"$remove"),f(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=l(n)),t.delete(e)})),t},$merge:function(e,t,s,i){var o,r;return o=t,n((r=e)&&"object"==typeof r,"update(): $merge expects a spec of type 'object'; got %s",r),n(o&&"object"==typeof o,"update(): $merge expects a target of type 'object'; got %s",o),u(e).forEach((function(s){e[s]!==t[s]&&(t===i&&(t=l(i)),t[s]=e[s])})),t},$apply:function(e,t){var s;return n("function"==typeof(s=e),"update(): expected spec of $apply to be a function; got %s.",s),e(t)}},m=new p;function g(e,t,s){n(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",s,e),f(t[s],s)}function f(e,t){n(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function h(e){n(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function j(e,t){var s=a(e);n("Map"===s||"Set"===s,"update(): %s expects a target of type Set or Map; got %s",t,s)}t.isEquals=m.update.isEquals,t.extend=m.extend,t.default=m.update,t.default.default=e.exports=c(t.default,t)},"../node_modules/invariant/browser.js":function(e,t,s){"use strict";e.exports=function(e,t,s,n,i,o,r,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[s,n,i,o,r,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},"../node_modules/lodash-es/_baseExtremum.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/isSymbol.js");t.a=function(e,t,s){for(var i=-1,o=e.length;++i<o;){var r=e[i],a=t(r);if(null!=a&&(void 0===c?a==a&&!Object(n.a)(a):s(a,c)))var c=a,u=r}return u}},"../node_modules/lodash-es/_baseGt.js":function(e,t,s){"use strict";t.a=function(e,t){return e>t}},"../node_modules/lodash-es/_createInverter.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseForOwn.js");var i=function(e,t,s,i){return Object(n.a)(e,(function(e,n,o){t(i,s(e),n,o)})),i};t.a=function(e,t){return function(s,n){return i(s,e,t(n),{})}}},"../node_modules/lodash-es/assignIn.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_copyObject.js"),i=s("../node_modules/lodash-es/_createAssigner.js"),o=s("../node_modules/lodash-es/keysIn.js"),r=Object(i.a)((function(e,t){Object(n.a)(t,Object(o.a)(t),e)}));t.a=r},"../node_modules/lodash-es/differenceWith.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseDifference.js"),i=s("../node_modules/lodash-es/_baseFlatten.js"),o=s("../node_modules/lodash-es/_baseRest.js"),r=s("../node_modules/lodash-es/isArrayLikeObject.js"),a=s("../node_modules/lodash-es/last.js"),c=Object(o.a)((function(e,t){var s=Object(a.a)(t);return Object(r.a)(s)&&(s=void 0),Object(r.a)(e)?Object(n.a)(e,Object(i.a)(t,1,r.a,!0),void 0,s):[]}));t.a=c},"../node_modules/lodash-es/drop.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseSlice.js"),i=s("../node_modules/lodash-es/toInteger.js");t.a=function(e,t,s){var o=null==e?0:e.length;return o?(t=s||void 0===t?1:Object(i.a)(t),Object(n.a)(e,t<0?0:t,o)):[]}},"../node_modules/lodash-es/flowRight.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_createFlow.js"),i=Object(n.a)(!0);t.a=i},"../node_modules/lodash-es/forOwn.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseForOwn.js"),i=s("../node_modules/lodash-es/_castFunction.js");t.a=function(e,t){return e&&Object(n.a)(e,Object(i.a)(t))}},"../node_modules/lodash-es/groupBy.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseAssignValue.js"),i=s("../node_modules/lodash-es/_createAggregator.js"),o=Object.prototype.hasOwnProperty,r=Object(i.a)((function(e,t,s){o.call(e,s)?e[s].push(t):Object(n.a)(e,s,[t])}));t.a=r},"../node_modules/lodash-es/invert.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/constant.js"),i=s("../node_modules/lodash-es/_createInverter.js"),o=s("../node_modules/lodash-es/identity.js"),r=Object.prototype.toString,a=Object(i.a)((function(e,t,s){null!=t&&"function"!=typeof t.toString&&(t=r.call(t)),e[t]=s}),Object(n.a)(o.a));t.a=a},"../node_modules/lodash-es/isNull.js":function(e,t,s){"use strict";t.a=function(e){return null===e}},"../node_modules/lodash-es/join.js":function(e,t,s){"use strict";var n=Array.prototype.join;t.a=function(e,t){return null==e?"":n.call(e,t)}},"../node_modules/lodash-es/max.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseExtremum.js"),i=s("../node_modules/lodash-es/_baseGt.js"),o=s("../node_modules/lodash-es/identity.js");t.a=function(e){return e&&e.length?Object(n.a)(e,o.a,i.a):void 0}},"../node_modules/lodash-es/split.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseToString.js"),i=s("../node_modules/lodash-es/_castSlice.js"),o=s("../node_modules/lodash-es/_hasUnicode.js"),r=s("../node_modules/lodash-es/_isIterateeCall.js"),a=s("../node_modules/lodash-es/isRegExp.js"),c=s("../node_modules/lodash-es/_stringToArray.js"),u=s("../node_modules/lodash-es/toString.js");t.a=function(e,t,s){return s&&"number"!=typeof s&&Object(r.a)(e,t,s)&&(t=s=void 0),(s=void 0===s?4294967295:s>>>0)?(e=Object(u.a)(e))&&("string"==typeof t||null!=t&&!Object(a.a)(t))&&!(t=Object(n.a)(t))&&Object(o.a)(e)?Object(i.a)(Object(c.a)(e),0,s):e.split(t,s):[]}},"../node_modules/lodash-es/uniq.js":function(e,t,s){"use strict";var n=s("../node_modules/lodash-es/_baseUniq.js");t.a=function(e){return e&&e.length?Object(n.a)(e):[]}},"./components/data/query-site-domains/index.jsx":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("../node_modules/prop-types/index.js"),i=s.n(n),o=s("../node_modules/react/index.js"),r=s("../node_modules/react-redux/es/index.js"),a=s("./state/sites/domains/selectors.js"),c=s("./state/sites/domains/actions.js");function u(e){var t=e.siteId,s=Object(r.d)();return Object(o.useEffect)((function(){s(function(e){return function(t,s){e&&!Object(a.e)(s(),e)&&t(Object(c.d)(e))}}(t))}),[s,t]),null}u.propTypes={siteId:i.a.number.isRequired}},"./components/data/query-verticals/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=s.n(n),o=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(o),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),p=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(p),m=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),g=s.n(m),f=s("../node_modules/react/index.js"),h=s("../node_modules/react-redux/es/index.js"),j=s("../node_modules/lodash-es/debounce.js"),b=s("../node_modules/prop-types/index.js"),y=s.n(b),v=s("./state/action-types.js"),x=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),w=s.n(x),_=s("../packages/i18n-calypso/dist/esm/index.js"),O=s("./state/data-layer/handler-registry.js"),S=s("./state/data-layer/wpcom-http/utils.js"),N=s("./state/data-layer/wpcom-http/actions.js"),k=s("./state/data-layer/utils.js"),E=s("./state/notices/actions.js"),T=s("./state/signup/steps/site-type/selectors.js"),P=s("./state/signup/flow/selectors.js"),C=Object(S.a)({fetch:function(e){return Object(N.a)({apiNamespace:"wpcom/v2",method:"GET",path:"/verticals",query:w()({search:e.search.trim()},e.siteTypeId&&{site_type:e.siteTypeId},{limit:e.limit,include_preview:!0,allow_synonyms:!0})},e)},onSuccess:function(e,t){var s=e.search,n=e.siteType;return I(s,void 0===n?"":n,t)},onError:function(){return Object(E.b)(Object(_.f)("We encountered an error on fetching data from our server. Please try again."))},fromApi:k.b});Object(O.b)("state/data-layer/wpcom/signup/verticals",g()({},v.Ep,[function(e,t){return C(e,w()({},t,{siteTypeId:Object(T.b)(e.getState(),t.siteType),flowName:Object(P.a)(e.getState())}))}]));s("./state/signup/init.js");var I=function(e,t,s){return{type:v.Fp,search:e,siteType:t,verticals:s}},D=s("./state/signup/verticals/selectors.js"),F=function(e){l()(s,e);var t=d()(s);function s(){var e;i()(this,s);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),g()(c()(e),"bindDebouncedRequest",(function(){var t=e.props,s=t.debounceTime,n=t.debounceFunc;return s>0?n(e.props.requestVerticals,e.props.debounceTime):e.props.requestVerticals})),e}return r()(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.searchTerm,s=void 0===t?"":t,n=e.siteType,i=e.limit,o=e.isFetched,r=s.trim();this.debouncedRequest=this.bindDebouncedRequest(),!o&&r&&this.debouncedRequest(r,n,i)}},{key:"componentDidUpdate",value:function(e){var t=this.props,s=t.isFetched,n=t.searchTerm,i=t.siteType,o=t.limit,r=t.debounceTime,a=n.trim();e.debounceTime!==r&&(this.debouncedRequest=this.bindDebouncedRequest()),!s&&a&&this.debouncedRequest(a,i,o)}},{key:"render",value:function(){return null}}]),s}(f.Component);g()(F,"propTypes",{isFetched:y.a.bool,searchTerm:y.a.string,siteType:y.a.string,limit:y.a.number,debounceTime:y.a.number,debounceFunc:y.a.func}),g()(F,"defaultProps",{isFetched:!1,limit:7,searchTerm:"",siteType:"",debounceTime:0,debounceFunc:j.a});t.a=Object(h.c)((function(e,t){return{isFetched:null!==Object(D.a)(e,t.searchTerm,t.siteType)}}),{requestVerticals:function(e,t,s){return{type:v.Ep,search:e,siteType:t,limit:s}}})(F)},"./components/locale-suggestions/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js"),i=s.n(n),o=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(o),a=s("../node_modules/@babel/runtime/helpers/createClass.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=s.n(u),p=s("../node_modules/@babel/runtime/helpers/inherits.js"),d=s.n(p),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),g=s.n(m),f=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),h=s.n(f),j=s("../node_modules/prop-types/index.js"),b=s.n(j),y=s("../node_modules/react/index.js"),v=s.n(y),x=s("../node_modules/react-redux/es/index.js"),w=s("../packages/i18n-calypso/dist/esm/index.js"),_=s("../node_modules/lodash-es/startsWith.js"),O=s("./lib/i18n-utils/browser.js"),S=s("../node_modules/lodash-es/assign.js"),N=function(e){d()(s,e);var t=g()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),h()(l()(e),"handleLocaleSuggestionClick",(function(t){var s=e.props,n=s.locale,i=s.onLocaleSuggestionClick,o=s.path;e.hasLocaleDirectionChanged(n)&&(t.preventDefault(),window.location=o),i&&i()})),e}return c()(s,[{key:"hasLocaleDirectionChanged",value:function(e){var t=Object(S.a)({},Object(O.c)(e.locale)),s=Object(S.a)({},Object(O.c)(Object(w.b)()));return t.rtl!==s.rtl}},{key:"render",value:function(){var e=this.props,t=e.locale,s=e.path;return v.a.createElement("div",{className:"locale-suggestions__list-item",dir:"auto"},t.availability_text,v.a.createElement("a",{href:s,onClick:this.handleLocaleSuggestionClick,className:"locale-suggestions__locale-link"},t.name))}}]),s}(y.Component);h()(N,"propTypes",{locale:b.a.object.isRequired,onLocaleSuggestionClick:b.a.func,path:b.a.string.isRequired});var k=N,E=s("../node_modules/lodash-es/get.js");function T(e){return Object(E.a)(e,"i18n.localeSuggestions",null)}var P=s("./state/action-types.js"),C=s("../node_modules/lodash-es/noop.js"),I=s("./state/data-layer/wpcom-http/actions.js"),D=s("./state/data-layer/wpcom-http/utils.js"),F=s("./state/data-layer/handler-registry.js"),A=Object(D.a)({fetch:function(e){return Object(I.a)({apiVersion:"1.1",method:"GET",path:"/locale-guess"},e)},onSuccess:function(e,t){return R(t)},onError:C.a});Object(F.b)("state/data-layer/wpcom/locale-guess/index.js",h()({},P.ng,[A]));var R=function(e){return{type:P.mg,items:e}},q=function(e){d()(s,e);var t=g()(s);function s(){return r()(this,s),t.apply(this,arguments)}return c()(s,[{key:"componentDidMount",value:function(){this.props.localeSuggestions||this.props.requestLocaleSuggestions()}},{key:"render",value:function(){return null}}]),s}(y.Component);h()(q,"propTypes",{localeSuggestions:b.a.array,requestLocaleSuggestions:b.a.func}),h()(q,"defaultProps",{requestLocaleSuggestions:function(){}});var L=Object(x.c)((function(e){return{localeSuggestions:T(e)}}),{requestLocaleSuggestions:function(){return{type:P.ng}}})(q),z=s("./components/notice/index.jsx"),U=s("./state/ui/language/actions.js"),$=(s("./components/locale-suggestions/style.scss"),function(e){d()(s,e);var t=g()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),h()(l()(e),"state",{dismissed:!1}),h()(l()(e),"dismiss",(function(){return e.setState({dismissed:!0})})),h()(l()(e),"getPathWithLocale",(function(t){return Object(O.a)(e.props.path,t)})),e}return c()(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.locale;if(!e&&"object"==typeof navigator&&"languages"in navigator){var t,s=i()(navigator.languages);try{for(s.s();!(t=s.n()).done;){var n=t.value,o=Object(O.c)(n.toLowerCase());if(o){e=o.langSlug;break}}}catch(e){s.e(e)}finally{s.f()}}this.props.setLocale(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.locale!==e.locale&&this.props.setLocale(e.locale)}},{key:"render",value:function(){var e=this;if(this.state.dismissed)return null;var t=this.props.localeSuggestions;if(!t)return v.a.createElement(L,null);var s=t.filter((function(e){return!Object(_.a)(Object(w.b)(),e.locale)}));if(0===s.length)return null;var n=s.map((function(t){return v.a.createElement(k,{key:"locale-"+t.locale,locale:t,onLocaleSuggestionClick:e.dismiss,path:e.getPathWithLocale(t.locale)})}));return v.a.createElement("div",{className:"locale-suggestions"},v.a.createElement(z.a,{icon:"globe",showDismiss:!0,onDismissClick:this.dismiss},v.a.createElement("div",{className:"locale-suggestions__list"},n)))}}]),s}(y.Component));h()($,"propTypes",{locale:b.a.string,path:b.a.string.isRequired,localeSuggestions:b.a.array}),h()($,"defaultProps",{locale:"",localeSuggestions:[]});t.a=Object(x.c)((function(e){return{localeSuggestions:T(e)}}),{setLocale:U.a})($)},"./components/locale-suggestions/style.scss":function(e,t,s){},"./components/notice/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=s.n(n),o=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(o),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),p=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(p),m=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),g=s.n(m),f=s("../node_modules/prop-types/index.js"),h=s.n(f),j=s("../node_modules/react/index.js"),b=s.n(j),y=s("../node_modules/classnames/index.js"),v=s.n(y),x=s("../node_modules/lodash-es/noop.js"),w=s("../packages/i18n-calypso/dist/esm/index.js"),_=s("./components/gridicon/index.tsx"),O=(s("./components/notice/style.scss"),["add","cross-circle","ellipsis-circle","help","info","notice","pause","play","spam"]),S=function(e){l()(s,e);var t=d()(s);function s(){var e;i()(this,s);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),g()(c()(e),"dismissTimeout",null),e}return r()(s,[{key:"componentDidMount",value:function(){this.props.duration>0&&(this.dismissTimeout=setTimeout(this.props.onDismissClick,this.props.duration))}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.dismissTimeout),this.props.duration>0&&(this.dismissTimeout=setTimeout(this.props.onDismissClick,this.props.duration))}},{key:"getIcon",value:function(){var e;switch(this.props.status){case"is-info":e="info";break;case"is-success":e="checkmark";break;case"is-error":case"is-warning":e="notice";break;default:e="info"}return e}},{key:"render",value:function(){var e=this.props,t=e.children,s=e.className,n=e.icon,i=e.isCompact,o=e.isLoading,r=e.onDismissClick,a=e.showDismiss,c=void 0===a?!i:a,u=e.status,l=e.text,p=e.translate,d=v()("notice",u,s,{"is-compact":i,"is-loading":o,"is-dismissable":c}),m=n||this.getIcon(),g=O.includes(m);return b.a.createElement("div",{className:d},b.a.createElement("span",{className:"notice__icon-wrapper"},g&&b.a.createElement("span",{className:"notice__icon-wrapper-drop"}),b.a.createElement(_.a,{className:"notice__icon",icon:m,size:24})),b.a.createElement("span",{className:"notice__content"},b.a.createElement("span",{className:"notice__text"},l||t)),l?t:null,c&&b.a.createElement("button",{className:"notice__dismiss",onClick:r,"aria-label":p("Dismiss")},b.a.createElement(_.a,{icon:"cross",size:24})))}}]),s}(j.Component);g()(S,"defaultProps",{className:"",duration:0,icon:null,isCompact:!1,isLoading:!1,onDismissClick:x.a,status:null,text:null}),g()(S,"propTypes",{className:h.a.string,duration:h.a.number,icon:h.a.string,isCompact:h.a.bool,isLoading:h.a.bool,onDismissClick:h.a.func,showDismiss:h.a.bool,status:h.a.oneOf(["is-error","is-info","is-success","is-warning","is-plain"]),text:h.a.oneOfType([h.a.arrayOf(h.a.oneOfType([h.a.string,h.a.node])),h.a.oneOfType([h.a.string,h.a.node])]),translate:h.a.func.isRequired}),t.a=Object(w.c)(S)},"./components/notice/style.scss":function(e,t,s){},"./components/signup-site-preview/utils.js":function(e,t,s){"use strict";function n(){var e=window.navigator.userAgent;return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function i(e){return e?'<link type="text/css" media="all" rel="stylesheet" href="'.concat(e,'" />'):""}s.d(t,"d",(function(){return n})),s.d(t,"e",(function(){return r})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return u}));var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="theme"+(t?"-rtl.css":".css");return e.replace("style.css",s)};function r(e){URL.revokeObjectURL(e)}function a(e,t,s,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"en",u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l='\n\t\t<html lang="'.concat(c,'" dir="').concat(a?"rtl":"ltr",'">\n\t\t<head>\n\t\t\t<meta charset="UTF-8">\n\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t\t\t<link rel="dns-prefetch" href="//s0.wp.com">\n\t\t\t<link rel="dns-prefetch" href="//fonts.googleapis.com">\n\t\t\t<title></title>\n\t\t\t').concat(i(r),"\n\t\t\t").concat(i(o(r,a)),"\n\t\t\t").concat(i(t),"\n\t\t\t").concat(i(s),'\n\t\t\t<style type="text/css">\n\t\t\t\tbody {\n\t\t\t\t\tpadding-bottom: 50px;\n\t\t\t\t}\n\n\t\t\t\t* {\n\t\t\t\t\tcursor: default;\n\t\t\t\t}\n\n\t\t\t\t.no-scrolling {\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\n\t\t\t\t.is-loading {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tbackground: white;\n\t\t\t\t}\n\t\t\t\t.is-loading .site {\n\t\t\t\t\topacity: 0;\n\t\t\t\t}\n\n\t\t\t\t.site {\n\t\t\t\t\topacity: 1;\n\t\t\t\t\ttransition: opacity 1s ease-in;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tSome of the themes (business sophisticated) use js to dynamically set the height of the banner\n\t\t\t\t\tLet\'s set a fixed max-height.\n\t\t\t\t*/\n\t\t\t\t.entry .entry-content .wp-block-cover-image,\n\t\t\t\t.entry .entry-content .wp-block-cover {\n\t\t\t\t\theight: 480px !important;\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tFixes a weird bug in Safari, despite the markup and CSS\n\t\t\t\t\tbeing the same, the gallery images for the default Professional site (m4)\n\t\t\t\t\tare stretched. Issue #33758.\n\t\t\t\t\tThis should be a temp fix until we can either locate the problem or\n\t\t\t\t\twe update the theme CSS.\n\t\t\t\t*/\n\t\t\t\t.wp-block-gallery .blocks-gallery-image figure,\n\t\t\t\t.wp-block-gallery .blocks-gallery-item figure {\n\t\t\t\t   flex-direction: column;\n\t\t\t\t   height: auto;\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tOverride for post list items\n\t\t\t\t*/\n\t\t\t\t.a8c-posts-list__item article > * {\n\t\t\t\t\tmargin-top: 16px;\n\t\t\t\t\tmargin-bottom: 16px;\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t\tOverride for subscribe button\n\t\t\t\t*/\n\t\t\t\t.wp-block-jetpack-subscriptions span.button {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t}\n\n\t\t\t\t.is-loading .wp-block-cover,\n\t\t\t\t.is-loading img {\n\t\t\t\t\tanimation: loading-animation 1.5s infinite;\n\t\t\t\t\tbackground-color: rgba( 0, 0, 0, 0.1 ) !important;\n\t\t\t\t}\n\n\t\t\t\t@keyframes loading-animation {\n\t\t\t\t\t0%   { background-color: rgba( 0, 0, 0, 0.7 ); }\n\t\t\t\t\t50%  { background-color: rgba( 0, 0, 0, 1 ); }\n\t\t\t\t\t100% { background-color: rgba( 0, 0, 0, 0.7 ); }\n\t\t\t\t}\n\t\t\t</style>\n\t\t</head>\n\t\t<body class="home page-template-default page logged-in is-loading ').concat(u?"":"no-scrolling",'">\n\t\t\t<div id="page" class="site">\n\t\t\t\t<header id="masthead" class="site-header">\n\t\t\t\t\t<div class="site-branding-container">\n\t\t\t\t\t\t<div class="site-branding">\n\t\t\t\t\t\t\t<p class="site-title">\n\t\t\t\t\t\t\t\t<a href="#" class="signup-site-preview__title"></a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div id="content" class="site-content">\n\t\t\t\t\t<section id="primary" class="content-area">\n\t\t\t\t\t\t<main id="main" class="site-main">\n\t\t\t\t\t\t\t<article class="page type-page status-publish hentry entry">\n\t\t\t\t\t\t\t\t<div class="entry-content">\n\t\t\t\t\t\t\t\t\t').concat(e.body,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</body>\n\t</html>");return n()?l:URL.createObjectURL(new Blob([l],{type:"text/html"}))}function c(e){return"signup-site-preview__".concat(e)}function u(e,t){return"".concat(e," – ").concat(t)}},"./lib/cart/actions.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return l})),s.d(t,"b",(function(){return p})),s.d(t,"c",(function(){return d})),s.d(t,"i",(function(){return m})),s.d(t,"h",(function(){return g})),s.d(t,"j",(function(){return f})),s.d(t,"a",(function(){return h})),s.d(t,"d",(function(){return j})),s.d(t,"g",(function(){return b})),s.d(t,"f",(function(){return y})),s.d(t,"k",(function(){return v})),s.d(t,"l",(function(){return x}));var n=s("../node_modules/lodash-es/assign.js"),i=s("../node_modules/debug/src/browser.js"),o=s.n(i),r=s("./lib/cart/action-types.js"),a=s("./dispatcher/index.js"),c=s("./lib/analytics/utils/marketing-coupons-key.js"),u=(s("./lib/cart/store/index.js"),o()("calypso:signup:cart"));function l(){a.a.handleViewAction({type:r.c})}function p(e){d([e])}function d(e){var t=e.map((function(e){var t=Object(n.a)({},e.extra,{context:"calypstore"});return Object(n.a)({},e,{extra:t})}));a.a.handleViewAction({type:r.e,cartItems:t})}function m(e){var t=e.map((function(e){var t=Object(n.a)({},e.extra,{context:"calypstore"});return Object(n.a)({},e,{extra:t})}));a.a.handleViewAction({type:r.f,cartItems:t})}function g(e,t){a.a.handleViewAction({type:r.g,cartItem:e,domainsWithPlansOnly:t})}function f(e,t){a.a.handleViewAction({type:r.h,oldItem:e,newItem:t})}function h(e){a.a.handleViewAction({type:r.d,registrationData:e})}function j(e){a.a.handleViewAction({type:r.a,coupon:e})}function b(){a.a.handleViewAction({type:r.b})}function y(){var e=localStorage.getItem(c.a),t=JSON.parse(e);if(!t)return u("No coupons found in localStorage: ",t),null;var s=Date.now();u("Found coupons in localStorage: ",t);var n=0,i=null;return Object.keys(t).forEach((function(e){s>t[e]+2592e6?delete t[e]:t[e]>n&&(i=e,n=t[e])})),u("Storing coupons in localStorage: ",t),localStorage.setItem(c.a,JSON.stringify(t)),["ALT","FBSAVE15","FIVERR","GENEA","KITVISA","LINKEDIN","PATREON","ROCKETLAWYER","RBC","SAFE","SBDC","TXAM"].includes(-1!==i.indexOf("_")?i.substring(0,i.indexOf("_")):i)?(u("returning coupon code:",i),i):(u("not returning any coupon code."),null)}function v(e){a.a.handleViewAction({type:r.k,countryCode:e})}function x(e){a.a.handleViewAction({type:r.l,postalCode:e})}},"./signup/flow-progress-indicator/style.scss":function(e,t,s){},"./signup/index.web.js":function(e,t,s){"use strict";s.r(t);var n=s("../node_modules/page/page.js"),i=s.n(n),o=s("../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),r=s.n(o),a=s("../node_modules/react/index.js"),c=s.n(a),u=s("../node_modules/lodash-es/isEmpty.js"),l=s("./config/index.js"),p=s("./lib/route/path.ts"),d=s("./lib/analytics/page-view.js"),m=s("../node_modules/@babel/runtime/helpers/extends.js"),g=s.n(m),f=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),h=s.n(f),j=s("../node_modules/@babel/runtime/helpers/createClass.js"),b=s.n(j),y=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),v=s.n(y),x=s("../node_modules/@babel/runtime/helpers/inherits.js"),w=s.n(x),_=s("../node_modules/@babel/runtime/helpers/createSuper.js"),O=s.n(_),S=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),N=s.n(S),k=s("../node_modules/debug/src/browser.js"),E=s.n(k),T=s("../node_modules/prop-types/index.js"),P=s.n(T),C=s("../node_modules/lodash-es/clone.js"),I=s("../node_modules/lodash-es/map.js"),D=s("../node_modules/lodash-es/includes.js"),F=s("../node_modules/lodash-es/startsWith.js"),A=s("../node_modules/lodash-es/indexOf.js"),R=s("../node_modules/lodash-es/get.js"),q=s("../node_modules/lodash-es/pick.js"),L=s("../node_modules/lodash-es/isEqual.js"),z=s("../node_modules/lodash-es/defer.js"),U=s("../node_modules/lodash-es/find.js"),$=s("../node_modules/lodash-es/assign.js"),B=s("../node_modules/lodash-es/kebabCase.js"),M=s("../node_modules/react-redux/es/index.js"),V=s("./lib/oauth-token/index.js"),W=s("./lib/products-values/index.js"),G=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),H=s.n(G),Y=s("../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js"),J=s.n(Y),Q=s("../node_modules/lodash-es/difference.js"),Z=s("../node_modules/lodash-es/keys.js"),K=s("../node_modules/lodash-es/forEach.js"),X=s("../node_modules/lodash-es/flatMap.js"),ee=s("../node_modules/lodash-es/filter.js"),te=s("../node_modules/lodash-es/reject.js"),se=s("../node_modules/lodash-es/reduce.js"),ne=s("./lib/analytics/tracks.js"),ie=s("./signup/config/flows.js"),oe=s("./signup/config/steps.js"),re=s("./lib/wp/browser.js"),ae=s("./signup/utils.js"),ce=s("./state/current-user/selectors.js"),ue=s("./state/signup/progress/selectors.ts"),le=s("./state/signup/dependency-store/selectors.js"),pe=s("./state/action-types.js");s("./state/signup/init.js");function de(e){return{type:pe.mp,dependencies:e}}var me=s("./state/signup/progress/actions.js"),ge=oe.a;var fe=function(){function e(t){h()(this,e),N()(this,"_flow",void 0),N()(this,"_flowName",void 0),N()(this,"_onComplete",void 0),N()(this,"_processingSteps",new Set),N()(this,"_reduxStore",void 0),N()(this,"_unsubscribeStore",void 0),this._flow=ie.a.getFlow(t.flowName),this._flowName=t.flowName,this._onComplete=t.onComplete,this._reduxStore=t.reduxStore,this.changeFlowName(t.flowName);try{this._assertFlowHasValidDependencies()}catch(e){if(this._flowName!==ie.a.defaultFlowName)return void i()(Object(ae.o)());throw e}var s,n,o;if(this._unsubscribeStore=this._reduxStore.subscribe((s=this._reduxStore,n=this._process.bind(this),o=Object(ue.a)(s.getState()),function(){var e=Object(ue.a)(s.getState());e!==o&&(o=e,n(e))})),this._resetStoresIfProcessing(),this._resetStoresIfUserHasLoggedIn(),this._flow.providesDependenciesInQuery)this._assertFlowProvidedDependenciesFromConfig(t.providedDependencies),this._reduxStore.dispatch(de(t.providedDependencies));else{var r=this._getStoredDependencies();Object(u.a)(r)||this._reduxStore.dispatch(de(r))}}return b()(e,[{key:"_resetStoresIfProcessing",value:function(){Object(U.a)(Object(ue.a)(this._reduxStore.getState()),{status:"processing"})&&this.reset()}},{key:"_resetStoresIfUserHasLoggedIn",value:function(){Object(ce.n)(this._reduxStore.getState())&&Object(U.a)(Object(ue.a)(this._reduxStore.getState()),{stepName:"user"})&&this.reset()}},{key:"_assertFlowProvidedDependenciesFromConfig",value:function(e){var t=Object(Q.a)(this._flow.providesDependenciesInQuery,Object(Z.a)(e));if(t.length>0)throw new Error(this._flowName+" did not provide the query dependencies ["+t+"] it is configured to.")}},{key:"_assertFlowHasValidDependencies",value:function(){var e=this;Object(K.a)(Object(q.a)(ge,this._flow.steps),(function(t){if(t.dependencies){var s=Object(Z.a)(Object(q.a)(Object(le.a)(e._reduxStore.getState()),t.dependencies)),n=Object(Q.a)(t.dependencies,s,e._getFlowProvidesDependencies());if(n.length>0)throw new Error("The "+t.stepName+" step requires dependencies ["+n+"] which are not provided in the "+e._flowName+" flow and are not already present in the store.")}}))}},{key:"_assertFlowProvidedRequiredDependencies",value:function(){var e=this,t=Object(Z.a)(Object(le.a)(this._reduxStore.getState()));Object(K.a)(Object(q.a)(ge,this._flow.steps),(function(s){if(s.providesDependencies){var n=s.optionalDependencies||[],i=Object(Q.a)(s.providesDependencies,n,t);if(i.length>0)throw new Error("The dependencies ["+i+"] were listed as provided by the "+s.stepName+" step but were not provided by it [ current flow: "+e._flowName+" ].")}}))}},{key:"_canMakeAuthenticatedRequests",value:function(){return re.a.isTokenLoaded()||Object(ce.n)(this._reduxStore.getState())}},{key:"_getFlowProvidesDependencies",value:function(){return Object(X.a)(this._flow.steps,(function(e){return ge&&ge[e]&&ge[e].providesDependencies||[]})).concat(this._flow.providesDependenciesInQuery||[])}},{key:"_process",value:function(){var e=this,t=this._flow.steps,s=Object(ee.a)(Object(ue.a)(this._reduxStore.getState()),(function(e){return Object(D.a)(t,e.stepName)})),n=Object(ee.a)(s,{status:"pending"}),i=Object(ee.a)(s,{status:"completed"}),o=Object(le.a)(this._reduxStore.getState());o.bearer_token&&!re.a.isTokenLoaded()&&re.a.loadToken(o.bearer_token);var r,a=J()(n);try{for(a.s();!(r=a.n()).done;){var c=r.value;this._processStep(c)}}catch(e){a.e(e)}finally{a.f()}i.length===t.length&&void 0!==this._onComplete&&(this._assertFlowProvidedRequiredDependencies(),Object(z.a)((function(){return e._onComplete(o,e._destination(o))})))}},{key:"_canProcessStep",value:function(e){var t=ge[e.stepName].providesToken,s=Object(R.a)(ge,[e.stepName,"dependencies"],[]),n=Object(q.a)(Object(le.a)(this._reduxStore.getState()),s),i=s.length===Object(Z.a)(n).length,o=this._flow.steps,r=Object(ee.a)(Object(ue.a)(this._reduxStore.getState()),(function(e){var t=e.stepName;return Object(D.a)(o,t)})),a=Object(te.a)(r,{status:"in-progress"}).length===o.length;return i&&(t||this._canMakeAuthenticatedRequests())&&(!ge[e.stepName].delayApiRequestUntilComplete||a)}},{key:"_processStep",value:function(e){var t=this;if(!this._processingSteps.has(e.stepName)&&this._canProcessStep(e)){this._processingSteps.add(e.stepName);var s=Object(R.a)(ge,[e.stepName,"dependencies"],[]),n=Object(q.a)(Object(le.a)(this._reduxStore.getState()),s);if(Object(R.a)(e,"isPasswordlessSignupForm"))return this._processingSteps.delete(e.stepName),Object(ne.recordTracksEvent)("calypso_signup_actions_complete_step",{step:e.stepName}),void this._reduxStore.dispatch(Object(me.a)(e,n));Object(z.a)((function(){t._reduxStore.dispatch(Object(me.c)(e))}));var i=ge[e.stepName].apiRequestFunction;i&&i((function(s,n){t._processingSteps.delete(e.stepName),s?t._reduxStore.dispatch(Object(me.b)(e,s)):(Object(ne.recordTracksEvent)("calypso_signup_actions_complete_step",{step:e.stepName,flow:t._flowName}),t._reduxStore.dispatch(Object(me.a)(e,n)))}),n,e,this._reduxStore)}}},{key:"_destination",value:function(e){return"function"==typeof this._flow.destination?this._flow.destination(e):this._flow.destination}},{key:"_getStoredDependencies",value:function(){var e=Object(X.a)(this._flow.steps,(function(e){return ge&&ge[e]&&ge[e].providesDependencies||[]}));return Object(se.a)(Object(ue.a)(this._reduxStore.getState()),(function(t,s){return H()({},t,{},Object(q.a)(s.providedDependencies,e))}),{})}},{key:"reset",value:function(){this._reduxStore.dispatch({type:pe.kp})}},{key:"cleanup",value:function(){this._unsubscribeStore&&this._unsubscribeStore()}},{key:"changeFlowName",value:function(e){ie.a.resetExcludedSteps(),this._flowName=e,this._flow=ie.a.getFlow(e)}}]),e}(),he=s("./lib/cart/actions.js"),je=s("./lib/analytics/signup.js"),be=s("./components/data/document-head/index.jsx"),ye=s("./components/locale-suggestions/index.jsx"),ve=s("../packages/i18n-calypso/dist/esm/index.js"),xe=s("./components/gridicon/index.tsx"),we=(s("./signup/processing-screen/style.scss"),function(e){w()(s,e);var t=O()(s);function s(){return h()(this,s),t.apply(this,arguments)}return b()(s,[{key:"renderFloaties",value:function(){return c.a.createElement("div",{className:"signup-processing-screen__floaties"},c.a.createElement(xe.a,{icon:"add",size:64}),c.a.createElement(xe.a,{icon:"aside",size:64}),c.a.createElement(xe.a,{icon:"attachment",size:64}),c.a.createElement(xe.a,{icon:"audio",size:64}),c.a.createElement(xe.a,{icon:"bell",size:64}),c.a.createElement(xe.a,{icon:"book",size:64}),c.a.createElement(xe.a,{icon:"camera",size:64}),c.a.createElement(xe.a,{icon:"comment",size:64}),c.a.createElement(xe.a,{icon:"globe",size:64}),c.a.createElement(xe.a,{icon:"pencil",size:64}),c.a.createElement(xe.a,{icon:"phone",size:64}),c.a.createElement(xe.a,{icon:"reader",size:64}),c.a.createElement(xe.a,{icon:"star",size:64}),c.a.createElement(xe.a,{icon:"video",size:64}),c.a.createElement(xe.a,{icon:"align-image-right",size:64}),c.a.createElement(xe.a,{icon:"bookmark",size:64}),c.a.createElement(xe.a,{icon:"briefcase",size:64}),c.a.createElement(xe.a,{icon:"calendar",size:64}),c.a.createElement(xe.a,{icon:"clipboard",size:64}),c.a.createElement(xe.a,{icon:"cloud-upload",size:64}),c.a.createElement(xe.a,{icon:"cog",size:64}),c.a.createElement(xe.a,{icon:"customize",size:64}),c.a.createElement(xe.a,{icon:"help",size:64}),c.a.createElement(xe.a,{icon:"link",size:64}),c.a.createElement(xe.a,{icon:"lock",size:64}),c.a.createElement(xe.a,{icon:"pages",size:64}),c.a.createElement(xe.a,{icon:"share",size:64}),c.a.createElement(xe.a,{icon:"stats",size:64}))}},{key:"getTitle",value:function(){return this.props.translate("{{strong}}Hooray!{{/strong}} Your site will be ready shortly.",{components:{strong:c.a.createElement("strong",null),br:c.a.createElement("br",null)},comment:"The second line after the breaking tag {{br/}} should fit unbroken in 384px and greater and have a max of 30 characters."})}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderFloaties(),c.a.createElement("div",{className:"signup-processing-screen__content"},c.a.createElement("p",{className:"signup-processing-screen__title"},this.getTitle())))}}]),s}(a.Component)),_e=Object(ve.c)(we),Oe=s("../node_modules/classnames/index.js"),Se=s.n(Oe),Ne=s("./components/wordpress-logo/index.jsx"),ke=(s("./signup/flow-progress-indicator/style.scss"),Object(ve.c)((function(e){var t=e.flowLength,s=e.positionInFlow,n=e.translate,i=e.flowName;if(t>1){var o=Se()("flow-progress-indicator","flow-progress-indicator__".concat(i));return c.a.createElement("div",{className:o},n("Step %(stepNumber)d of %(stepTotal)d",{args:{stepNumber:s+1,stepTotal:t}}))}return null}))),Ee=(s("./signup/signup-header/style.scss"),function(e){w()(s,e);var t=O()(s);function s(e){return h()(this,s),t.call(this,e)}return b()(s,[{key:"render",value:function(){var e=Se()({"wordpress-logo":!0,"is-large":this.props.shouldShowLoadingScreen});return c.a.createElement("div",{className:"signup-header"},c.a.createElement(Ne.a,{size:120,className:e}),c.a.createElement("div",{className:"signup-header__left"}),c.a.createElement("div",{className:"signup-header__right"},!this.props.shouldShowLoadingScreen&&this.props.showProgressIndicator&&c.a.createElement(ke,{positionInFlow:this.props.positionInFlow,flowLength:this.props.flowLength,flowName:this.props.flowName})))}}]),s}(a.Component));N()(Ee,"propTypes",{flowLength:P.a.number,positionInFlow:P.a.number,flowName:P.a.string,showProgressIndicator:P.a.bool,shouldShowLoadingScreen:P.a.bool});var Te=s("./components/data/query-site-domains/index.jsx"),Pe=s("./state/analytics/actions/index.js"),Ce=s("./state/current-user/constants.js");function Ie(e,t,s,n){var i=Object(ce.e)(e);if(!i)return null;var o=((t=t||Date.now())-new Date(i))/864e5;return o>=s&&o<=n}var De=s("./state/signup/steps/survey/actions.js"),Fe=s("./state/signup/steps/site-type/actions.js"),Ae=s("./state/signup/steps/site-vertical/actions.js"),Re=s("./state/selectors/get-site-id.js"),qe=s("./state/sites/selectors/is-current-plan-paid.js"),Le=s("./state/sites/selectors/get-site-plan-slug.js"),ze=s("./state/sites/domains/selectors.js"),Ue=s("./state/signup/steps/site-type/selectors.js"),$e=s("./state/selectors/is-domain-only-site.js"),Be=s("./state/signup/preview/selectors.js"),Me=s("./state/signup/preview/actions.js"),Ve={about:"about","clone-start":"clone-start","clone-destination":"clone-destination","clone-credentials":"clone-credentials","clone-point":"clone-point","clone-jetpack":"clone-jetpack","clone-ready":"clone-ready","clone-cloning":"clone-cloning","creds-confirm":"creds-confirm","creds-complete":"creds-complete","creds-permission":"creds-permission",domains:"domains","domains-store":"domains","domain-only":"domains","domains-theme-preselected":"domains","domains-launch":"domains","from-url":"import-url","import-preview":"import-preview","import-url":"import-url-onboarding",launch:"launch-site",plans:"plans","plans-business":"plans","plans-ecommerce":"plans","plans-import":"plans","plans-launch":"plans","plans-plan-only":"plans","plans-personal":"plans","plans-premium":"plans","plans-site-selected":"plans","plans-with-domain":"plans","plans-store-nux":"plans-atomic-store",site:"site","rebrand-cities-welcome":"rebrand-cities-welcome","rewind-migrate":"rewind-migrate","rewind-were-backing":"rewind-were-backing","rewind-form-creds":"rewind-form-creds","site-or-domain":"site-or-domain","site-picker":"site-picker","site-style":"site-style","site-title":"site-title","site-title-without-domains":"site-title","site-topic":"site-topic","site-topic-with-theme":"site-topic","site-type":"site-type","site-type-with-theme":"site-type",survey:"survey","survey-user":"survey-user",test:"test-step",themes:"theme-selection","themes-site-selected":"theme-selection","template-first-themes":"theme-selection","fse-themes":"theme-selection",user:"user","oauth2-user":"user","oauth2-name":"user",displayname:"user","reader-landing":"reader-landing","site-style-with-preview":"site-style","site-topic-with-preview":"site-topic","domains-with-preview":"domains","site-title-with-preview":"site-title",passwordless:"passwordless","team-site":"wp-for-teams-site","upsell-plan":"upsell"};function We(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=r()(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ve[t],e.next=3,s("./signup/steps lazy recursive ^\\.\\/.*$ include: signup\\/steps\\/[a-z-]+\\/index.jsx$")("./".concat(n));case 3:return i=e.sent,e.abrupt("return",i.default);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He=s("./signup/wpcom-login-form/index.jsx"),Ye=s("../node_modules/lodash-es/debounce.js"),Je=s("./components/async-load/index.jsx"),Qe=function(e){s.e(424).then(s.bind(null,"./components/signup-site-preview/component.jsx")).then((function(t){e(t.default)}))},Ze=function(e){return c.a.createElement(Je.a,g()({},e,{require:Qe,placeholder:null}))},Ke=s("./components/signup-site-preview/utils.js"),Xe=s("./state/signup/steps/site-vertical/selectors.js"),et=s("./state/signup/steps/site-style/selectors.js"),tt=function(e,t){return"https://s0.wp.com/wp-content/themes/".concat(e,"/style").concat(t?"-rtl":"",".css")},st=s("./state/analytics/actions/record.js"),nt=s("./lib/i18n-utils/browser.js"),it=s("./state/signup/steps/site-title/selectors.js"),ot=s("./lib/signup/site-type.js"),rt=s("./components/data/query-verticals/index.jsx");s("./signup/site-mockup/style.scss");function at(e){var t=e.siteType,s=Object(ot.b)("slug",t,"siteMockupHelpTipCopy")||"";return c.a.createElement("div",{className:"site-mockup__help-tip"},c.a.createElement("p",null,s),c.a.createElement(xe.a,{icon:"chevron-down"}))}function ct(e){var t=e.siteType,s=Object(ot.b)("slug",t,"siteMockupHelpTipCopyBottom")||"";return c.a.createElement("div",{className:"site-mockup__help-tip"},c.a.createElement(xe.a,{icon:"chevron-up"}),c.a.createElement("p",null,s))}var ut=function(e){w()(s,e);var t=O()(s);function s(){var e;h()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),N()(v()(e),"updateDebounced",Object(Ye.a)((function(){e.forceUpdate(),(e.props.verticalPreviewContent||e.props.verticalPreviewScreenshot)&&e.props.recordTracksEvent("calypso_signup_site_preview_mockup_rendered",{site_type:e.props.siteType,vertical_slug:e.props.verticalSlug,site_style:e.props.siteStyle||"default"})}),777)),N()(v()(e),"handlePreviewClick",(function(t){return e.props.recordTracksEvent("calypso_signup_site_preview_mockup_clicked",{size:t,vertical_slug:e.props.verticalSlug,site_style:e.props.siteStyle||"default"})})),e}return b()(s,[{key:"shouldComponentUpdate",value:function(e){return e.verticalPreviewContent===this.props.verticalPreviewContent&&e.verticalPreviewScreenshot===this.props.verticalPreviewScreenshot||(this.updateDebounced(),!1)}},{key:"getContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?e:Object.keys(this.getPreviewParams()).reduce((function(e,t){return e.replace(new RegExp("{{"+t+"}}","gi"),'<span class="'.concat(Object(Ke.c)(t),'"></span>'))}),e)}},{key:"getPreviewParams",value:function(){var e=this.props,t=e.title,s=e.siteVerticalName;return{CompanyName:t,Address:Object(ve.f)("Your Address"),Phone:Object(ve.f)("Your Phone Number"),Vertical:s||""}}},{key:"render",value:function(){var e=this.props,t=e.fontUrl,s=e.shouldFetchVerticalData,n=e.shouldShowHelpTip,i=e.siteStyle,o=e.siteType,r=e.siteVerticalName,a=e.title,l=e.themeSlug,p=e.verticalPreviewContent,d=e.verticalPreviewScreenshot,m=e.verticalPreviewStyles,f=Se()("site-mockup__wrap",{"is-empty":Object(u.a)(p)&&!d}),h=Object(nt.g)(),j=Object(nt.c)(h),b=j&&j.rtl,y={fontUrl:t,cssUrl:tt(l,b),content:{title:a,tagline:Object(ve.f)("You’ll be able to customize this to your needs."),body:this.getContent(p),params:this.getPreviewParams()},gutenbergStylesUrl:m,langSlug:h,isRtl:b,onPreviewClick:this.handlePreviewClick,className:i};return c.a.createElement("div",{className:f},n&&c.a.createElement(at,{siteType:o}),c.a.createElement("div",{className:"site-mockup__devices"},c.a.createElement(Ze,g()({defaultViewportDevice:"desktop",resize:!0,scrolling:!1},y)),c.a.createElement(Ze,g()({defaultViewportDevice:"phone"},y))),n&&c.a.createElement(ct,{siteType:o}),s&&c.a.createElement(rt.a,{searchTerm:r,siteType:o}))}}]),s}(a.Component);N()(ut,"propTypes",{siteStyle:P.a.string,siteType:P.a.string,stepName:P.a.string,title:P.a.string,vertical:P.a.string,verticalPreviewContent:P.a.string,verticalPreviewScreenshot:P.a.string,verticalPreviewStyles:P.a.string}),N()(ut,"defaultProps",{siteStyle:"",siteType:"",stepName:"",title:"",vertical:"",verticalPreviewContent:"",verticalPreviewStyles:""});var lt=Object(M.c)((function(e,t){var s=Object(et.a)(e),n=Object(Ue.a)(e),i=Object(ot.b)("slug",n,"theme"),o=Object(ot.b)("slug",n,"siteMockupTitleFallback"),r=Object(Xe.e)(e),a=!r;return{title:Object(it.a)(e)||o,siteStyle:s,siteType:n,verticalPreviewContent:r,verticalPreviewScreenshot:Object(Xe.f)(e,"desktop"),verticalPreviewStyles:Object(Xe.g)(e),siteVerticalName:Object(Xe.c)(e),verticalSlug:Object(Xe.h)(e),shouldShowHelpTip:"site-topic-with-preview"===t.stepName||"site-title-with-preview"===t.stepName,themeSlug:i,fontUrl:"https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,500,700",shouldFetchVerticalData:a}}),{recordTracksEvent:st.e})(ut),pt=(s("./signup/style.scss"),E()("calypso:signup"));function dt(e){return!(!e||!(e.cartItem||e.domainItem||e.themeItem))}var mt=function(e){w()(s,e);var t=O()(s);function s(){var e;h()(this,s);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),N()(v()(e),"state",{controllerHasReset:!1,shouldShowLoadingScreen:!1,resumingStep:void 0,previousFlowName:null}),N()(v()(e),"handleSignupFlowControllerCompletion",(function(t,s){var n=Object(ae.e)(s,t,e.props.flowName);return s!==n&&Object(ae.r)(s),e.handleFlowComplete(t,n)})),N()(v()(e),"updateShouldShowLoadingScreen",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.progress,s=!!Object(ae.g)(e.props.flowName,t),n=!s&&e.isEveryStepSubmitted(t),i=n&&!e.state.shouldShowLoadingScreen;e.isEveryStepSubmitted(t)||e.goToFirstInvalidStep(t),i&&e.setState({shouldShowLoadingScreen:!0}),s&&e.setState({shouldShowLoadingScreen:!1})})),N()(v()(e),"processFulfilledSteps",(function(e,t){var s=oe.a[e].fulfilledStepCallback,n=oe.a[e].defaultDependencies;s&&s(e,n,t)})),N()(v()(e),"removeFulfilledSteps",(function(t){var s=t.flowName,n=t.stepName,i=ie.a.getFlow(s).steps,o=Object(C.a)(ie.a.excludedSteps);Object(I.a)(o,(function(s){return e.processFulfilledSteps(s,t)})),Object(I.a)(i,(function(s){return e.processFulfilledSteps(s,t)})),Object(D.a)(ie.a.excludedSteps,n)&&e.goToNextStep(s)})),N()(v()(e),"handleFlowComplete",(function(t,s){pt("The flow is completed. Destination: %s",s);var n=e.props,i=n.isNewishUser,o=n.existingSiteCount,r=!(!t||!t.username),a=t&&t.siteId,c=!!(r||i&&t&&t.siteSlug&&o<=1),u=dt(t),l={isNewishUser:i,existingSiteCount:o,isNewUser:r,hasCartItems:u,isNew7DUserSite:c,flow:e.props.flowName,siteId:a};pt("Tracking signup completion.",l),Object(je.recordSignupComplete)({flow:e.props.flowName,siteId:a,isNewUser:r,hasCartItems:u,isNew7DUserSite:c}),e.handleLogin(t,s)})),N()(v()(e),"loginRedirectTo",(function(e){var t;return Object(F.a)(e,"https://")||Object(F.a)(e,"http://")?e:(t=window.location.protocol+"//"+window.location.hostname,window.location.port&&(t+=":"+window.location.port),t+e)})),N()(v()(e),"goToStep",(function(t,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.flowName;if(!e.state.scrolling){var o=new Promise((function(t){e.setState({scrolling:!0});var s=window.performance.now(),n=window.pageYOffset;window.requestAnimationFrame((function i(o){var r=o-s;r<200?(window.scrollTo(0,n-n*r/200),window.requestAnimationFrame(i)):(e.setState({scrolling:!1}),t())}))}));o.then((function(){e.isEveryStepSubmitted()?e.isEveryStepSubmitted()&&e.goToFirstInvalidStep():i()(Object(ae.o)(n,t,s,e.props.locale))}))}})),N()(v()(e),"goToNextStep",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.flowName,s=ie.a.getFlow(t).steps,n=Object(A.a)(s,e.props.stepName),i=s[n+1],o=Object(R.a)(e.props.progress,i),r=o&&o.stepSectionName||"";t!==e.props.flowName&&e.setState({previousFlowName:e.props.flowName}),e.goToStep(i,r,t)})),N()(v()(e),"goToFirstInvalidStep",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.progress,s=Object(ae.g)(e.props.flowName,t);if(s){if(Object(je.recordSignupInvalidStep)(e.props.flowName,e.props.stepName),s.stepName===e.props.stepName)return void pt("Already navigated to the first invalid step: ".concat(s.stepName));pt("Navigating to the first invalid step: ".concat(s.stepName)),i()(Object(ae.o)(e.props.flowName,s.stepName,e.props.locale))}})),N()(v()(e),"isEveryStepSubmitted",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.progress,s=ie.a.getFlow(e.props.flowName).steps,n=Object(ae.c)(e.props.flowName,t);return s.length===n.length})),e}return b()(s,[{key:"UNSAFE_componentWillMount",value:function(){Object(he.e)();var e,t=ie.a.getFlow(this.props.flowName),s=this.props.initialContext&&this.props.initialContext.query||{};if(t.providesDependenciesInQuery&&(e=Object(q.a)(s,t.providesDependenciesInQuery)),this.signupFlowController=new fe({flowName:this.props.flowName,providedDependencies:e,reduxStore:this.props.store,onComplete:this.handleSignupFlowControllerCompletion}),this.removeFulfilledSteps(this.props),this.updateShouldShowLoadingScreen(),!Object(ae.a)(this.props.flowName,this.props.progress)&&0!==this.getPositionInFlow()){var n=ie.a.getFlow(this.props.flowName).steps[0];return this.setState({resumingStep:n}),i.a.redirect(Object(ae.o)(this.props.flowName,n,this.props.locale))}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.stepName,s=e.flowName,n=e.progress;this.props.stepName!==t&&this.removeFulfilledSteps(e),t===this.state.resumingStep&&this.setState({resumingStep:void 0}),this.props.flowName!==s&&this.signupFlowController.changeFlowName(s),this.state.controllerHasReset||Object(L.a)(this.props.progress,n)||this.updateShouldShowLoadingScreen(n)}},{key:"componentWillUnmount",value:function(){this.signupFlowController.cleanup()}},{key:"componentDidMount",value:function(){pt("Signup component mounted"),this.startTrackingForBusinessSite(),Object(je.recordSignupStart)(this.props.flowName,this.props.refParameter),Object(je.recordSignupStep)(this.props.flowName,this.props.stepName),this.preloadNextStep(),this.maybeShowSitePreview()}},{key:"componentDidUpdate",value:function(e){this.props.flowName===e.flowName&&this.props.stepName===e.stepName||Object(je.recordSignupStep)(this.props.flowName,this.props.stepName),Object(R.a)(this.props.signupDependencies,"siteType")!==Object(R.a)(e.signupDependencies,"siteType")&&this.startTrackingForBusinessSite(),this.props.stepName!==e.stepName&&(this.maybeShowSitePreview(),this.preloadNextStep())}},{key:"maybeShowSitePreview",value:function(){this.props.shouldStepShowSitePreview&&!this.props.stepSectionName?this.props.showSitePreview():this.props.hideSitePreview()}},{key:"startTrackingForBusinessSite",value:function(){"business"===Object(R.a)(this.props.signupDependencies,"siteType")&&this.props.loadTrackingTool("HotJar")}},{key:"preloadNextStep",value:function(){var e=this.props.stepName,t=ie.a.getNextStepNameInFlow(this.props.flowName,e);t&&We(t)}},{key:"handleLogin",value:function(e,t){var s=this.props.isLoggedIn;if(pt('Logging you in to "'.concat(t,'"')),this.signupFlowController.reset(),this.state.controllerHasReset||this.setState({controllerHasReset:!0}),s){if(/^https?:\/\//.test(t))return window.location.href=t;Object(z.a)((function(){pt('Redirecting you to "'.concat(t,'"')),window.location.href=t}))}if(!s&&(l.a.isEnabled("oauth")||e.oauth2_client_id))return pt("Handling oauth login"),V.b(e.bearer_token),void(window.location.href=t);if(!s&&!l.a.isEnabled("oauth")){pt("Handling regular login");var n=e.bearer_token,i=e.username;this.state.bearerToken!==n&&this.state.username!==i&&this.setState({bearerToken:e.bearer_token,username:e.username,redirectTo:this.loginRedirectTo(t)})}}},{key:"getPositionInFlow",value:function(){var e=this.props,t=e.flowName,s=e.stepName;return Object(A.a)(ie.a.getFlow(t).steps,s)}},{key:"getFlowLength",value:function(){return ie.a.getFlow(this.props.flowName).steps.length}},{key:"renderCurrentStep",value:function(){var e=Object(R.a)(this.props,"signupDependencies.domainItem",!1),t=Object(U.a)(this.props.progress,{stepName:this.props.stepName}),s=this.props.stepComponent,n=Object($.a)({},this.props,oe.a[this.props.stepName].props),i=this.state.shouldShowLoadingScreen?"processing":this.props.stepName,o=ie.a.getFlow(this.props.flowName),r=this.props.domainsWithPlansOnly&&e&&(Object(W.v)(e)||Object(W.w)(e)||Object(W.s)(e)),a=Object(R.a)(this.props,"signupDependencies.shouldHideFreePlan",!1),u=r||this.props.isDomainOnlySite||a,l=0===this.getPositionInFlow()&&!this.props.isLoggedIn;return c.a.createElement("div",{className:"signup__step",key:i},c.a.createElement("div",{className:"signup__step is-".concat(Object(B.a)(this.props.stepName))},l&&c.a.createElement(ye.a,{path:this.props.path,locale:this.props.locale}),this.state.shouldShowLoadingScreen?c.a.createElement(_e,null):c.a.createElement(s,g()({path:this.props.path,step:t,initialContext:this.props.initialContext,steps:o.steps,stepName:this.props.stepName,meta:o.meta||{},goToNextStep:this.goToNextStep,goToStep:this.goToStep,previousFlowName:this.state.previousFlowName,flowName:this.props.flowName,signupDependencies:this.props.signupDependencies,stepSectionName:this.props.stepSectionName,positionInFlow:this.getPositionInFlow(),hideFreePlan:u},n))))}},{key:"shouldWaitToRender",value:function(){var e=!Object(D.a)(ie.a.getFlow(this.props.flowName).steps,this.props.stepName),t=this.props.isLoggedIn&&this.props.signupDependencies.siteSlug&&0===this.props.siteDomains.length;return!!e||(t?c.a.createElement(Te.a,{siteId:this.props.siteId}):void 0)}},{key:"render",value:function(){if(!this.props.stepName||this.getPositionInFlow()>0&&0===this.props.progress.length||this.state.resumingStep)return null;var e=this.shouldWaitToRender();if(e&&!this.state.shouldShowLoadingScreen)return this.props.siteId&&e;var t="pressable-nux"!==this.props.flowName;return c.a.createElement("div",{className:"signup is-".concat(Object(B.a)(this.props.flowName))},c.a.createElement(be.a,{title:this.props.pageTitle}),c.a.createElement(Ee,{positionInFlow:this.getPositionInFlow(),flowLength:this.getFlowLength(),flowName:this.props.flowName,showProgressIndicator:t,shouldShowLoadingScreen:this.state.shouldShowLoadingScreen}),c.a.createElement("div",{className:"signup__steps"},this.renderCurrentStep()),!this.state.shouldShowLoadingScreen&&this.props.isSitePreviewVisible&&c.a.createElement(lt,{stepName:this.props.stepName}),this.state.bearerToken&&c.a.createElement(He.a,{authorization:"Bearer "+this.state.bearerToken,log:this.state.username,redirectTo:this.state.redirectTo}))}}]),s}(c.a.Component);N()(mt,"propTypes",{store:P.a.object.isRequired,domainsWithPlansOnly:P.a.bool,isLoggedIn:P.a.bool,loadTrackingTool:P.a.func.isRequired,setSurvey:P.a.func.isRequired,submitSiteType:P.a.func.isRequired,submitSiteVertical:P.a.func.isRequired,submitSignupStep:P.a.func.isRequired,signupDependencies:P.a.object,siteDomains:P.a.array,isPaidPlan:P.a.bool,flowName:P.a.string,stepName:P.a.string,pageTitle:P.a.string,siteType:P.a.string,stepSectionName:P.a.string,shouldShowMockups:P.a.bool});var gt=Object(M.c)((function(e,t){var s=Object(le.a)(e),n=Object(Re.a)(e,s.siteSlug),i=Object(ze.c)(e,n),o=Object(R.a)(oe.a[t.stepName],"props.showSiteMockups",!1);return{domainsWithPlansOnly:!Object(ce.b)(e)||Object(ce.a)(e,Ce.d),isDomainOnlySite:Object($e.a)(e,n),progress:Object(ue.a)(e),signupDependencies:s,isLoggedIn:Object(ce.n)(e),isNewishUser:Ie(e,null,0,7),existingSiteCount:Object(ce.k)(e),isPaidPlan:Object(qe.a)(e,n),sitePlanSlug:Object(Le.a)(e,n),siteDomains:i,siteId:n,siteType:Object(Ue.a)(e),shouldStepShowSitePreview:o,isSitePreviewVisible:o&&Object(Be.a)(e)}}),{setSurvey:De.a,submitSiteType:Fe.a,submitSiteVertical:Ae.b,submitSignupStep:me.f,removeStep:me.d,loadTrackingTool:Pe.b,showSitePreview:Me.b,hideSitePreview:Me.a})(mt),ft=s("./state/ui/layout-focus/actions.js"),ht=s("../node_modules/store/dist/store.modern.js"),jt=s.n(ht);function bt(e){return{type:pe.lp,flowName:e}}var yt,vt=s("./state/signup/flow/selectors.js"),xt=s("./lib/paths/index.js"),wt=s("./state/data-layer/http-data.ts"),_t=s("./state/data-getters/index.js"),Ot=s("./lib/abtest/index.js"),St=function(){document.body.className=document.body.className.split("is-white-signup").join("")},Nt=function(e,t){e.pathname.indexOf("new-launch")>=0?t():e.pathname.indexOf("domain")>=0||e.pathname.indexOf("plan")>=0||e.pathname.indexOf("wpcc")>=0||e.pathname.indexOf("launch-site")>=0||"user"===e.params.flowName||"account"===e.params.flowName?(St(),t()):Object(wt.j)({geo:function(){return Object(_t.j)()}}).then((function(e){var s=e.geo.data.body.country_short;"gutenberg"===Object(Ot.a)("newSiteGutenbergOnboarding",s)?window.location.replace(window.location.origin+"/new"+window.location.search):(St(),t())})).catch((function(){St(),t()}))},kt=function(e,t){if(Object(ce.n)(e.store.getState())&&e.params.lang){var s=Object(ae.h)(e.params),n=Object(ae.m)(e.params),o=Object(ae.n)(e.params),r=Object(ae.o)(s,n,o);return l.a.isEnabled("wpcom-user-bootstrap")?i.a.redirect(r):(Object(u.a)(e.query)||(r+="?"+e.querystring),Object(u.a)(e.hash)||(r+="#"+e.hashstring),void(window.location=r))}t()},Et=function(e,t){yt||(yt=Object.assign({},e)),t()},Tt=function(e,t){var s=Object(ae.h)(e.params),n=e.params.lang,o=jt.a.get("signup-locale"),r=Object(ce.n)(e.store.getState()),a=Object(ue.a)(e.store.getState());if("user"===e.params.flowName){var c=Object(vt.a)(e.store.getState());if(c&&c!==s&&Object(ae.a)(c,a))return void(window.location=Object(ae.o)(c,Object(ae.m)(e.params),Object(ae.n)(e.params),o)+(e.querystring?"?"+e.querystring:"")+(e.hashstring?"#"+e.hashstring:""))}if(e.store.dispatch(bt(s)),!r&&Object(ae.t)(s))return i.a.redirect(Object(xt.a)({isNative:!0,redirectTo:e.path}));if(r||n||!o||!Object(ae.a)(s,a)){if(e.pathname!==Object(ae.q)(e.params))return i.a.redirect(Object(ae.q)(e.params)+(e.querystring?"?"+e.querystring:""));jt.a.set("signup-locale",n),t()}else window.location=Object(ae.o)(s,Object(ae.m)(e.params),Object(ae.n)(e.params),o)+(e.querystring?"?"+e.querystring:"")+(e.hashstring?"#"+e.hashstring:"")},Pt=function(e,t){return r()(regeneratorRuntime.mark((function s(){var n,i,o,r,a,u;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=Object(p.h)(e.path),i=Object(ae.h)(e.params),o=Object(ae.m)(e.params),r=Object(ae.n)(e.params),a=yt.query,s.next=7,We(o);case 7:u=s.sent,Object(d.a)(n,"Signup > Start > "+i+" > "+o,{flow:i}),e.store.dispatch(Object(ft.b)("content")),e.store.dispatch(bt(i)),e.primary=c.a.createElement(gt,{store:e.store,path:e.path,initialContext:yt,locale:e.params.lang,flowName:i,queryObject:a,refParameter:a&&a.ref,stepName:o,stepSectionName:r,stepComponent:u,pageTitle:Object(ae.i)(i)}),t();case 13:case"end":return s.stop()}}),s)})))()},Ct=s("./controller/index.web.js");t.default=function(){var e=Object(nt.d)();i()(["/start/".concat(e),"/start/:flowName/".concat(e),"/start/:flowName/:stepName/".concat(e),"/start/:flowName/:stepName/:stepSectionName/".concat(e)],Nt,Et,kt,Tt,Pt,Ct.c,Ct.e)}},"./signup/processing-screen/style.scss":function(e,t,s){},"./signup/signup-header/style.scss":function(e,t,s){},"./signup/site-mockup/style.scss":function(e,t,s){},"./signup/steps lazy recursive ^\\.\\/.*$ include: signup\\/steps\\/[a-z-]+\\/index.jsx$":function(e,t,s){var n={"./about":["./signup/steps/about/index.jsx",418,170,313],"./about/":["./signup/steps/about/index.jsx",418,170,313],"./about/index":["./signup/steps/about/index.jsx",418,170,313],"./about/index.jsx":["./signup/steps/about/index.jsx",418,170,313],"./clone-cloning":["./signup/steps/clone-cloning/index.jsx",194],"./clone-cloning/":["./signup/steps/clone-cloning/index.jsx",194],"./clone-cloning/index":["./signup/steps/clone-cloning/index.jsx",194],"./clone-cloning/index.jsx":["./signup/steps/clone-cloning/index.jsx",194],"./clone-credentials":["./signup/steps/clone-credentials/index.jsx",418,396,181],"./clone-credentials/":["./signup/steps/clone-credentials/index.jsx",418,396,181],"./clone-credentials/index":["./signup/steps/clone-credentials/index.jsx",418,396,181],"./clone-credentials/index.jsx":["./signup/steps/clone-credentials/index.jsx",418,396,181],"./clone-destination":["./signup/steps/clone-destination/index.jsx",183],"./clone-destination/":["./signup/steps/clone-destination/index.jsx",183],"./clone-destination/index":["./signup/steps/clone-destination/index.jsx",183],"./clone-destination/index.jsx":["./signup/steps/clone-destination/index.jsx",183],"./clone-jetpack":["./signup/steps/clone-jetpack/index.jsx",192],"./clone-jetpack/":["./signup/steps/clone-jetpack/index.jsx",192],"./clone-jetpack/index":["./signup/steps/clone-jetpack/index.jsx",192],"./clone-jetpack/index.jsx":["./signup/steps/clone-jetpack/index.jsx",192],"./clone-point":["./signup/steps/clone-point/index.jsx",418,2,452,397,386,178],"./clone-point/":["./signup/steps/clone-point/index.jsx",418,2,452,397,386,178],"./clone-point/index":["./signup/steps/clone-point/index.jsx",418,2,452,397,386,178],"./clone-point/index.jsx":["./signup/steps/clone-point/index.jsx",418,2,452,397,386,178],"./clone-ready":["./signup/steps/clone-ready/index.jsx",452,195],"./clone-ready/":["./signup/steps/clone-ready/index.jsx",452,195],"./clone-ready/index":["./signup/steps/clone-ready/index.jsx",452,195],"./clone-ready/index.jsx":["./signup/steps/clone-ready/index.jsx",452,195],"./clone-start":["./signup/steps/clone-start/index.jsx",196],"./clone-start/":["./signup/steps/clone-start/index.jsx",196],"./clone-start/index":["./signup/steps/clone-start/index.jsx",196],"./clone-start/index.jsx":["./signup/steps/clone-start/index.jsx",196],"./creds-complete":["./signup/steps/creds-complete/index.jsx",197],"./creds-complete/":["./signup/steps/creds-complete/index.jsx",197],"./creds-complete/index":["./signup/steps/creds-complete/index.jsx",197],"./creds-complete/index.jsx":["./signup/steps/creds-complete/index.jsx",197],"./creds-confirm":["./signup/steps/creds-confirm/index.jsx",198],"./creds-confirm/":["./signup/steps/creds-confirm/index.jsx",198],"./creds-confirm/index":["./signup/steps/creds-confirm/index.jsx",198],"./creds-confirm/index.jsx":["./signup/steps/creds-confirm/index.jsx",198],"./creds-permission":["./signup/steps/creds-permission/index.jsx",199],"./creds-permission/":["./signup/steps/creds-permission/index.jsx",199],"./creds-permission/index":["./signup/steps/creds-permission/index.jsx",199],"./creds-permission/index.jsx":["./signup/steps/creds-permission/index.jsx",199],"./domains":["./signup/steps/domains/index.jsx",418,426,387,314,176],"./domains/":["./signup/steps/domains/index.jsx",418,426,387,314,176],"./domains/index":["./signup/steps/domains/index.jsx",418,426,387,314,176],"./domains/index.jsx":["./signup/steps/domains/index.jsx",418,426,387,314,176],"./import-preview":["./signup/steps/import-preview/index.jsx",180],"./import-preview/":["./signup/steps/import-preview/index.jsx",180],"./import-preview/index":["./signup/steps/import-preview/index.jsx",180],"./import-preview/index.jsx":["./signup/steps/import-preview/index.jsx",180],"./import-url":["./signup/steps/import-url/index.jsx",89,378],"./import-url-onboarding":["./signup/steps/import-url-onboarding/index.jsx",89,297],"./import-url-onboarding/":["./signup/steps/import-url-onboarding/index.jsx",89,297],"./import-url-onboarding/index":["./signup/steps/import-url-onboarding/index.jsx",89,297],"./import-url-onboarding/index.jsx":["./signup/steps/import-url-onboarding/index.jsx",89,297],"./import-url/":["./signup/steps/import-url/index.jsx",89,378],"./import-url/index":["./signup/steps/import-url/index.jsx",89,378],"./import-url/index.jsx":["./signup/steps/import-url/index.jsx",89,378],"./launch-site":["./signup/steps/launch-site/index.jsx",450],"./launch-site/":["./signup/steps/launch-site/index.jsx",450],"./launch-site/index":["./signup/steps/launch-site/index.jsx",450],"./launch-site/index.jsx":["./signup/steps/launch-site/index.jsx",450],"./passwordless":["./signup/steps/passwordless/index.jsx",188],"./passwordless/":["./signup/steps/passwordless/index.jsx",188],"./passwordless/index":["./signup/steps/passwordless/index.jsx",188],"./passwordless/index.jsx":["./signup/steps/passwordless/index.jsx",188],"./plans":["./signup/steps/plans/index.jsx",418,358,385,383,368,341,167],"./plans-atomic-store":["./signup/steps/plans-atomic-store/index.jsx",418,358,385,168],"./plans-atomic-store/":["./signup/steps/plans-atomic-store/index.jsx",418,358,385,168],"./plans-atomic-store/index":["./signup/steps/plans-atomic-store/index.jsx",418,358,385,168],"./plans-atomic-store/index.jsx":["./signup/steps/plans-atomic-store/index.jsx",418,358,385,168],"./plans/":["./signup/steps/plans/index.jsx",418,358,385,383,368,341,167],"./plans/index":["./signup/steps/plans/index.jsx",418,358,385,383,368,341,167],"./plans/index.jsx":["./signup/steps/plans/index.jsx",418,358,385,383,368,341,167],"./reader-landing":["./signup/steps/reader-landing/index.jsx",200],"./reader-landing/":["./signup/steps/reader-landing/index.jsx",200],"./reader-landing/index":["./signup/steps/reader-landing/index.jsx",200],"./reader-landing/index.jsx":["./signup/steps/reader-landing/index.jsx",200],"./rebrand-cities-welcome":["./signup/steps/rebrand-cities-welcome/index.jsx",187],"./rebrand-cities-welcome/":["./signup/steps/rebrand-cities-welcome/index.jsx",187],"./rebrand-cities-welcome/index":["./signup/steps/rebrand-cities-welcome/index.jsx",187],"./rebrand-cities-welcome/index.jsx":["./signup/steps/rebrand-cities-welcome/index.jsx",187],"./rewind-form-creds":["./signup/steps/rewind-form-creds/index.jsx",396,190],"./rewind-form-creds/":["./signup/steps/rewind-form-creds/index.jsx",396,190],"./rewind-form-creds/index":["./signup/steps/rewind-form-creds/index.jsx",396,190],"./rewind-form-creds/index.jsx":["./signup/steps/rewind-form-creds/index.jsx",396,190],"./rewind-migrate":["./signup/steps/rewind-migrate/index.jsx",452,193],"./rewind-migrate/":["./signup/steps/rewind-migrate/index.jsx",452,193],"./rewind-migrate/index":["./signup/steps/rewind-migrate/index.jsx",452,193],"./rewind-migrate/index.jsx":["./signup/steps/rewind-migrate/index.jsx",452,193],"./rewind-were-backing":["./signup/steps/rewind-were-backing/index.jsx",201],"./rewind-were-backing/":["./signup/steps/rewind-were-backing/index.jsx",201],"./rewind-were-backing/index":["./signup/steps/rewind-were-backing/index.jsx",201],"./rewind-were-backing/index.jsx":["./signup/steps/rewind-were-backing/index.jsx",201],"./site":["./signup/steps/site/index.jsx",185],"./site-or-domain":["./signup/steps/site-or-domain/index.jsx",177],"./site-or-domain/":["./signup/steps/site-or-domain/index.jsx",177],"./site-or-domain/index":["./signup/steps/site-or-domain/index.jsx",177],"./site-or-domain/index.jsx":["./signup/steps/site-or-domain/index.jsx",177],"./site-picker":["./signup/steps/site-picker/index.jsx",347,324,175],"./site-picker/":["./signup/steps/site-picker/index.jsx",347,324,175],"./site-picker/index":["./signup/steps/site-picker/index.jsx",347,324,175],"./site-picker/index.jsx":["./signup/steps/site-picker/index.jsx",347,324,175],"./site-style":["./signup/steps/site-style/index.jsx",189],"./site-style/":["./signup/steps/site-style/index.jsx",189],"./site-style/index":["./signup/steps/site-style/index.jsx",189],"./site-style/index.jsx":["./signup/steps/site-style/index.jsx",189],"./site-title":["./signup/steps/site-title/index.jsx",191],"./site-title/":["./signup/steps/site-title/index.jsx",191],"./site-title/index":["./signup/steps/site-title/index.jsx",191],"./site-title/index.jsx":["./signup/steps/site-title/index.jsx",191],"./site-topic":["./signup/steps/site-topic/index.jsx",170,451],"./site-topic/":["./signup/steps/site-topic/index.jsx",170,451],"./site-topic/index":["./signup/steps/site-topic/index.jsx",170,451],"./site-topic/index.jsx":["./signup/steps/site-topic/index.jsx",170,451],"./site-type":["./signup/steps/site-type/index.jsx",184],"./site-type/":["./signup/steps/site-type/index.jsx",184],"./site-type/index":["./signup/steps/site-type/index.jsx",184],"./site-type/index.jsx":["./signup/steps/site-type/index.jsx",184],"./site/":["./signup/steps/site/index.jsx",185],"./site/index":["./signup/steps/site/index.jsx",185],"./site/index.jsx":["./signup/steps/site/index.jsx",185],"./survey":["./signup/steps/survey/index.jsx",172],"./survey/":["./signup/steps/survey/index.jsx",172],"./survey/index":["./signup/steps/survey/index.jsx",172],"./survey/index.jsx":["./signup/steps/survey/index.jsx",172],"./test-step":["./signup/steps/test-step/index.jsx",202],"./test-step/":["./signup/steps/test-step/index.jsx",202],"./test-step/index":["./signup/steps/test-step/index.jsx",202],"./test-step/index.jsx":["./signup/steps/test-step/index.jsx",202],"./theme-selection":["./signup/steps/theme-selection/index.jsx",418,457,406,171],"./theme-selection/":["./signup/steps/theme-selection/index.jsx",418,457,406,171],"./theme-selection/index":["./signup/steps/theme-selection/index.jsx",418,457,406,171],"./theme-selection/index.jsx":["./signup/steps/theme-selection/index.jsx",418,457,406,171],"./upsell":["./signup/steps/upsell/index.jsx",182],"./upsell/":["./signup/steps/upsell/index.jsx",182],"./upsell/index":["./signup/steps/upsell/index.jsx",182],"./upsell/index.jsx":["./signup/steps/upsell/index.jsx",182],"./user":["./signup/steps/user/index.jsx",418,398,345,179],"./user/":["./signup/steps/user/index.jsx",418,398,345,179],"./user/index":["./signup/steps/user/index.jsx",418,398,345,179],"./user/index.jsx":["./signup/steps/user/index.jsx",418,398,345,179],"./wp-for-teams-site":["./signup/steps/wp-for-teams-site/index.jsx",186],"./wp-for-teams-site/":["./signup/steps/wp-for-teams-site/index.jsx",186],"./wp-for-teams-site/index":["./signup/steps/wp-for-teams-site/index.jsx",186],"./wp-for-teams-site/index.jsx":["./signup/steps/wp-for-teams-site/index.jsx",186]};function i(e){if(!s.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return Promise.all(t.slice(1).map(s.e)).then((function(){return s(i)}))}i.keys=function(){return Object.keys(n)},i.id="./signup/steps lazy recursive ^\\.\\/.*$ include: signup\\/steps\\/[a-z-]+\\/index.jsx$",e.exports=i},"./signup/style.scss":function(e,t,s){},"./signup/utils.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return v})),s.d(t,"m",(function(){return x})),s.d(t,"n",(function(){return _})),s.d(t,"o",(function(){return S})),s.d(t,"q",(function(){return N})),s.d(t,"l",(function(){return k})),s.d(t,"k",(function(){return E})),s.d(t,"j",(function(){return T})),s.d(t,"i",(function(){return P})),s.d(t,"e",(function(){return C})),s.d(t,"p",(function(){return I})),s.d(t,"d",(function(){return D})),s.d(t,"f",(function(){return F})),s.d(t,"g",(function(){return A})),s.d(t,"c",(function(){return R})),s.d(t,"a",(function(){return q})),s.d(t,"r",(function(){return L})),s.d(t,"s",(function(){return z})),s.d(t,"b",(function(){return U})),s.d(t,"t",(function(){return $}));var n=s("../node_modules/cookie/index.js"),i=s.n(n),o=s("../node_modules/lodash-es/isEmpty.js"),r=s("../node_modules/lodash-es/find.js"),a=s("../node_modules/lodash-es/pick.js"),c=s("../node_modules/lodash-es/indexOf.js"),u=s("../node_modules/lodash-es/sortBy.js"),l=s("../node_modules/lodash-es/filter.js"),p=s("../node_modules/lodash-es/includes.js"),d=s("../packages/i18n-calypso/dist/esm/index.js"),m=s("./signup/config/steps-pure.js"),g=s("./signup/config/flows.js"),f=s("./lib/user/index.js"),h=s("./lib/abtest/index.js"),j=Object(f.default)(),b=g.a.defaultFlowName;function y(){return e="US"===i.a.parse(document.cookie).country_code,j&&j.get()&&e&&"onboarding"===b&&"variantShowSwapped"===Object(h.a)("domainStepPlanStepSwap")?"onboarding-plan-first":b;var e}function v(e){return e.flowName&&(t=e.flowName,!Object(o.a)(g.a.getFlow(t)))?e.flowName:y();var t}function x(e){return Object(r.a)(Object(a.a)(e,["flowName","stepName"]),w)}function w(e){return!Object(o.a)(m.a[e])}function _(e){return Object(r.a)(Object(a.a)(e,["stepName","stepSectionName"]),O)}function O(e){return!w(e)}function S(e,t,s,n){var i=e?"/".concat(e):"",o=t?"/".concat(t):"",r=s?"/".concat(s):"",a=n&&!j.get()?"/".concat(n):"";return e===b?"/start"+o+r+a:"/start"+i+o+r+a}function N(e){var t=e.lang,s=v(e),n=g.a.getFlow(s).steps,i=x(e)||n[0],o=_(e);return 0===n.length?"/":S(s,i,o,t)}function k(e,t){var s=g.a.getFlow(e);return s.steps[Object(c.a)(s.steps,t)-1]}function E(e,t){var s=g.a.getFlow(e);return s.steps[Object(c.a)(s.steps,t)+1]}function T(e){return g.a.getFlow(e).steps}function P(e){return g.a.getFlow(e).pageTitle||Object(d.f)("Create a site")}function C(e,t,s){return g.a.filterDestination(e,t,s)}function I(e){var t=e.split(",");return-1!==t.indexOf("sell")||-1!==t.indexOf("promote")?"pub/radcliffe-2":-1!==t.indexOf("educate")?"pub/twentyfifteen":-1!==t.indexOf("showcase")?"pub/altofocus":"pub/independent-publisher-2"}function D(e,t){var s=e.split(",");return"sell"===e||"ecommerce"===t?"store":-1!==s.indexOf("sell")||-1!==s.indexOf("promote")?"page":-1!==s.indexOf("showcase")?"portfolio":"blog"}function F(e,t){var s=g.a.getFlow(e);return s?Object(u.a)(Object(l.a)(t,(function(e){return Object(p.a)(s.steps,e.stepName)})),(function(e){var t=e.stepName;return s.steps.indexOf(t)})):[]}function A(e,t){return Object(r.a)(F(e,t),{status:"invalid"})}function R(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.shouldMatchFlowName?Object(l.a)(F(e,t),(function(t){return"in-progress"!==t.status&&t.lastKnownFlow===e})):Object(l.a)(F(e,t),(function(e){return"in-progress"!==e.status}))}function q(e,t){var s=g.a.getFlow(e);return R(e,t,{shouldMatchFlowName:!0}).length>0&&!s.disallowResume}var L=function(e){var t={path:"/",expires:new Date((new Date).getTime()+6048e5),sameSite:"strict"};document.cookie=i.a.serialize("wpcom_signup_complete_destination",e,t)},z=function(){return i.a.parse(document.cookie).wpcom_signup_complete_destination},U=function(){var e={path:"/",expires:new Date((new Date).getTime()-1e3)};document.cookie=i.a.serialize("wpcom_signup_complete_destination","",e)},$=function(e){var t=g.a.getFlow(e);return!!t&&t.forceLogin}},"./signup/wpcom-login-form/index.jsx":function(e,t,s){"use strict";s.d(t,"a",(function(){return x}));var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=s.n(n),o=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(o),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),p=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(p),m=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),g=s.n(m),f=s("../node_modules/react/index.js"),h=s.n(f),j=s("../node_modules/debug/src/browser.js"),b=s.n(j),y=s("./config/index.js"),v=b()("calypso:signup:wpcom-login"),x=function(e){l()(s,e);var t=d()(s);function s(){var e;i()(this,s);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),g()(c()(e),"form",null),g()(c()(e),"storeFormRef",(function(t){e.form=t})),e}return r()(s,[{key:"componentDidMount",value:function(){v("submit form"),this.form.submit()}},{key:"action",value:function(){var e=/^https?:\/\/([a-z0-9]*).wordpress.com/,t="";return e.test(this.props.redirectTo)&&"wpcalypso.wordpress.com"!==Object(y.a)("hostname")&&"horizon.wordpress.com"!==Object(y.a)("hostname")&&(t=this.props.redirectTo.match(e)[1]+"."),"https://".concat(t,"wordpress.com/wp-login.php")}},{key:"renderExtraFields",value:function(){var e=this.props.extraFields;return e?h.a.createElement("div",null,Object.keys(e).map((function(t){return h.a.createElement("input",{key:t,type:"hidden",name:t,value:e[t]})}))):null}},{key:"render",value:function(){return h.a.createElement("form",{method:"post",action:this.action(),ref:this.storeFormRef},h.a.createElement("input",{type:"hidden",name:"log",value:this.props.log}),h.a.createElement("input",{type:"hidden",name:"pwd",value:this.props.pwd}),h.a.createElement("input",{type:"hidden",name:"authorization",value:this.props.authorization}),h.a.createElement("input",{type:"hidden",name:"redirect_to",value:this.props.redirectTo}),this.renderExtraFields())}}]),s}(f.Component)},"./state/analytics/actions/compose-analytics.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/action-types.js"),i=s("../node_modules/lodash-es/flatMap.js"),o=s("../node_modules/lodash-es/property.js");function r(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return{type:n.y,meta:{analytics:Object(i.a)(t,Object(o.a)("meta.analytics"))}}}},"./state/current-user/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return r}));var n="calypso_domains_with_plans_only",i="calypso_allow_nonprimary_domains_without_plan",o="price_2020_q2_test_2",r="price_2020_q2_test_3"},"./state/data-getters/index.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return B})),s.d(t,"b",(function(){return M})),s.d(t,"e",(function(){return V})),s.d(t,"a",(function(){return W})),s.d(t,"c",(function(){return G})),s.d(t,"f",(function(){return Y})),s.d(t,"g",(function(){return J})),s.d(t,"h",(function(){return Q})),s.d(t,"j",(function(){return Z})),s.d(t,"i",(function(){return K})),s.d(t,"k",(function(){return X}));var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),i=s.n(n),o=s("../node_modules/lodash-es/omit.js"),r=s("../node_modules/lodash-es/sortBy.js"),a=s("./state/http/actions.js"),c=s("./state/data-layer/wpcom-http/actions.js"),u=s("./state/data-layer/http-data.ts"),l=s("./state/activity-log/utils.js"),p=s("./state/data-layer/wpcom-http/pipeline/retry-on-failure/policies.js"),d=s("../node_modules/lodash-es/get.js"),m=s("../node_modules/lodash-es/isUndefined.js"),g=s("./state/data-layer/wpcom/sites/activity/schema.json"),f=s("./lib/make-json-schema-parser/index.js"),h=s("../node_modules/@babel/runtime/helpers/toConsumableArray.js"),j=s.n(h),b=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),y=s.n(b),v=s("../node_modules/lodash-es/find.js"),x=s("../node_modules/lodash-es/initial.js"),w=s("../node_modules/lodash-es/compact.js"),_=function(e,t){var s=y()(e.indices,2),n=s[0],i=s[1],o=y()(t.indices,2),r=o[0],a=o[1];return 0===n&&0===i&&0!==a||n<r?-1:r<n?1:a-i},O=function e(t,s){var n,o,r,a,c=Object(v.a)(t,(n=s,o=y()(n.indices,2),r=o[0],a=o[1],function(e){var t=e.indices;t=void 0===t?[0,0]:t;var s=y()(t,2),n=s[0],i=s[1];return 0!==r&&0!==a&&n<=r&&i>=a}));return c?[].concat(j()(Object(x.a)(t)),[i()({},c,{children:e(c.children,s)})]):[].concat(j()(t),[s])},S=function(e){return{type:"comment",commentId:e.id,postId:e.post_id,siteId:e.site_id}},N=function(e){return{type:"post",postId:e.id,siteId:e.site_id}},k=function(e){return{type:"site",siteId:e.id,intent:e.intent,section:e.section}},E=function(e){var t=e.id;return{type:"person",name:e.name,siteId:e.site_id,userId:t,intent:e.intent,section:e.section}},T=function(e){return{type:"plugin",siteSlug:e.site_slug,pluginSlug:e.slug,version:e.version,intent:e.intent,section:e.section}},P=function(e){var t=e.site_slug,s=e.slug,n=e.version;return{type:"theme",siteSlug:t,themeSlug:s,themeUri:e.uri,version:n,intent:e.intent,section:e.section}},C=function(e){var t,s=e.type,n=e.url;return s?{type:e.type}:n?{type:"link",url:(t=e).url,intent:t.intent,section:t.section}:e},I=function(e){switch(e){case"comment":return S;case"post":return N;case"site":return k;case"user":return E;case"plugin":return T;case"theme":return P;default:return C}},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()({},I(t.type)(t),{children:[e]})},F=function(e){var t=y()(e,2),s=t[0],n=t[1];return s.length?Object(w.a)(s.concat(n)):n.length?[n]:[]},A=function e(t,s){var n=y()(t,3),i=n[0],o=n[1],r=n[2],a=y()(s.indices,2),c=a[0],u=a[1],l=c-r,p=u-r,d=l>0?[o.slice(0,l)]:[],m=F(s.children.reduce(e,[[],o.slice(l,p),c])),g=Object.assign(D(o.slice(l,p),s),m.length&&{children:m});return[[].concat(j()(i),d,[g]),o.slice(p),u]};function R(e){var t,s=e.actor,n=e.object,o=e.published,r=e.first_published,a=r||o,c={};switch(e.name){case"rewind__backup_error":"2"===Object(d.a)(e.object,"error_code","")&&(c.errorCode="bad_credentials")}return Object.assign({actorAvatarUrl:Object(d.a)(s,"icon.url","https://www.gravatar.com/avatar/0"),actorName:Object(d.a)(s,"name",""),actorRemoteId:Object(d.a)(s,"external_user_id",0),actorRole:Object(d.a)(s,"role",""),actorType:Object(d.a)(s,"type",""),actorWpcomId:Object(d.a)(s,"wpcom_user_id",0),activityDate:a,activityGroup:(e.name||"").split("__",1)[0],activityIcon:Object(d.a)(e,"gridicon","info-outline"),activityId:e.activity_id,activityIsRewindable:e.is_rewindable,activityName:e.name,activityTitle:e.summary,activityTs:Date.parse(a),activityDescription:(t=e.content,t.ranges?F(t.ranges.map((function(e){return i()({},e,{children:[]})})).sort(_).reduce(O,[]).reduce(A,[[],t.text,0])):[D(t)]),activityMedia:Object(d.a)(e,"image"),activityMeta:c},e.rewind_id&&{rewindId:e.rewind_id},e.status&&{activityStatus:e.status},n&&n.target_ts&&{activityTargetTs:n.target_ts},n&&n.type&&{activityType:n.type},e.is_aggregate&&{isAggregate:e.is_aggregate},e.streams&&{streams:e.streams.map(R)},e.stream_count&&{streamCount:e.stream_count},e.first_published&&{firstPublishedDate:e.first_published},e.last_published&&{lastPublishedDate:e.last_published},!Object(m.a)(e.streams_have_same_actor)&&{multipleActors:!e.streams_have_same_actor})}var q=Object(f.c)(g,(function(e){return Object(d.a)(e,["current","orderedItems"],[]).map(R)})),L=Object(f.c)(g.definitions.singleActivityRequest,R),z=s("../node_modules/lodash-es/forOwn.js"),U=s("./state/data-layer/wpcom/sites/activity-types/schema.json");var $=Object(f.c)(U,(function(e){var t=[];return Object(z.a)(Object(d.a)(e,["groups"],{}),(function(e,s){t.push({key:s,name:e.name,count:e.count})})),t})),B=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=s.freshness,i=void 0===n?1e4:n,r=t&&t.before?t.before:"",a=t&&t.after?t.after:"",p=t&&t.on?t.on:"",d="activity-log-".concat(e,"-").concat(a,"-").concat(r,"-").concat(p);return Object(u.h)(d,Object(c.a)({apiNamespace:"wpcom/v2",method:"GET",path:"/sites/".concat(e,"/activity/count/group"),query:Object(o.a)(Object(l.a)(t),"aggregate")},{}),{freshness:i,fromApi:function(){return function(e){return[[d,$(e)]]}}})},M=function(e,t){var s=t&&t.group&&t.group.length?Object(r.a)(t.group).join(","):"",n=t&&t.before?t.before:"",i=t&&t.after?t.after:"",o=t&&t.on?t.on:"",a=t&&t.aggregate?t.aggregate:"";return"activity-log-".concat(e,"-").concat(s,"-").concat(i,"-").concat(n,"-").concat(o,"-").concat(a)},V=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=s.freshness,i=void 0===n?3e5:n,o=M(e,t);return Object(u.h)(o,Object(c.a)({apiNamespace:"wpcom/v2",method:"GET",path:"/sites/".concat(e,"/activity"),query:Object(l.a)(t)},{}),{freshness:i,fromApi:function(){return function(e){return[[o,q(e)]]}}})},W=function(e,t){return"activity-single-".concat(e,"-").concat(t)},G=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=s.freshness,i=void 0===n?3e5:n,o=W(e,t);return Object(u.h)(o,Object(c.a)({apiNamespace:"wpcom/v2",method:"GET",path:"/sites/".concat(e,"/activity/").concat(t)},{}),{freshness:i,fromApi:function(){return function(e){return[[o,L(e)]]}}})},H=function(e){return"site-external-contributors-".concat(e)},Y=function(e){return Object(u.h)(H(e),Object(c.a)({method:"GET",path:"/sites/".concat(e,"/external-contributors"),apiNamespace:"wpcom/v2"}),{fromApi:function(){return function(t){return[[H(e),t]]}}})},J=function(e,t){var s=H(e),n="".concat(s,"-addition-").concat(t);return Object(u.h)(n,Object(c.a)({method:"POST",path:"/sites/".concat(e,"/external-contributors/add"),apiNamespace:"wpcom/v2",body:{user_id:t}}),{fromApi:function(){return function(e){return[[s,e]]}}})},Q=function(e,t){var s=H(e),n="".concat(s,"-removal-").concat(t);return Object(u.h)(n,Object(c.a)({method:"POST",path:"/sites/".concat(e,"/external-contributors/remove"),apiNamespace:"wpcom/v2",body:{user_id:t}}),{fromApi:function(){return function(e){return[[s,e]]}}})},Z=function(){return Object(u.h)("geo",Object(a.a)({method:"GET",url:"https://public-api.wordpress.com/geo/"}),{fromApi:function(){return function(e){return[["geo",e.body.country_short]]}}})},K=function(e){var t="feed-discovery-".concat(e);return Object(u.h)(t,Object(c.a)({method:"GET",path:"/read/feed",query:{url:e},retryPolicy:Object(p.b)()},{}),{fromApi:function(){return function(e){var s=e.feeds;return[[t,s]]}}})},X=function(e){var t="site-alerts-".concat(e);return Object(u.h)(t,Object(c.a)({method:"GET",path:"/sites/".concat(e,"/alerts"),apiNamespace:"wpcom/v2"},{}),{freshness:3e5,fromApi:function(){return function(e){var s=e.suggestions,n=e.threats,o=e.warnings,r=e.updates;return[[t,{suggestions:s,threats:n.map((function(e){return i()({id:e.id,signature:e.signature,description:e.description,firstDetected:Date.parse(e.first_detected)},e.context?{filename:e.filename,context:e.context}:{},{},e.diff?{filename:e.filename,diff:e.diff}:{},{},e.extension?{extension:{type:e.extension.type,name:e.extension.name,slug:e.extension.slug,version:e.extension.version}}:{})})),warnings:o,updates:{themes:r.themes.map((function(e){return{name:e.name,slug:e.slug,type:e.type,version:e.version}})),core:r.core.map((function(e){return{name:e.name,slug:e.slug,type:e.type,version:e.version}}))}}]]}}})}},"./state/data-layer/wpcom/sites/activity-types/schema.json":function(e){e.exports=JSON.parse('{"type":"object","required":["groups"],"properties":{"groups":{"type":"object","properties":{"post":{"$ref":"#/definitions/item"},"setting":{"$ref":"#/definitions/item"},"user":{"$ref":"#/definitions/item"},"attachment":{"$ref":"#/definitions/item"},"comment":{"$ref":"#/definitions/item"},"widget":{"$ref":"#/definitions/item"},"theme":{"$ref":"#/definitions/item"},"feedback":{"$ref":"#/definitions/item"},"option":{"$ref":"#/definitions/item"},"other":{"$ref":"#/definitions/item"}}}},"definitions":{"group":{"type":"object","required":["name","count"],"properties":{"name":{"type":"string"},"count":{"type":"integer"}}}}}')},"./state/data-layer/wpcom/sites/activity/schema.json":function(e){e.exports=JSON.parse('{"type":"object","required":["itemsPerPage","page","totalItems","totalPages"],"properties":{"@context":{"type":"string"},"first":{"type":"string"},"id":{"type":"string"},"itemsPerPage":{"type":"integer"},"last":{"type":"string"},"page":{"type":"integer"},"nextAfter":{"type":"array"},"prevBefore":{"type":"array"},"summary":{"type":"string"},"totalItems":{"type":"integer"},"totalPages":{"type":"integer"},"type":{"type":"string"},"current":{"type":"object","required":["totalItems"],"properties":{"id":{"type":"string"},"next":{"type":"string"},"prev":{"type":"string"},"orderedItems":{"type":"array","items":{"$ref":"#/definitions/activity"}},"totalItems":{"type":"integer"},"type":{"type":"string"}}}},"definitions":{"activity":{"type":"object","required":["activity_id","is_rewindable","name","summary"],"properties":{"activity_id":{"type":"string"},"actor":{"type":"object","required":["type","name"],"properties":{"external_user_id":{"type":"integer"},"icon":{"type":"object","required":["url"],"properties":{"url":{"type":"string"},"width":{"type":"integer"},"height":{"type":"integer"}}},"name":{"type":"string"},"role":{"type":"string"},"type":{"type":"string"},"wpcom_user_id":{"type":"integer"}}},"content":{"type":"object"},"first_published":{"type":"string"},"formatted_content":{"name":{"type":"string"},"content":{"type":"object"}},"generator":{"type":"object"},"gridicon":{"type":"string"},"is_aggregate":{"type":"boolean"},"is_rewindable":{"type":"boolean"},"is_discarded":{"type":"boolean"},"streams_have_same_actor":{"type":"boolean"},"last_published":{"type":"string"},"rewind_id":{"type":["null","string"]},"items":{"type":"array","items":{"type":"object"}},"name":{"type":"string"},"object":{"type":"object"},"published":{"type":"string"},"status":{"oneOf":[{"type":"null"},{"type":"string","enum":["error","info","success","warning"]}]},"stream_count":{"type":"integer"},"streams":{"type":"array"},"summary":{"type":["object","string"]},"target":{"type":"object"},"target_ts":{"type":"number"},"totalItems":{"min":0,"type":"integer"},"type":{"type":"string"}}},"singleActivityRequest":{"$ref":"#/definitions/activity"}}}')},"./state/http/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=s.n(n),o=s("./state/action-types.js"),r=function(e){var t=e.url,s=e.method,n=e.headers,r=e.queryParams,a=e.body,c=e.withCredentials,u=e.onSuccess,l=e.onFailure,p=i()(e,["url","method","headers","queryParams","body","withCredentials","onSuccess","onFailure"]),d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:o.jg,url:t,method:s,headers:n,queryParams:r,body:a,withCredentials:c,onSuccess:u||d,onFailure:l||d,options:p}}},"./state/selectors/get-site-id.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/sites/selectors/get-site.js");function i(e,t){if(!t)return null;var s=Object(n.a)(e,t);return s?s.ID:null}},"./state/signup/preview/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return o}));var n=s("./state/action-types.js"),i=(s("./state/signup/init.js"),function(){return{type:n.up}}),o=function(){return{type:n.vp}}},"./state/signup/preview/selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("../node_modules/lodash-es/get.js"),i=(s("./state/signup/init.js"),function(e){return Object(n.a)(e,["signup","preview","isVisible"],!1)})},"./state/signup/progress/selectors.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("../node_modules/lodash-es/get.js"),i=(s("./state/signup/init.js"),{});function o(e){return Object(n.a)(e,"signup.progress",i)}},"./state/signup/steps/site-type/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),i=s.n(n),o=s("./state/action-types.js"),r=s("./lib/signup/site-type.js"),a=s("./state/signup/progress/actions.js");s("./state/signup/init.js");function c(e){return{type:o.Ap,siteType:e}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"site-type";return function(s){s(c(e));var n=void 0;"site-type-with-theme"!==t&&(n=Object(r.b)("slug",e,"theme")||"pub/independent-publisher-2"),s(Object(a.f)({stepName:t},i()({siteType:e},n&&{themeSlugWithRepo:n})))}}},"./state/signup/steps/site-vertical/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return c}));var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),i=s.n(n),o=s("./state/action-types.js"),r=s("./state/signup/progress/actions.js");s("./state/signup/init.js");function a(e){return i()({type:o.Bp},e)}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"site-topic",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(n){n(a(e)),n(Object(r.f)({stepName:t},i()({siteTopic:e.name},"site-topic-with-theme"!==t&&s&&{themeSlugWithRepo:s})))}}},"./state/signup/steps/survey/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./state/action-types.js"),i=s("./state/analytics/actions/with-analytics.js"),o=s("./state/analytics/actions/compose-analytics.js"),r=s("./state/analytics/actions/record.js");s("./state/signup/init.js");function a(e){var t={vertical:e.vertical};return Object(i.a)(Object(o.a)(Object(r.a)(t),Object(r.b)("VerticalSelectedEvent",t)))({type:n.Cp,survey:e})}},"./state/sites/domains/actions.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return I})),s.d(t,"c",(function(){return D})),s.d(t,"a",(function(){return F})),s.d(t,"f",(function(){return A})),s.d(t,"b",(function(){return R})),s.d(t,"e",(function(){return q}));var n=s("../node_modules/debug/src/browser.js"),i=s.n(n),o=s("../node_modules/lodash-es/map.js"),r=s("../node_modules/lodash-es/noop.js"),a=s("../packages/i18n-calypso/dist/esm/index.js");var c=s("./lib/domains/constants.js");function u(e){switch(e.gdpr_consent_status){case"NONE":return c.e.NONE;case"PENDING":return c.e.PENDING;case"PENDING_ASYNC":return c.e.PENDING_ASYNC;case"ACCEPTED_CONTRACTUAL_MINIMUM":return c.e.ACCEPTED_CONTRACTUAL_MINIMUM;case"ACCEPTED_FULL":return c.e.ACCEPTED_FULL;case"DENIED":return c.e.DENIED;case"FORCED_ALL_CONTRACTUAL":return c.e.FORCED_ALL_CONTRACTUAL;default:return null}}function l(e){return"redirect"===e.type?c.i.SITE_REDIRECT:"transfer"===e.type?c.i.TRANSFER:e.wpcom_domain?c.i.WPCOM:e.has_registration?c.i.REGISTERED:c.i.MAPPED}function p(e){return"pending_owner"===e.transfer_status?c.h.PENDING_OWNER:"pending_registry"===e.transfer_status?c.h.PENDING_REGISTRY:"cancelled"===e.transfer_status?c.h.CANCELLED:"completed"===e.transfer_status?c.h.COMPLETED:"pending_start"===e.transfer_status?c.h.PENDING_START:null}var d=s("../node_modules/lodash-es/mapKeys.js"),m=s("../node_modules/lodash-es/camelCase.js");function g(e){if(e)return Object(d.a)(e,(function(e,t){return Object(m.default)(t)}))}var f,h=function(e){var t,s,n=null;return e.transfer_start_date&&((n=new Date(e.transfer_start_date)).setDate(n.getDate()+7),n=n.toIsoString()),{autoRenewalDate:String(e.auto_renewal_date),adminEmail:e.admin_email,autoRenewing:Boolean(e.auto_renewing),blogId:Number(e.blog_id),bundledPlanSubscriptionId:e.bundled_plan_subscription_id,canSetAsPrimary:Boolean(e.can_set_as_primary),contactInfoDisclosureAvailable:Boolean(e.contact_info_disclosure_available),contactInfoDisclosed:Boolean(e.contact_info_disclosed),currentUserCanManage:Boolean(e.current_user_can_manage),domain:String(e.domain),domainLockingAvailable:Boolean(e.domain_locking_available),domainRegistrationAgreementUrl:(t=e,null!==(s=null==t?void 0:t.domain_registration_agreement_url)&&void 0!==s?s:null),emailForwardsCount:Number(e.email_forwards_count),expired:Boolean(e.expired),expiry:e.expiry?String(e.expiry):null,expirySoon:Boolean(e.expiry_soon),gdprConsentStatus:u(e),googleAppsSubscription:g(e.google_apps_subscription),hasRegistration:Boolean(e.has_registration),hasWpcomNameservers:e.has_wpcom_nameservers,hasZone:Boolean(e.has_zone),isLocked:Boolean(e.is_locked),isRenewable:Boolean(e.is_renewable),isRedeemable:Boolean(e.is_redeemable),isEligibleForInboundTransfer:Boolean(e.is_eligible_for_inbound_transfer),isAutoRenewing:Boolean(e.auto_renewing),isPendingIcannVerification:Boolean(e.is_pending_icann_verification),isPrimary:Boolean(e.primary_domain),isPendingWhoisUpdate:Boolean(e.pending_whois_update),isSubdomain:Boolean(e.is_subdomain),isWPCOMDomain:Boolean(e.wpcom_domain),isWpcomStagingDomain:Boolean(e.is_wpcom_staging_domain),manualTransferRequired:Boolean(e.manual_transfer_required),mustRemovePrivacyBeforeContactUpdate:Boolean(e.must_remove_privacy_before_contact_update),newRegistration:Boolean(e.new_registration),name:String(e.domain),owner:String(e.owner),partnerDomain:Boolean(e.partner_domain),pendingRegistration:Boolean(e.pending_registration),pendingRegistrationTime:String(e.pending_registration_time),pendingTransfer:e.pending_transfer,pointsToWpcom:Boolean(e.points_to_wpcom),privateDomain:e.private_domain,privacyAvailable:Boolean(e.privacy_available),registrar:String(e.registrar),registrationDate:String(e.registration_date),renewableUntil:String(e.renewable_until),redeemableUntil:String(e.redeemable_until),sslStatus:e.ssl_status?String(e.ssl_status):null,subscriptionId:e.subscription_id,supportsDomainConnect:Boolean(e.supports_domain_connect),supportsGdprConsentManagement:Boolean(e.supports_gdpr_consent_management),supportsTransferApproval:Boolean(e.supports_transfer_approval),tldMaintenanceEndTime:e.tld_maintenance_end_time,transferAwayEligibleAt:e.transfer_away_eligible_at?String(e.transfer_away_eligible_at):null,transferLockOnWhoisUpdateOptional:Boolean(e.transfer_lock_on_whois_update_optional),type:l(e),transferStatus:p(e),transferStartDate:e.transfer_start_date?String(e.transfer_start_date):null,transferEndDate:n,whoisUpdateUnmodifiableFields:e.whois_update_unmodifiable_fields}},j=s("./lib/wp/browser.js"),b=s("./state/action-types.js"),y=s("./state/sites/actions.js"),v=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),x=s.n(v),w=s("../node_modules/lodash-es/get.js"),_=s("./state/data-layer/wpcom-http/actions.js"),O=s("./state/data-layer/wpcom-http/utils.js"),S=s("./state/data-layer/handler-registry.js"),N=s("./state/notices/actions.js"),k=function(e){return function(t){return Object(_.a)({apiVersion:"1",method:"POST",path:"/domains/"+t.domain+"/privacy/"+e},t)}},E=function(e){return function(t){var s=t.siteId,n=t.domain,i=function(e){switch(e){case b.kd:return Object(a.f)("Privacy has been successfully disabled!");case b.nd:return Object(a.f)("Yay, privacy has been successfully enabled!");case b.Pc:return Object(a.f)("Your contact information is now publicly visible!");case b.Sc:return Object(a.f)("Your contact information is now redacted!");default:return""}}(e);return[{type:e,siteId:s,domain:n},Object(N.f)(i,{duration:5e3})]}},T=function(e){return function(t,s){var n=t.siteId,i=t.domain,o=Object(w.a)(s,"message",Object(a.f)("Unknown error when updating the domain privacy settings"));return[{type:e,siteId:n,domain:i},Object(N.b)(o,{duration:2e4,id:"domain-privacy-settings-save-failure-notice",isPersistent:!0,href:"https://wordpress.com/help/contact",button:Object(a.f)("Get Help"),showDismiss:!1})]}};Object(S.b)("state/data-layer/wpcom/domains/privacy/index.js",(f={},x()(f,b.ld,[Object(O.a)({fetch:k("enable"),onSuccess:E(b.nd),onError:T(b.md)})]),x()(f,b.id,[Object(O.a)({fetch:k("disable"),onSuccess:E(b.kd),onError:T(b.jd)})]),x()(f,b.Nc,[Object(O.a)({fetch:k("disclose"),onSuccess:E(b.Pc),onError:T(b.Oc)})]),x()(f,b.Qc,[Object(O.a)({fetch:k("redact"),onSuccess:E(b.Sc),onError:T(b.Rc)})]),f));var P=i()("calypso:state:sites:domains:actions"),C=j.a.undocumented();function I(e){return function(t){return t(function(e){var t={type:b.qq,siteId:e};return P("returning action: %o",t),t}(e)),C.site(e).domains().then((function(s){var n=s.domains,i=void 0===n?[]:n;t(function(e){var t={type:b.sq,siteId:e};return P("returning action: %o",t),t}(e)),t(function(e,t){var s={type:b.pq,siteId:e,domains:Object(o.a)(t,h)};return P("returning action: %o",s),s}(e,i))})).catch((function(s){var n=s instanceof Error?s.message:Object(a.f)("There was a problem fetching site domains. Please try again later or contact support.");t(function(e,t){var s={type:b.rq,siteId:e,error:t};return P("returning action: %o",s),s}(e,n))}))}}function D(e,t){return{type:b.ld,siteId:e,domain:t}}function F(e,t){return{type:b.id,siteId:e,domain:t}}var A=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a;return function(n){return P("setPrimaryDomain",e,t),C.setPrimaryDomain(e,t,(function(t,i){return t?s(t,i):n(I(e)).then((function(){s(null,i),n(Object(y.e)(e))}))}))}};function R(e,t){return{type:b.Nc,siteId:e,domain:t}}function q(e,t){return{type:b.Qc,siteId:e,domain:t}}},"./state/sites/domains/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return a})),s.d(t,"b",(function(){return c})),s.d(t,"f",(function(){return u}));var n=Object.freeze([]),i=function(e,t){return t&&e.sites.domains.items[t]||n},o=function(e){return e.sites.domains.items},r=function(e,t){var s,n,i;return Boolean(null==e||null===(s=e.sites)||void 0===s||null===(n=s.domains)||void 0===n||null===(i=n.items)||void 0===i?void 0:i[t])},a=function(e,t){return e.sites.domains.requesting[t]||!1},c=function(e){return e.sites.domains.requesting},u=function(e,t,s){var n,i,o,r;return null==e||null===(n=e.sites)||void 0===n||null===(i=n.domains)||void 0===i||null===(o=i.updatingPrivacy)||void 0===o||null===(r=o[t])||void 0===r?void 0:r[s]}},"./state/sites/selectors/get-site-plan-slug.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("../node_modules/lodash-es/get.js"),i=s("./state/sites/selectors/get-site-plan.ts");function o(e,t){return Object(n.a)(Object(i.a)(e,t),"product_slug")}},"./state/sites/selectors/get-site-plan.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("../node_modules/lodash-es/get.js"),i=s("./state/selectors/get-raw-site.js");function o(e,t){var s=Object(i.a)(e,t);return s?Object(n.a)(s.plan,"expired",!1)?s.jetpack?{product_id:2002,product_slug:"jetpack_free",product_name_short:"Free",free_trial:!1,expired:!1}:{product_id:1,product_slug:"free_plan",product_name_short:"Free",free_trial:!1,expired:!1}:s.plan:null}},"./state/sites/selectors/is-current-plan-paid.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/sites/selectors/get-site-plan.ts");function i(e,t){var s=Object(n.a)(e,t);return s?1!==s.product_id&&2002!==s.product_id:null}}}]);