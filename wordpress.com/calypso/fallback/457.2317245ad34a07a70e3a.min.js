(window.webpackJsonp=window.webpackJsonp||[]).push([[457],{"./state/themes/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={search:"",tier:"",filter:"",number:20,offset:0,page:1}},"./state/themes/init.js":function(e,t,r){"use strict";var n=r("./state/redux-store.ts"),s=r("../node_modules/@babel/runtime/helpers/defineProperty.js"),a=r.n(s),i=r("../node_modules/@babel/runtime/helpers/objectSpread2.js"),o=r.n(i),u=r("../node_modules/lodash-es/omit.js"),c=r("../node_modules/lodash-es/map.js"),d=r("../node_modules/lodash-es/mapValues.js"),l=r("../node_modules/@babel/runtime/helpers/classCallCheck.js"),p=r.n(l),h=r("../node_modules/@babel/runtime/helpers/createClass.js"),v=r.n(h),m=r("../node_modules/@babel/runtime/helpers/inherits.js"),j=r.n(m),b=r("../node_modules/@babel/runtime/helpers/createSuper.js"),g=r.n(b),y=r("./lib/query-manager/paginated/index.js"),f=r("../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),O=r.n(f),I=r("../node_modules/@babel/runtime/helpers/get.js"),w=r.n(I),_=r("../node_modules/lodash-es/omitBy.js"),q=r("./lib/query-manager/paginated/key.js"),P={search:"",tier:"",filter:"",number:20,offset:0,page:1};function k(e,t){return null==e||P[t]===e}var L=function(e){j()(r,e);var t=g()(r);function r(){return p()(this,r),t.apply(this,arguments)}return v()(r,null,[{key:"stringify",value:function(e){return w()(O()(r),"stringify",this).call(this,Object(_.a)(e,k))}},{key:"parse",value:function(e){return Object(_.a)(w()(O()(r),"parse",this).call(this,e),k)}}]),r}(q.a),T=function(e){j()(r,e);var t=g()(r);function r(){return p()(this,r),t.apply(this,arguments)}return v()(r,null,[{key:"sort",value:function(){}}]),r}(y.a);a()(T,"QueryKey",L),a()(T,"DefaultQuery",P);var x=r("./state/utils/schema-utils.js"),C=r("./state/utils/without-persistence.js"),R=r("./state/utils/reducer-utils.js"),Q=r("./state/utils/with-storage-key.js"),S=r("./state/themes/action-types.js"),D=r("./state/action-types.js"),$=r("./state/themes/utils.js"),A=r("./lib/query-manager/schema.js"),B={type:"object",properties:{_timestamp:{type:"number"}},patternProperties:{"^(wpcom|wporg|\\d+)$":Object(A.b)({title:"Theme",additionalProperties:!1,type:"object",patternProperties:{"^[\\w-]+$":{additionalProperties:!0,required:["id","name","author","screenshot"],type:"object",properties:{active:{type:"boolean"},author:{type:"string"},author_uri:{type:"string"},autoupdate:{type:"boolean"},autoupdate_translation:{type:"boolean"},demo_uri:{type:"string"},description:{type:"string"},id:{type:"string"},name:{type:"string"},price:{type:"string"},screenshot:{type:"string"},stylesheet:{type:"string"},tags:{type:"array",items:{type:"string"}},taxonomies:{type:"object"},theme_uri:{type:"string"},update:{type:["null","object"]},version:{type:"string"}}}}})},additionalProperties:!1};var E=Object(x.a)({type:"boolean"},(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,r=t.type;return S.g!==r&&e}));var K=Object(R.a)({backPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/themes",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.q:return void 0!==t.path?t.path:e}return e},themesBannerVisible:E,themesShowcaseOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return S.l===t.type||e},themesBookmark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return S.h===t.type?t.payload:e}}),M=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.U:var r=t.siteId,n=t.themeId;return o()({},e,a()({},r,n));case S.P:var s=t.siteId,i=t.themeId;return o()({},e,a()({},s,i));case S.Q:var c=t.siteId;return Object(u.a)(e,c);case S.T:var d=t.siteId;return Object(u.a)(e,d);case S.M:var l=t.siteId;return Object(u.a)(e,l)}return e})),J=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.R:var r=t.siteId,n=t.error;return o()({},e,a()({},r,n));case S.O:var s=t.siteId,i=t.error;return o()({},e,a()({},s,i));case S.K:var c=t.siteId,d=t.error;return o()({},e,a()({},c,d));case S.Q:var l=t.siteId;return Object(u.a)(e,l);case S.T:var p=t.siteId;return Object(u.a)(e,p);case S.M:var h=t.siteId;return Object(u.a)(e,h)}return e})),F=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.S:var r=t.siteId,n=t.loaded;return o()({},e,a()({},r,n));case S.L:var s=t.siteId,i=t.loaded;return o()({},e,a()({},s,i));case S.Q:var c=t.siteId;return Object(u.a)(e,c);case S.T:var d=t.siteId;return Object(u.a)(e,d);case S.M:var l=t.siteId;return Object(u.a)(e,l)}return e})),U=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.S:var r=t.siteId,n=t.total;return o()({},e,a()({},r,n));case S.L:var s=t.siteId,i=t.total;return o()({},e,a()({},s,i));case S.Q:var c=t.siteId;return Object(u.a)(e,c);case S.T:var d=t.siteId;return Object(u.a)(e,d);case S.M:var l=t.siteId;return Object(u.a)(e,l)}return e})),V=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.T:var r=t.siteId;return o()({},e,a()({},r,!0));case S.M:var n=t.siteId;return o()({},e,a()({},n,!0));case S.Q:var s=t.siteId;return o()({},e,a()({},s,!1));case S.U:var i=t.siteId;return o()({},e,a()({},i,!1));case S.R:var u=t.siteId;return o()({},e,a()({},u,!1));case S.P:var c=t.siteId,d=t.status;return o()({},e,a()({},c,"complete"!==d));case S.K:var l=t.siteId;return o()({},e,a()({},l,!1));case S.O:var p=t.siteId;return o()({},e,a()({},p,!1))}return e})),W=Object(R.a)({uploadedThemeId:M,uploadError:J,progressLoaded:F,progressTotal:U,inProgress:V}),H=r("./lib/formatting/index.js"),z=Object(x.a)({type:"object",patternProperties:{"^\\d+$":{description:"Theme ID",type:"string"}}},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.p:var r=t.siteId,n=t.themeStylesheet;return o()({},e,a()({},r,Object($.c)(n)));case S.c:var s=t.siteId,i=t.theme;return o()({},e,a()({},s,i.id))}return e}));var N=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.p:var r=t.siteId;return o()({},e,a()({},r,!0));case S.r:var n=t.siteId;return o()({},e,a()({},n,!1))}return e}));var G=Object(x.a)({type:"object",patternProperties:{"^(wpcom|wporg|\\d+)$":{type:"object",patternProperties:{"^\\w+$":{type:"object",properties:{path:{type:"string"},method:{type:"string"},name:{type:"string"},statusCode:{type:"number"},status:{type:"number"},message:{type:"string"},error:{type:"string"}}}}}}},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.E:var r=t.siteId,n=t.themeId,s=t.error;return o()({},e,a()({},r,o()({},e[r],a()({},n,s))));case S.F:var i=t.siteId,c=t.themeId;return o()({},e,a()({},i,Object(u.a)(e[i],c)))}return e}));var X=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.j:var r=t.siteId,n=t.query,s=t.error,i=Object($.a)(n,r);return o()({},e,a()({},r,o()({},e[r],a()({},i,s))));case S.k:var c=t.siteId,d=t.query,l=Object($.a)(d,c);return o()({},e,a()({},c,Object(u.a)(e[c],l)))}return e})),Y=function(){function e(e,t,r,n){for(var s,i,u=arguments.length,c=new Array(u>4?u-4:0),d=4;d<u;d++)c[d-4]=arguments[d];if(!e[t])return n?o()({},e,a()({},t,(i=new T(null,{itemKey:"id"}))[r].apply(i,c))):e;var l=(s=e[t])[r].apply(s,c);return l===e[t]?e:o()({},e,a()({},t,l))}function t(e){return e&&e.description?o()({},e,{description:Object(H.b)(e.description)}):e}return Object(x.a)(B,(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S.k:var s=n.siteId,a=n.query,i=n.themes,o=n.found;return e(r,s,"receive",!0,Object(c.a)(i,t),{query:a,found:o,patch:!0});case S.u:var l=n.siteId,p=n.themeId;return e(r,l,"removeItem",!1,p);case D.Wo:var h=Object(d.a)(r,(function(e){return{data:e.data,options:e.options}}));return h._timestamp=Date.now(),h;case D.jc:if(r._timestamp&&r._timestamp+864e5<Date.now())return{};var v=Object(u.a)(r,"_timestamp");return Object(d.a)(v,(function(e){var t=e.data,r=e.options;return new T(t,r)}))}return r}))}(),Z=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.k:var r=t.siteId,n=t.query;return o()({},e,a()({},r,n))}return e})),ee=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.B:var r=t.primary,n=t.secondary;return{primary:r,secondary:n}}return e})),te=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.C:var r=t.themeId;return r}return e})),re=Object(C.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.J:return{themeId:t.themeId,show:!0,accepted:!1};case S.m:return{themeId:t.themeId,show:!1,accepted:!0};case S.n:case S.p:case S.o:case S.x:return null}return e})),ne=Object(x.a)({type:"object",patternProperties:{"^[\\w-]+$":{title:"Taxonomy",type:"object",patternProperties:{"^\\w+$":{title:"Term",type:"object",properties:{name:{type:"string"},description:{type:"string"}}}},uniqueItems:!0}},additionalProperties:!1},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.v:var r=t.filters;return r}return e}));var se=Object(R.a)({queries:Y,queryRequests:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case S.i:case S.k:case S.j:return e=Object($.a)(r.query,r.siteId),Object.assign({},t,a()({},e,S.i===r.type))}return t},queryRequestErrors:X,lastQuery:Z,themeInstalls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.y:case S.A:case S.z:return Object.assign({},e,a()({},t.siteId,Object.assign({},e[t.siteId],a()({},t.themeId,S.y===t.type))))}return e},themeRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.D:case S.F:case S.E:return Object.assign({},e,a()({},t.siteId,Object.assign({},e[t.siteId],a()({},t.themeId,S.D===t.type))))}return e},themeRequestErrors:G,activeThemes:z,activeThemeRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.a:case S.c:case S.b:return o()({},e,a()({},t.siteId,S.a===t.type))}return e},activationRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.n:case S.p:case S.o:return o()({},e,a()({},t.siteId,S.n===t.type))}return e},completedActivationRequests:N,themesUI:K,uploadTheme:W,themePreviewOptions:ee,themePreviewVisibility:te,themeFilters:ne,recommendedThemes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,themes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.e:return o()({},e,{isLoading:!0});case S.f:return o()({},e,{isLoading:!1,themes:t.payload.themes});case S.d:return o()({},e,{isLoading:!1})}return e},themeHasAutoLoadingHomepageWarning:re}),ae=Object(Q.a)("themes",se);Object(n.a)(["themes"],ae)},"./state/themes/utils.js":function(e,t,r){"use strict";r.d(t,"k",(function(){return y})),r.d(t,"e",(function(){return f})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return I})),r.d(t,"j",(function(){return w})),r.d(t,"c",(function(){return _})),r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return k})),r.d(t,"f",(function(){return L})),r.d(t,"g",(function(){return T})),r.d(t,"d",(function(){return x}));var n=r("../node_modules/@babel/runtime/helpers/slicedToArray.js"),s=r.n(n),a=r("../node_modules/@babel/runtime/helpers/objectSpread2.js"),i=r.n(a),o=r("../node_modules/lodash-es/get.js"),u=r("../node_modules/lodash-es/startsWith.js"),c=r("../node_modules/lodash-es/omit.js"),d=r("../node_modules/lodash-es/map.js"),l=r("../node_modules/lodash-es/mapKeys.js"),p=r("../node_modules/lodash-es/split.js"),h=r("../node_modules/lodash-es/omitBy.js"),v=r("../node_modules/lodash-es/includes.js"),m=r("../node_modules/lodash-es/every.js"),j=r("../node_modules/lodash-es/some.js"),b=r("./state/themes/constants.js"),g=["feature"],y="//wordpress.com/themes/";function f(e){var t=Object(o.a)(e,"stylesheet",!1);return t&&Object(u.a)(t,"premium/")}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.tags?i()({},Object(c.a)(e,"tags"),{taxonomies:{theme_feature:Object(d.a)(e.tags,(function(e){return{slug:e}}))}}):e}function I(e){var t={description_long:"descriptionLong",support_documentation:"supportDocumentation",download_uri:"download"};return Object(l.a)(e,(function(e,r){return Object(o.a)(t,r,r)}))}function w(e){var t={slug:"id",preview_url:"demo_uri",screenshot_url:"screenshot",download_link:"download"},r=Object(l.a)(Object(c.a)(e,["sections","author"]),(function(e,r){return Object(o.a)(t,r,r)})),n=Object(o.a)(e,["sections","description"]);n&&(r.description=n);var s=Object(o.a)(e,["author","display_name"]);return s&&(r.author=s),r.tags?i()({},Object(c.a)(r,"tags"),{taxonomies:{theme_feature:Object(d.a)(r.tags,(function(e,t){return{name:e,slug:t}}))}}):r}function _(e){var t=Object(p.a)(e,"/",2),r=s()(t,2)[1];return r||e}function q(e){return Object(h.a)(e,(function(e,t){return b.a[t]===e}))}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=q(e),n=JSON.stringify(r);return t?[t,n].join(":"):n}function k(e,t){return P(Object(c.a)(e,"page"),t)}function L(e){return Object(v.a)(e.theme_uri,"wordpress.com")}function T(e,t){var r=i()({},b.a,{},e);return Object(m.a)(r,(function(e,r){switch(r){case"search":if(!e)return!0;var n=e.toLowerCase();return Object(j.a)(g,(function(e){return t.taxonomies&&Object(j.a)(t.taxonomies["theme_"+e],(function(e){var t=e.name;return t&&Object(v.a)(t.toLowerCase(),n)}))}))||t.id&&Object(v.a)(t.id.toLowerCase(),n)||t.name&&Object(v.a)(t.name.toLowerCase(),n)||t.author&&Object(v.a)(t.author.toLowerCase(),n)||t.descriptionLong&&Object(v.a)(t.descriptionLong.toLowerCase(),n);case"filter":if(!e)return!0;var s=e.split(",");return Object(m.a)(s,(function(e){return Object(j.a)(t.taxonomies,(function(t){return Object(j.a)(t,{slug:e})}))}))}return!0}))}function x(e,t){return Object(o.a)(e,["taxonomies",t],[]).map((function(e){return e.slug}))}}}]);