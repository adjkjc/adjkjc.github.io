(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{"../packages/components/dist/esm/ribbon/index.js":function(e,t,s){"use strict";var n=s("../node_modules/react/index.js"),o=s.n(n),a=s("../node_modules/classnames/index.js"),r=s.n(a);s("../packages/components/dist/esm/ribbon/style.scss");t.a=function(e){return o.a.createElement("div",{className:r()({ribbon:!0,"is-green":"green"===e.color})},o.a.createElement("span",{className:"ribbon__title"},e.children))}},"../packages/components/dist/esm/ribbon/style.scss":function(e,t,s){},"./components/info-popover/index.jsx":function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=s.n(n),a=s("../node_modules/@babel/runtime/helpers/createClass.js"),r=s.n(a),i=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=s.n(i),c=s("../node_modules/@babel/runtime/helpers/inherits.js"),p=s.n(c),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),u=s.n(m),h=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),d=s.n(h),b=s("../node_modules/react/index.js"),f=s.n(b),v=s("../node_modules/prop-types/index.js"),_=s.n(v),g=s("../node_modules/classnames/index.js"),j=s.n(g),k=s("../packages/i18n-calypso/dist/esm/index.js"),x=s("./components/gridicon/index.tsx"),C=s("./components/popover/index.jsx"),y=s("./lib/analytics/ga.js"),E=(s("./components/info-popover/style.scss"),function(e){p()(s,e);var t=u()(s);function s(){var e;o()(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),d()(l()(e),"iconRef",f.a.createRef()),d()(l()(e),"state",{showPopover:!1}),d()(l()(e),"handleClick",(function(t){t.preventDefault(),t.stopPropagation(),e.setState({showPopover:!e.state.showPopover},e.recordStats)})),d()(l()(e),"handleClose",(function(){return e.setState({showPopover:!1},e.recordStats)})),d()(l()(e),"recordStats",(function(){var t=e.props,s=t.gaEventCategory,n=t.popoverName;if(s&&n){var o=e.state.showPopover?" Opened":" Closed";Object(y.a)(s,"InfoPopover: "+n+o)}})),e}return r()(s,[{key:"render",value:function(){return f.a.createElement(b.Fragment,null,f.a.createElement("button",{type:"button","aria-haspopup":!0,"aria-expanded":this.state.showPopover,"aria-label":Object(k.f)("More information"),onClick:this.handleClick,ref:this.iconRef,className:j()("info-popover",this.props.className,{"is-active":this.state.showPopover})},f.a.createElement(x.a,{icon:this.props.icon,size:this.props.iconSize})),this.state.showPopover&&f.a.createElement(C.a,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:!0,context:this.iconRef.current,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:j()("info-popover__tooltip",this.props.className)},this.props.children))}}]),s}(b.Component));d()(E,"propTypes",{autoRtl:_.a.bool,className:_.a.string,gaEventCategory:_.a.string,icon:_.a.string,iconSize:_.a.number,id:_.a.string,ignoreContext:_.a.shape({getDOMNode:_.a.func}),popoverName:_.a.string,position:_.a.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"])}),d()(E,"defaultProps",{autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom"})},"./components/info-popover/style.scss":function(e,t,s){},"./components/popover/menu-item.jsx":function(e,t,s){"use strict";s.d(t,"a",(function(){return P}));var n=s("../node_modules/@babel/runtime/helpers/extends.js"),o=s.n(n),a=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(a),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),l=s.n(i),c=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=s.n(c),m=s("../node_modules/@babel/runtime/helpers/inherits.js"),u=s.n(m),h=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(h),b=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),f=s.n(b),v=s("../node_modules/prop-types/index.js"),_=s.n(v),g=s("../node_modules/react/index.js"),j=s.n(g),k=s("../node_modules/classnames/index.js"),x=s.n(k),C=s("../node_modules/lodash-es/omit.js"),y=s("../node_modules/lodash-es/noop.js"),E=s("./components/gridicon/index.tsx"),N=s("./components/external-link/index.jsx"),P=function(e){u()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),f()(p()(e),"handleMouseOver",(function(t){e.props.focusOnHover&&t.target.focus(),e.props.onMouseOver()})),e}return l()(s,[{key:"render",value:function(){var e=this.props,t=e.children,s=e.className,n=e.href,a=e.icon,r=e.isSelected,i=e.isExternalLink,l=Object(C.a)(this.props,"icon","focusOnHover","isSelected","isExternalLink","className","itemComponent"),c=x()("popover__menu-item",s,{"is-selected":r}),p=this.props.itemComponent;return i&&n?(p=N.a,l.icon=!0):n&&(p="a"),j.a.createElement(p,o()({role:"menuitem",onMouseOver:this.handleMouseOver,tabIndex:"-1",className:c},l),a&&j.a.createElement(E.a,{icon:a,size:18}),t)}}]),s}(g.Component);f()(P,"propTypes",{href:_.a.string,className:_.a.string,isSelected:_.a.bool,icon:_.a.string,focusOnHover:_.a.bool,onMouseOver:_.a.func,isExternalLink:_.a.bool,itemComponent:_.a.oneOfType([_.a.func,_.a.string])}),f()(P,"defaultProps",{isSelected:!1,focusOnHover:!0,onMouseOver:y.a,itemComponent:"button"})},"./components/popover/menu-separator.jsx":function(e,t,s){"use strict";var n=s("../node_modules/react/index.js"),o=s.n(n).a.createElement("hr",{className:"popover__menu-separator"});t.a=function(){return o}},"./components/theme/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/extends.js"),o=s.n(n),a=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(a),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),l=s.n(i),c=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=s.n(c),m=s("../node_modules/@babel/runtime/helpers/inherits.js"),u=s.n(m),h=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(h),b=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),f=s.n(b),v=s("../node_modules/react/index.js"),_=s.n(v),g=s("../node_modules/react-redux/es/index.js"),j=s("../node_modules/prop-types/index.js"),k=s.n(j),x=s("../node_modules/classnames/index.js"),C=s.n(x),y=s("../node_modules/lodash-es/isEqual.js"),E=s("../node_modules/lodash-es/get.js"),N=s("../node_modules/lodash-es/some.js"),P=s("../node_modules/lodash-es/isEmpty.js"),O=s("../node_modules/lodash-es/noop.js"),w=s("./components/gridicon/index.tsx"),S=s("../packages/i18n-calypso/dist/esm/index.js"),B=s("../packages/photon/dist/esm/index.js"),R=s("../packages/components/dist/esm/card/index.js"),U=s("../packages/components/dist/esm/button/index.js"),M=s("../packages/components/dist/esm/ribbon/index.js"),I=s("../node_modules/lodash-es/isFunction.js"),T=s("../node_modules/lodash-es/map.js"),z=s("./components/popover/menu.jsx"),A=s("./components/popover/menu-item.jsx"),L=s("./components/popover/menu-separator.jsx");function q(e){return!!e&&(e.startsWith("//")||!e.startsWith("/"))}var H=function(e){u()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),f()(p()(e),"state",{showPopover:!1}),f()(p()(e),"moreButtonRef",_.a.createRef()),f()(p()(e),"togglePopover",(function(){e.setState({showPopover:!e.state.showPopover}),!e.state.showPopover&&e.props.onMoreButtonClick(e.props.themeId,e.props.index,"popup_open")})),f()(p()(e),"closePopover",(function(t){e.setState({showPopover:!1}),Object(I.a)(t)&&t()})),e}return l()(s,[{key:"popoverAction",value:function(e,t){var s=this;return function(){e(s.props.themeId),s.props.onMoreButtonClick(s.props.themeId,s.props.index,"popup_"+t)}}},{key:"render",value:function(){var e=this,t=C()("theme__more-button",{"is-active":this.props.active},{"is-open":this.state.showPopover});return _.a.createElement("span",{className:t},_.a.createElement("button",{ref:this.moreButtonRef,onClick:this.togglePopover},_.a.createElement(w.a,{icon:"ellipsis",size:24})),this.state.showPopover&&_.a.createElement(z.a,{context:this.moreButtonRef.current,isVisible:!0,onClose:this.closePopover,position:"top left"},Object(T.a)(this.props.options,(function(t,s){if(t.separator)return _.a.createElement(L.a,{key:s});if(t.getUrl){var n=t.getUrl(e.props.themeId);return _.a.createElement(A.a,{key:t.label,action:e.popoverAction(t.action,t.label),href:n,target:q(n)?"_blank":null},t.label)}return t.action?_.a.createElement(A.a,{key:t.label,action:e.popoverAction(t.action,t.label)},t.label):null}))))}}]),s}(v.Component);H.propTypes={themeId:k.a.string,index:k.a.number,onMoreButtonClick:k.a.func,options:k.a.objectOf(k.a.shape({label:k.a.string,header:k.a.string,action:k.a.func,getUrl:k.a.func})).isRequired,active:k.a.bool};var D=H,F=s("./components/pulsing-dot/index.jsx"),J=s("./components/info-popover/index.jsx"),V=s("./lib/analytics/track-component-view/index.jsx"),W=s("./state/analytics/actions/record.js"),G=s("./state/themes/themes-ui/actions.js"),K=(s("./components/theme/style.scss"),function(e){u()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),f()(p()(e),"onScreenshotClick",(function(){var t=e.props.onScreenshotClick;"function"==typeof t&&t(e.props.theme.id,e.props.index)})),f()(p()(e),"onUpsellClick",(function(){e.props.recordTracksEvent("calypso_upgrade_nudge_cta_click",{cta_name:"theme-upsell-popup",theme:e.props.theme.id})})),f()(p()(e),"setBookmark",(function(){e.props.setThemesBookmark(e.props.theme.id)})),e}return l()(s,[{key:"shouldComponentUpdate",value:function(e){return e.theme.id!==this.props.theme.id||e.active!==this.props.active||e.price!==this.props.price||e.installing!==this.props.installing||!Object(y.a)(Object.keys(e.buttonContents),Object.keys(this.props.buttonContents))||e.screenshotClickUrl!==this.props.screenshotClickUrl||e.onScreenshotClick!==this.props.onScreenshotClick||e.onMoreButtonClick!==this.props.onMoreButtonClick}},{key:"isBeginnerTheme",value:function(){var e=this.props.theme,t=Object(E.a)(e,["taxonomies","theme_skill-level"]);return Object(N.a)(t,{slug:"beginner"})}},{key:"renderPlaceholder",value:function(){return _.a.createElement(R.a,{className:"theme is-placeholder"},_.a.createElement("div",{className:"theme__content"}))}},{key:"renderInstalling",value:function(){if(this.props.installing)return _.a.createElement("div",{className:"theme__installing"},_.a.createElement(F.a,{active:!0}))}},{key:"render",value:function(){var e=this.props,t=e.active,s=e.price,n=e.theme,a=e.translate,r=e.upsellUrl,i=n.name,l=n.description,c=n.screenshot,p=this.props.screenshotClickUrl||this.props.onScreenshotClick,m=C()("theme",{"is-active":t,"is-actionable":p}),u=/\d/g.test(s),h=u&&r,d=C()("theme__badge-price",{"theme__badge-price-upgrade":!u,"theme__badge-price-test":h}),b=0===this.props.index?"theme__firstscreenshot":null;if(this.props.isPlaceholder)return this.renderPlaceholder();var f={cta_name:"theme-upsell",theme:n.id},v={cta_name:"theme-upsell-popup",theme:n.id},g=h&&_.a.createElement("span",{className:"theme__upsell"},_.a.createElement(V.a,{eventName:"calypso_upgrade_nudge_impression",eventProperties:f}),_.a.createElement(J.a,{icon:"star",className:"theme__upsell-icon",position:"top left"},_.a.createElement(V.a,{eventName:"calypso_upgrade_nudge_impression",eventProperties:v}),_.a.createElement("div",{className:"theme__upsell-popover"},_.a.createElement("h2",{className:"theme__upsell-heading"},a("Use this theme at no extra cost on our Premium or Business Plan")),_.a.createElement(U.a,{onClick:this.onUpsellClick,className:"theme__upsell-cta",primary:!0,href:r},a("Upgrade Now"))))),j=Object(B.a)(c,{fit:"479,360"}),k=Object(B.a)(c,{fit:"479,360",zoom:2}),x=i.toLowerCase().replace(/\s+/g,"-"),y=this.props.bookmarkRef?{ref:this.props.bookmarkRef}:{};return _.a.createElement(R.a,{className:m,"data-e2e-theme":x,onClick:this.setBookmark},this.isBeginnerTheme()&&_.a.createElement(M.a,{className:"theme__ribbon",color:"green"},a("Beginner")),_.a.createElement("div",o()({className:"theme__content"},y),_.a.createElement("a",{"aria-label":i,className:"theme__thumbnail",href:this.props.screenshotClickUrl||"javascript:;",onClick:this.onScreenshotClick,title:l},p&&_.a.createElement("div",{className:"theme__thumbnail-label"},this.props.actionLabel),this.renderInstalling(),c?_.a.createElement("img",{alt:l,className:"theme__img",src:j,srcSet:"".concat(k," 2x"),id:b}):_.a.createElement("div",{className:"theme__no-screenshot"},_.a.createElement(w.a,{icon:"themes",size:48}))),_.a.createElement("div",{className:"theme__info"},_.a.createElement("h2",{className:"theme__info-title"},i),t&&_.a.createElement("span",{className:"theme__badge-active"},a("Active",{context:"singular noun, the currently active theme"})),_.a.createElement("span",{className:d},s),g,Object(P.a)(this.props.buttonContents)?null:_.a.createElement(D,{index:this.props.index,themeId:this.props.theme.id,active:this.props.active,onMoreButtonClick:this.props.onMoreButtonClick,options:this.props.buttonContents}))))}}]),s}(v.Component));f()(K,"propTypes",{theme:k.a.shape({id:k.a.string.isRequired,name:k.a.string.isRequired,screenshot:k.a.string,author:k.a.string,author_uri:k.a.string,demo_uri:k.a.string,stylesheet:k.a.string,taxonomies:k.a.object}),active:k.a.bool,price:k.a.string,installing:k.a.bool,isPlaceholder:k.a.bool,screenshotClickUrl:k.a.string,onScreenshotClick:k.a.func,onMoreButtonClick:k.a.func,buttonContents:k.a.objectOf(k.a.shape({label:k.a.string,header:k.a.string,action:k.a.func,getUrl:k.a.func})),index:k.a.number,actionLabel:k.a.string,translate:k.a.func,setThemesBookmark:k.a.func,bookmarkRef:k.a.oneOfType([k.a.func,k.a.shape({current:k.a.any})])}),f()(K,"defaultProps",{isPlaceholder:!1,buttonContents:{},onMoreButtonClick:O.a,actionLabel:"",active:!1});t.a=Object(g.c)(null,{recordTracksEvent:W.e,setThemesBookmark:G.b})(Object(S.c)(K))},"./components/theme/style.scss":function(e,t,s){},"./state/themes/themes-ui/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return a}));var n=s("./state/themes/action-types.js");s("./state/themes/init.js");function o(){return{type:n.l}}function a(e){return{type:n.h,payload:e}}},"./state/themes/themes-ui/selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return i}));var n=s("../node_modules/lodash-es/includes.js"),o=s("./state/ui/selectors/get-selected-site-slug.js");s("./state/themes/init.js");function a(e){var t=e.themes.themesUI.backPath,s=Object(o.a)(e);return!s||Object(n.a)(t,s)?t:"/themes/".concat(s)}function r(e){return e.themes.themesUI.themesBookmark}function i(e){return e.themes.themesUI.themesShowcaseOpen}}}]);