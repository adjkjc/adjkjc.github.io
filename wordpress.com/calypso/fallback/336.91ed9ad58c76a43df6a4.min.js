(window.webpackJsonp=window.webpackJsonp||[]).push([[336],{"./blocks/eligibility-warnings/index.tsx":function(e,t,i){"use strict";var s=i("../node_modules/@babel/runtime/helpers/objectSpread2.js"),n=i.n(s),a=i("../node_modules/react/index.js"),l=i.n(a),o=i("../node_modules/react-redux/es/index.js"),r=i("../packages/i18n-calypso/dist/esm/index.js"),c=i("../node_modules/lodash-es/union.js"),u=i("../node_modules/lodash-es/noop.js"),d=i("../node_modules/lodash-es/includes.js"),g=i("../node_modules/classnames/index.js"),m=i.n(g),p=i("./components/gridicon/index.tsx"),h=i("../node_modules/page/page.js"),b=i.n(h),y=i("./blocks/eligibility-warnings/has-localized-text.js"),_=i("./lib/plans/constants.js"),f=i("./lib/analytics/track-component-view/index.jsx"),j=i("./state/analytics/actions/record.js"),v=i("./state/automated-transfer/selectors/index.ts"),w=i("./state/ui/selectors/get-selected-site-id.js"),E=i("./state/ui/selectors/get-selected-site-slug.js"),O=i("../packages/components/dist/esm/card/compact.js"),N=i("../packages/components/dist/esm/button/index.js"),T=i("./components/data/query-atat-eligibility/index.jsx"),x=i("../node_modules/lodash-es/map.js"),S=i("../node_modules/lodash-es/identity.js"),U=i("./components/card-heading/index.jsx"),P=i("./components/notice/index.jsx"),k=i("./components/notice/notice-action.jsx"),I=i("./lib/i18n-utils/browser.js");function C(e){return{BLOCKED_ATOMIC_TRANSFER:{message:Object(y.a)("This site is not currently eligible to install themes and plugins, or activate hosting access. Please contact our support team for help.")?e("This site is not currently eligible to install themes and plugins, or activate hosting access. Please contact our support team for help."):e("This site is not currently eligible to install themes and plugins. Please contact our support team for help."),status:"is-error",contactUrl:Object(I.l)("https://wordpress.com/help/contact")},TRANSFER_ALREADY_EXISTS:{message:e("Installation in progress. Just a minute! Please wait until the installation is finished, then try again."),status:null,contactUrl:null},NO_JETPACK_SITES:{message:e("Try using a different site."),status:"is-error",contactUrl:null},NO_VIP_SITES:{message:e("Try using a different site."),status:"is-error",contactUrl:null},SITE_GRAYLISTED:{message:Object(y.a)("There's an ongoing site dispute. Contact us to review your site's standing and resolve the dispute.")?e("There's an ongoing site dispute. Contact us to review your site's standing and resolve the dispute."):e("Contact us to review your site's standing and resolve the dispute."),status:"is-error",contactUrl:Object(I.l)("https://wordpress.com/support/suspended-blogs/")},NO_SSL_CERTIFICATE:{message:Object(y.a)('Certificate installation in progress. Hold tight! We are setting up a digital certificate to allow secure browsing on your site using "HTTPS".')?e('Certificate installation in progress. Hold tight! We are setting up a digital certificate to allow secure browsing on your site using "HTTPS".'):e('Hold tight! We are setting up a digital certificate to allow secure browsing on your site, using "HTTPS". Please try again in a few minutes.\''),status:null,contactUrl:null}}}function L(e,t){return t.hasOwnProperty(e)}var A=Object(r.c)((function(e){var t=e.context,i=e.holds,s=e.isPlaceholder,n=e.translate,a=function(e,t){return{NO_BUSINESS_PLAN:{title:Object(y.a)("Upgrade to a Business plan")?t("Upgrade to a Business plan"):t("Upgrade to Business"),description:"themes"===e?Object(y.a)("You'll also get to install custom plugins, have more storage, and access live support.")?t("You'll also get to install custom plugins, have more storage, and access live support."):t("This site is not currently eligible to install themes and plugins. Please contact our support team for help."):Object(y.a)("You'll also get to install custom themes, have more storage, and access live support.")?t("You'll also get to install custom themes, have more storage, and access live support."):t("This site is not currently eligible to install themes and plugins. Please contact our support team for help."),supportUrl:null},SITE_PRIVATE:{title:t("Public site needed"),description:t('Change your site\'s Privacy settings to "Public" or "Hidden" (not "Private.")'),supportUrl:Object(I.l)("https://wordpress.com/support/settings/privacy-settings/")},SITE_UNLAUNCHED:{title:t("Launch your site"),description:t("Only you and those you invite can view your site. Launch your site to make it visible to the public."),supportUrl:null},SITE_NOT_PUBLIC:{title:t("Make your site public"),description:t("Only you and those you invite can view your site."),supportUrl:null},NON_ADMIN_USER:{title:t("Site administrator only"),description:t("Only the site administrators can use this feature."),supportUrl:Object(I.l)("https://wordpress.com/support/user-roles/")},NOT_RESOLVING_TO_WPCOM:{title:t("Domain pointing to a different site"),description:t("Your domain is not properly set up to point to your site. Reset your domain's A records in the Domains section to fix this."),supportUrl:Object(I.l)("https://wordpress.com/support/move-domain/setting-custom-a-records/")},EMAIL_UNVERIFIED:{title:t("Confirm your email address"),description:t("Check your email for a message we sent you when you signed up. Click the link inside to confirm your email address. You may have to check your email client's spam folder."),supportUrl:null},EXCESSIVE_DISK_SPACE:{title:t("Upload not available"),description:t("This site is not currently eligible to install themes and plugins. Please contact our support team for help."),supportUrl:Object(I.l)("https://wordpress.com/help/contact")}}}(t,n),o=C(n),r=i.find((function(e){return L(e,o)}));return l.a.createElement(l.a.Fragment,null,!s&&r&&L(r,o)&&l.a.createElement(P.a,{status:o[r].status,text:o[r].message,showDismiss:!1},o[r].contactUrl&&l.a.createElement(k.a,{href:o[r].contactUrl,external:!0},n("Contact us"))),l.a.createElement("div",{className:m()({"eligibility-warnings__hold-list-dim":r}),"data-testid":"HoldList-Card"},l.a.createElement(U.a,null,l.a.createElement("span",{className:"eligibility-warnings__hold-heading"},function(e,t){var i=t("To continue you'll need to:");switch(e){case"plugins":return Object(y.a)("To install plugins you'll need to:")?t("To install plugins you'll need to:"):i;case"themes":return Object(y.a)("To install themes you'll need to:")?t("To install themes you'll need to:"):i;case"hosting":return Object(y.a)("To activate hosting access you'll need to:")?t("To activate hosting access you'll need to:"):i;case"performance":return Object(y.a)("To activate Performance Features you'll need to:")?t("To activate Performance Features you'll need to:"):i;default:return Object(y.a)("To continue you'll need to:")?t("To continue you'll need to:"):i}}(t,n))),s&&l.a.createElement("div",null,l.a.createElement("div",{className:"eligibility-warnings__hold"},l.a.createElement(p.a,{icon:"notice-outline",size:24}),l.a.createElement("div",{className:"eligibility-warnings__message"})),l.a.createElement("div",{className:"eligibility-warnings__hold"},l.a.createElement(p.a,{icon:"notice-outline",size:24}),l.a.createElement("div",{className:"eligibility-warnings__message"}))),!s&&Object(x.a)(i,(function(e){return function(e,t){return t.hasOwnProperty(e)}(e,a)?l.a.createElement("div",{className:"eligibility-warnings__hold",key:e},l.a.createElement("div",{className:"eligibility-warnings__message"},l.a.createElement("div",{className:"eligibility-warnings__message-title"},a[e].title),l.a.createElement("div",{className:"eligibility-warnings__message-description"},a[e].description)),a[e].supportUrl&&l.a.createElement("div",{className:"eligibility-warnings__hold-action"},l.a.createElement(N.a,{compact:!0,disabled:!!r,href:a[e].supportUrl,rel:"noopener noreferrer"},n("Help")))):null}))))})),B=i("./components/external-link/index.jsx"),D=i("./components/action-panel/link.jsx");var H=Object(r.c)((function(e){var t=e.context,i=e.translate,s=e.warnings;return l.a.createElement("div",null,l.a.createElement("div",{className:"eligibility-warnings__warning"},l.a.createElement(p.a,{icon:"notice-outline",size:24}),l.a.createElement("div",{className:"eligibility-warnings__message"},l.a.createElement("span",{className:"eligibility-warnings__message-description"},function(e,t,i){var s=i("By proceeding the following change will be made to the site:","By proceeding the following changes will be made to the site:",{count:t,args:t});switch(e){case"plugins":return Object(y.a)("By installing a plugin the following change will be made to the site:")?i("By installing a plugin the following change will be made to the site:","By installing a plugin the following changes will be made to the site:",{count:t,args:t}):s;case"themes":return Object(y.a)("By installing a theme the following change will be made to the site:")?i("By installing a theme the following change will be made to the site:","By installing a theme the following changes will be made to the site:",{count:t,args:t}):s;case"hosting":return Object(y.a)("By activating hosting access the following change will be made to the site:")?i("By activating hosting access the following change will be made to the site:","By activating hosting access the following changes will be made to the site:",{count:t,args:t}):s;default:return null}}(t,s.length,i)))),Object(x.a)(s,(function(e,t){var s=e.name,n=e.description,a=e.supportUrl;return l.a.createElement("div",{className:"eligibility-warnings__warning",key:t},l.a.createElement("div",{className:"eligibility-warnings__message"},l.a.createElement("span",{className:"eligibility-warnings__message-title"},s),":Â ",l.a.createElement("span",{className:"eligibility-warnings__message-description"},n," ",a&&l.a.createElement(B.a,{href:a,target:"_blank",rel:"noopener noreferrer"},i("Learn more.")))))})),l.a.createElement("div",{className:"eligibility-warnings__warning"},l.a.createElement("div",{className:"eligibility-warnings__message"},l.a.createElement("span",{className:"eligibility-warnings__message-title"},Object(y.a)("Questions?")?i("Questions?"):i("Any Questions?")),":Â ",l.a.createElement("span",{className:"eligibility-warnings__message-description"},Object(y.a)("{{a}}Contact support{{/a}} for help.")?i("{{a}}Contact support{{/a}} for help.",{components:{a:l.a.createElement(D.a,{href:"/help/contact"})}}):l.a.createElement(D.a,{href:"/help/contact"},i("Contact support"))))))})),R=i("./state/sites/launch/actions.js"),q=i("./state/site-settings/selectors.js"),F=i("./state/site-settings/actions.js"),Y=i("./state/selectors/get-request.js"),z=(i("./blocks/eligibility-warnings/style.scss"),function(e){var t=e.className,i=e.ctaName,s=e.context,n=e.feature,a=e.eligibilityData,o=e.isEligible,r=e.isPlaceholder,c=e.onProceed,u=e.recordUpgradeClick,d=e.siteId,g=e.siteSlug,h=e.siteIsLaunching,_=e.siteIsSavingSettings,j=e.launchSite,v=e.makeSitePublic,w=e.translate,E=a.eligibilityWarnings||[],x=a.eligibilityHolds||[],U=E.length>0&&!x.some((function(e){return L(e,C(S.a))})),P=m()("eligibility-warnings",{"eligibility-warnings__placeholder":r,"eligibility-warnings--with-indent":U},t),k=o&&0===x.length&&0===E.length;return l.a.createElement("div",{className:P},l.a.createElement(T.a,{siteId:d}),l.a.createElement(f.a,{eventName:"calypso_automated_transfer_eligibility_show_warnings",eventProperties:{context:s}}),(r||x.length>0)&&l.a.createElement(O.a,null,l.a.createElement(A,{context:s,holds:x,isPlaceholder:r})),k&&l.a.createElement(O.a,null,l.a.createElement("div",{className:"eligibility-warnings__no-conflicts"},l.a.createElement(p.a,{icon:"thumbs-up",size:24}),l.a.createElement("span",null,function(e,t){var i=t("This site is eligible to install plugins and upload themes.");switch(e){case"plugins":case"themes":return Object(y.a)("This site is eligible to install plugins and upload themes.")?t("This site is eligible to install plugins and upload themes."):i;case"hosting":return Object(y.a)("This site is eligible to activate hosting access.")?t("This site is eligible to activate hosting access."):i;default:return Object(y.a)("This site is eligible to continue.")?t("This site is eligible to continue."):i}}(s,w)))),U&&l.a.createElement(O.a,{className:"eligibility-warnings__warnings-card"},l.a.createElement(H,{context:s,warnings:E})),l.a.createElement(O.a,null,l.a.createElement("div",{className:"eligibility-warnings__confirm-buttons"},l.a.createElement(N.a,{primary:!0,disabled:M(o,x)||_||h,busy:h||_,onClick:function(){if(W(x))return u(i,n),void b.a.redirect("/checkout/".concat(g,"/business"));V(x)?j(d):J(x)?v(d):c()}},function(e,t){var i=t("Proceed");if(W(e))return Object(y.a)("Upgrade and continue")?t("Upgrade and continue"):i;if(V(e))return Object(y.a)("Launch your site and continue")?t("Launch your site and continue"):i;if(J(e))return Object(y.a)("Make your site public and continue")?t("Make your site public and continue"):i;return Object(y.a)("Continue")?t("Continue"):i}(x,w)))))});function M(e,t){return!(3===Object(c.a)(["NO_BUSINESS_PLAN","SITE_UNLAUNCHED","SITE_NOT_PUBLIC"],t).length)&&!e}function W(e){return e.includes("NO_BUSINESS_PLAN")}function V(e){return e.includes("SITE_UNLAUNCHED")}function J(e){return e.includes("SITE_NOT_PUBLIC")}z.defaultProps={onProceed:u.a};var K={trackProceed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(j.e)("calypso_automated_transfer_eligibilty_click_proceed",e)},recordUpgradeClick:function(e,t){return Object(j.e)("calypso_banner_cta_click",{cta_name:e,cta_feature:t,cta_size:"regular"})},launchSite:R.a,makeSitePublic:function(e){return Object(F.b)(e,{blog_public:1,wpcom_coming_soon:0,apiVersion:"1.4"})}};t.a=Object(o.c)((function(e,t){var i,s,n=Object(w.a)(e),a=Object(E.a)(e),l=t.eligibilityData||Object(v.a)(e,n);return{eligibilityData:l,isEligible:t.isEligible||Object(v.b)(e,n),isPlaceholder:!(t.eligibilityData||!!l.lastUpdate),siteId:n,siteSlug:a,siteIsLaunching:null!==(i=null===(s=Object(Y.a)(e,Object(R.a)(n)))||void 0===s?void 0:s.isLoading)&&void 0!==i&&i,siteIsSavingSettings:Object(q.d)(e,n)}}),K,(function(e,t,i){var s=null,a="",l="";return Object(d.a)(i.backUrl,"plugins")?(s="plugins",a=_.Xb,l="calypso-plugin-eligibility-upgrade-nudge"):Object(d.a)(i.backUrl,"themes")?(s="themes",a=_.Yb,l="calypso-theme-eligibility-upgrade-nudge"):Object(d.a)(i.backUrl,"hosting")?(s="hosting",a=_.Hb,l="calypso-hosting-eligibility-upgrade-nudge"):Object(d.a)(i.backUrl,"performance")&&(s="performance",a=_.ub,l="calypso-performance-features-activate-nudge"),n()({},i,{},e,{},t,{onProceed:function(){i.onProceed(),t.trackProceed({context:s})},context:s,feature:a,ctaName:l})}))(Object(r.c)(z))},"./blocks/eligibility-warnings/style.scss":function(e,t,i){},"./components/action-panel/link.jsx":function(e,t,i){"use strict";var s=i("../node_modules/react/index.js"),n=i.n(s),a=i("../node_modules/classnames/index.js"),l=i.n(a);t.a=function(e){var t=e.children,i=e.href,s=e.className;return n.a.createElement("a",{href:i,className:l()("action-panel__body-text-link",s)},t)}},"./components/card-heading/index.jsx":function(e,t,i){"use strict";var s=i("../node_modules/prop-types/index.js"),n=i.n(s),a=i("../node_modules/react/index.js"),l=i.n(a),o=i("../node_modules/lodash-es/includes.js"),r=i("../node_modules/classnames/index.js"),c=i.n(r),u=i("./lib/formatting/index.js"),d=(i("./components/card-heading/style.scss"),[54,47,36,32,24,21,16,14,11]);function g(e){var t=e.tagName,i=void 0===t?"h1":t,s=e.size,n=void 0===s?21:s,a=e.children,r={};r["card-heading-"+n]=Object(o.a)(d,n);var g=c()("card-heading",r);return l.a.createElement(i,{className:g},Object(u.d)(a,2))}g.propTypes={tagName:n.a.string,size:n.a.number},t.a=g},"./components/card-heading/style.scss":function(e,t,i){},"./components/data/query-atat-eligibility/index.jsx":function(e,t,i){"use strict";var s=i("../node_modules/@babel/runtime/helpers/classCallCheck.js"),n=i.n(s),a=i("../node_modules/@babel/runtime/helpers/createClass.js"),l=i.n(a),o=i("../node_modules/@babel/runtime/helpers/inherits.js"),r=i.n(o),c=i("../node_modules/@babel/runtime/helpers/createSuper.js"),u=i.n(c),d=i("../node_modules/@babel/runtime/helpers/defineProperty.js"),g=i.n(d),m=i("../node_modules/prop-types/index.js"),p=i.n(m),h=i("../node_modules/react/index.js"),b=i("../node_modules/react-redux/es/index.js"),y=i("./state/automated-transfer/actions.js"),_=function(e){r()(i,e);var t=u()(i);function i(){return n()(this,i),t.apply(this,arguments)}return l()(i,[{key:"UNSAFE_componentWillMount",value:function(){this.request(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){var t=e.requestEligibility,i=e.siteId;i&&t(i)}},{key:"render",value:function(){return null}}]),i}(h.Component);g()(_,"propTypes",{requestEligibility:p.a.func.isRequired,siteId:p.a.number});var f={requestEligibility:y.d};t.a=Object(b.c)(null,f)(_)},"./state/automated-transfer/selectors/index.ts":function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return o}));var s=i("../node_modules/lodash-es/get.js"),n=i("../node_modules/lodash-es/flowRight.js"),a=i("./state/automated-transfer/selectors/get-automated-transfer.ts"),l=(i("./state/automated-transfer/init.js"),Object(n.a)((function(e){return Object(s.a)(e,"eligibility",{lastUpdate:0})}),a.a)),o=Object(n.a)((function(e){return!!Object(s.a)(e,"lastUpdate",0)&&!Object(s.a)(e,"eligibilityHolds",[]).length}),l)}}]);