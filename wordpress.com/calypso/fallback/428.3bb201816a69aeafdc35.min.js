(window.webpackJsonp=window.webpackJsonp||[]).push([[428],{"./lib/analytics/ad-tracking/criteo.js":function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return f}));var r=n("../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),a=n.n(r),i=n("../node_modules/lodash-es/clone.js"),o=n("../node_modules/lodash-es/cloneDeep.js"),s=n("./lib/analytics/utils/is-ad-tracking-allowed.js"),c=n("../packages/calypso-analytics/dist/esm/index.js"),u=n("./lib/analytics/ad-tracking/constants.js"),d=n("./lib/analytics/ad-tracking/load-tracking-scripts.js");n("./lib/analytics/ad-tracking/setup.js");function l(t,e){return p.apply(this,arguments)}function p(){return(p=a()(regeneratorRuntime.mark((function t(e,n){var r,a,l,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(s.a)()&&u.C){t.next=3;break}return Object(u.z)("recordInCriteo: [Skipping] ad tracking is not allowed"),t.abrupt("return");case 3:return t.next=5,Object(d.a)();case 5:a=[],l=Object(c.b)(),a.push({event:"setAccount",account:u.v.criteo}),a.push({event:"setSiteType",type:b()}),l&&a.push({event:"setEmail",email:[l.hashedPii.email]}),(p=Object(i.a)(n)).event=e,a.push(p),Object(u.z)("recordInCriteo: "+e,Object(o.a)(a)),(r=window.criteo_q).push.apply(r,a);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){if(Object(s.a)()&&u.C){var t=["viewItem",{item:"1"}];Object(u.z)("recordPlansViewInCriteo:",t),l.apply(void 0,t)}}function h(t){if(Object(s.a)()&&u.C&&!t.is_signup){var e=["viewBasket",{currency:t.currency,item:f(t)}];Object(u.z)("recordViewCheckoutInCriteo:",e),l.apply(void 0,e)}}function f(t){return t.products.map((function(t){return{id:t.product_id,price:t.cost,quantity:t.volume}}))}function b(){return/iPad/.test(window.navigator.userAgent)?"t":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Silk/.test(window.navigator.userAgent)?"m":"d"}},"./lib/analytics/utils/cost-to-usd.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r={AED:3.673181,AFN:77.277444,ALL:110.685,AMD:485.718536,ANG:1.857145,AOA:318.1145,ARS:42.996883,AUD:1.39546,AWG:1.801247,AZN:1.7025,BAM:1.73465,BBD:2,BDT:84.350813,BGN:1.7345,BHD:.377065,BIF:1829.456861,BMD:1,BND:1.350704,BOB:6.910218,BRL:3.825491,BSD:1,BTC:.000188070491,BTN:69.241,BWP:10.571,BYN:2.12125,BZD:2.01582,CAD:1.331913,CDF:1640.538151,CHF:1.002295,CLF:.024214,CLP:662.405194,CNH:6.718409,CNY:6.7164,COP:3102.756403,CRC:603.878956,CUC:1,CUP:25.75,CVE:98.34575,CZK:22.699242,DJF:178,DKK:6.620894,DOP:50.601863,DZD:119.094464,EGP:17.321,ERN:14.996695,ETB:28.87,EUR:.886846,FJD:2.135399,FKP:.763495,GBP:.763495,GEL:2.695,GGP:.763495,GHS:5.18885,GIP:.763495,GMD:49.5025,GNF:9126.453332,GTQ:7.6503,GYD:207.888008,HKD:7.83635,HNL:24.53,HRK:6.587,HTG:84.642,HUF:285.120971,IDR:14140.665178,ILS:3.57935,IMP:.763495,INR:69.1502,IQD:1190,IRR:42105,ISK:119.899897,JEP:.763495,JMD:129.28,JOD:.709001,JPY:110.9875,KES:101.11,KGS:68.708365,KHR:4021.592884,KMF:437.375,KPW:900,KRW:1137.899434,KWD:.304268,KYD:.833459,KZT:378.893401,LAK:8630.377846,LBP:1509.5,LKR:174.733735,LRD:164.499779,LSL:14.1,LYD:1.391411,MAD:9.622,MDL:17.513226,MGA:3642.597503,MKD:54.731723,MMK:1510.092364,MNT:2511.632328,MOP:8.07298,MRO:357,MRU:36.55,MUR:34.9505,MVR:15.424994,MWK:728.565,MXN:18.8201,MYR:4.1106,MZN:64.576343,NAD:14.11,NGN:360.105269,NIO:33.04,NOK:8.49614,NPR:110.785702,NZD:1.47776,OMR:.38502,PAB:1,PEN:3.294475,PGK:3.374968,PHP:51.872601,PKR:141.62807,PLN:3.79605,PYG:6186.225628,QAR:3.641793,RON:4.217807,RSD:104.64086,RUB:64.2743,RWF:904.135,SAR:3.75,SBD:8.21464,SCR:13.675964,SDG:47.613574,SEK:9.261891,SGD:1.351801,SHP:.763495,SLL:8390,SOS:578.545,SRD:7.458,SSP:130.2634,STD:21050.59961,STN:21.8,SVC:8.751385,SYP:514.993308,SZL:13.972654,THB:31.75,TJS:9.434819,TMT:3.509961,TND:3.0117,TOP:2.267415,TRY:5.683728,TTD:6.768744,TWD:30.840434,TZS:2315.252864,UAH:26.819481,UGX:3758.198709,USD:1,UYU:33.969037,UZS:8427.57062,VEF:248487.642241,VES:3305.47961,VND:23197.866398,VUV:111.269352,WST:2.607815,XAF:581.732894,XAG:.06563851,XAU:76444e-8,XCD:2.70255,XDR:.717354,XOF:581.732894,XPD:71959e-8,XPF:105.828888,XPT:.00110645,YER:250.35,ZAR:13.909458,ZMW:12.110083,ZWL:322.355011};function a(t,e){return function(t){return-1!==Object.keys(r).indexOf(t)}(e)?(t/r[e]).toFixed(3):null}},"./lib/cart-values/index.js":function(t,e,n){"use strict";n.d(e,"p",(function(){return g})),n.d(e,"a",(function(){return m})),n.d(e,"q",(function(){return y})),n.d(e,"h",(function(){return O})),n.d(e,"i",(function(){return j})),n.d(e,"r",(function(){return v})),n.d(e,"t",(function(){return S})),n.d(e,"s",(function(){return C})),n.d(e,"b",(function(){return P})),n.d(e,"g",(function(){return T})),n.d(e,"l",(function(){return A})),n.d(e,"k",(function(){return R})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return k})),n.d(e,"e",(function(){return D})),n.d(e,"n",(function(){return M})),n.d(e,"o",(function(){return E})),n.d(e,"m",(function(){return L})),n.d(e,"f",(function(){return B})),n.d(e,"j",(function(){return N})),n.d(e,"u",(function(){return I}));var r=n("../node_modules/url/url.js"),a=n.n(r),i=n("../node_modules/lodash-es/get.js"),o=n("../node_modules/lodash-es/assignIn.js"),s=n("../node_modules/lodash-es/invert.js"),c=n("../node_modules/lodash-es/isArray.js"),u=n("../node_modules/immutability-helper/index.js"),d=n.n(u),l=n("../packages/i18n-calypso/dist/esm/index.js"),p=n("./config/index.js"),_=n("./lib/cart-values/cart-items.js"),h=n("./lib/products-values/index.js"),f=n("./lib/web-payment/index.js");Object(u.extend)("$auto",(function(t,e){return e?d()(e,t):d()({},t)}));var b={alipay:"WPCOM_Billing_Stripe_Source_Alipay",bancontact:"WPCOM_Billing_Stripe_Source_Bancontact","credit-card":"WPCOM_Billing_MoneyPress_Paygate",ebanx:"WPCOM_Billing_Ebanx",eps:"WPCOM_Billing_Stripe_Source_Eps",giropay:"WPCOM_Billing_Stripe_Source_Giropay",id_wallet:"WPCOM_Billing_Dlocal_Redirect_Indonesia_Wallet",ideal:"WPCOM_Billing_Stripe_Source_Ideal",netbanking:"WPCOM_Billing_Dlocal_Redirect_India_Netbanking",paypal:"WPCOM_Billing_PayPal_Express",p24:"WPCOM_Billing_Stripe_Source_P24","brazil-tef":"WPCOM_Billing_Ebanx_Redirect_Brazil_Tef",wechat:"WPCOM_Billing_Stripe_Source_Wechat","web-payment":"WPCOM_Billing_Web_Payment",sofort:"WPCOM_Billing_Stripe_Source_Sofort",stripe:"WPCOM_Billing_Stripe_Payment_Method"};function g(t){var e=t.coupon,n=t.is_coupon_applied,r=t.is_coupon_removed,i=t.currency,o=t.temporary,s=t.extra,c=t.products,u=t.tax,d=!(e||n||r||"undefined"==typeof document),l=d?a.a.parse(document.URL,!0).query.coupon:"";return Object.assign({coupon:e,is_coupon_applied:n,is_coupon_removed:r,currency:i,tax:u,temporary:o,extra:s,products:c.map((function(t){return{product_id:t.product_id,meta:t.meta,free_trial:t.free_trial,volume:t.volume,extra:t.extra}}))},d&&l&&{coupon:l,is_coupon_applied:!1})}function m(t){return function(e){return d()(e,{coupon:{$set:t},is_coupon_applied:{$set:!1},$unset:["is_coupon_removed"]})}}function y(){return function(t){return d()(t,{coupon:{$set:""},is_coupon_applied:{$set:!1},$merge:{is_coupon_removed:!0}})}}var O=function(t){return Object(i.a)(t,["tax","location","country_code"])},j=function(t){return Object(i.a)(t,["tax","location","postal_code"])};function v(t){return function(e){return d()(e,{$auto:{tax:{$auto:{location:{$auto:{country_code:{$set:t}}}}}}})}}function S(t){return function(e){return d()(e,{$auto:{tax:{$auto:{location:{$auto:{postal_code:{$set:t}}}}}}})}}function C(t){var e=t.postalCode,n=t.countryCode;return function(t){return d()(t,{$auto:{tax:{$auto:{location:{$auto:{$set:{postal_code:e,country_code:n}}}}}}})}}function P(t,e){return!Object(h.o)(e)&&(!Object(_.R)(t)||!Object(h.u)(e))}function T(t,e){t=t||{};var n=(e=e||{}).messages||[];if(!t||!t.client_metadata||!e.client_metadata)return n;var r=t.client_metadata.last_server_response_date,a=e.client_metadata.last_server_response_date;return new Date(a)>new Date(r)?n:[]}function A(t){return!Object(_.F)(t)&&!Object(_.P)(t,"wordpress-com-credits")&&t.total_cost<=t.credits&&t.total_cost>0}function R(t){return 0===t.total_cost&&!Object(_.F)(t)}function w(t,e){return d()(t,{products:{$apply:function(t){return t&&t.map((function(t){return k(t,e)}))}}})}function k(t,e){var n=e[t.product_slug],r=Object(h.bb)(n);return Object(o.a)({},t,r)}function D(t){var e=t.allowed_payment_methods.slice(0);e=(e=(e=e.filter((function(t){return"WPCOM_Billing_Ebanx"!==t}))).filter((function(t){return"WPCOM_Billing_Stripe_Payment_Method"!==t}))).filter((function(t){return"WPCOM_Billing_Web_Payment"!==t||null!==Object(f.c)()}));var n=Object(s.a)(b);return e.map((function(t){return n[t]}))}function M(t){return b[t]||""}function E(t){return{alipay:"Alipay",bancontact:"Bancontact","credit-card":Object(l.f)("Credit or debit card"),eps:"EPS",giropay:"Giropay",id_wallet:"OVO",ideal:"iDEAL",netbanking:"Net Banking",paypal:"PayPal",p24:"Przelewy24","brazil-tef":"Transferência bancária","web-payment":"Apple Pay",wechat:Object(l.f)("WeChat Pay",{comment:"Name for WeChat Pay - https://pay.weixin.qq.com/"}),sofort:"Sofort"}[t]||t}function L(t,e){var n=M(e);return""!==n&&(!(["alipay","bancontact","eps","giropay","ideal","netbanking","paypal","p24","brazil-tef","wechat","sofort"].indexOf(e)>=0&&!p.a.isEnabled("upgrades/redirect-payments"))&&(("web-payment"!==e||null!==Object(f.c)())&&(Object(c.a)(t.allowed_payment_methods)&&t.allowed_payment_methods.indexOf(n)>=0)))}function B(t){return t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")}function N(t){return!(!t||!t.has_pending_payment)}function I(t){return Object(i.a)(t,["tax","display_taxes"],!1)}},"./lib/cart/action-types.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return p})),n.d(e,"k",(function(){return _})),n.d(e,"l",(function(){return h}));var r="CART_COUPON_APPLY",a="CART_COUPON_REMOVE",i="CART_DISABLE",o="CART_GOOGLE_APPS_REGISTRATION_DATA_ADD",s="CART_ITEM_REMOVE",c="CART_ITEM_REPLACE",u="CART_ITEMS_ADD",d="CART_ITEMS_REPLACE_ALL",l="CART_PRIVACY_PROTECTION_ADD",p="CART_PRIVACY_PROTECTION_REMOVE",_="CART_TAX_COUNTRY_CODE_SET",h="CART_TAX_POSTAL_CODE_SET"},"./lib/cart/store/index.js":function(t,e,n){"use strict";var r=n("../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(r),i=n("../node_modules/lodash-es/assign.js"),o=n("../node_modules/lodash-es/flow.js"),s=n("../node_modules/lodash-es/has.js"),c=n("../node_modules/lodash-es/get.js"),u=n("./lib/cart/action-types.js"),d=n("./lib/transaction/action-types.js"),l=n("./lib/mixins/emitter/index.js"),p=n("../node_modules/@babel/runtime/helpers/objectSpread2.js"),_=n.n(p),h=n("../node_modules/lodash-es/flowRight.js"),f=n("./dispatcher/index.js"),b=n("../node_modules/debug/src/browser.js"),g=n.n(b),m=n("./lib/cart-values/index.js"),y=g()("calypso:cart-data:cart-synchronizer");function O(t){return Object(i.a)({},t,{client_metadata:{last_server_response_date:(new Date).toISOString()},products:(n=t.products,n.map((function(t){return Object(i.a)({},t,{product_id:parseInt(t.product_id,10)})}))),tax:(e=t.tax,_()({},e,{location:_()({},Object(c.a)(e,"location"))}))});var e,n}function j(t,e){if(!(this instanceof j))return new j(t,e);this._cartKey=t,this._wpcom=e,this._latestValue=null,this._hasLoadedFromServer=!1,this._activeRequest=null,this._queuedChanges=null,this._paused=!1,this.dispatchToken=f.a.register(this.handleDispatch.bind(this))}Object(l.a)(j.prototype),j.prototype.handleDispatch=function(t){var e=t.action;switch(e.type){case d.e:e.step.first&&!e.step.last&&this.pause(),e.step.last&&!e.step.first&&this.resume()}},j.prototype.update=function(t){this._hasLoadedFromServer?(this._activeRequest&&"canceled"!==this._activeRequest.state&&(this._activeRequest.state="canceled"),this._latestValue=t(this._latestValue),this._performRequest("update",this._postToServer.bind(this))):this._enqueueChange(t)},j.prototype.pause=function(){this._paused=!0},j.prototype.resume=function(){this._paused=!1},j.prototype._enqueueChange=function(t){this._queuedChanges?this._queuedChanges=Object(h.a)(t,this._queuedChanges):this._queuedChanges=t},j.prototype._processQueuedChanges=function(){this._queuedChanges&&(this._activeRequest&&"canceled"!==this._activeRequest.state&&(this._activeRequest.state="canceled"),this._latestValue=this._queuedChanges(this._latestValue),this._queuedChanges=null,this._performRequest("update",this._postToServer.bind(this)))},j.prototype._postToServer=function(t){this._wpcom.setCart(this._cartKey,Object(m.p)(this._latestValue),(function(e,n){e?t(e):t(null,O(n))}))},j.prototype._poll=function(){this._performRequest("poll",this._getFromServer.bind(this))},j.prototype.fetch=function(){this._performRequest("fetch",this._getFromServer.bind(this))},j.prototype._getFromServer=function(t){this._wpcom.getCart(this._cartKey,(function(e,n){e?t(e):t(null,O(n))}))};var v=0;j.prototype._performRequest=function(t,e){if("poll"!==t||!this._paused){if(this._activeRequest&&"pending"===this._activeRequest.state)return!1;var n={id:v++,type:t,state:"pending"};this._activeRequest=n,y(n.id+": starting "+n.type),e(function(t,e){if("canceled"!==n.state){if(t)throw t;y(n.id+": finishing "+n.type),this._latestValue=e,n.state="completed",this._hasLoadedFromServer||(this._processQueuedChanges(),this._hasLoadedFromServer=!0),this.emit("change")}else y(n.id+": canceled "+n.type)}.bind(this))}},j.prototype.getLatestValue=function(){if(!this._hasLoadedFromServer)throw new Error("Value cannot be read before fetching from the server at least once.");return this._latestValue},j.prototype.hasLoadedFromServer=function(){return this._hasLoadedFromServer},j.prototype.hasPendingServerUpdates=function(){return this._activeRequest&&"update"===this._activeRequest.type&&"pending"===this._activeRequest.state};var S=j,C=n("./lib/data-poller/index.js"),P=n("../node_modules/lodash-es/forEach.js"),T=n("../node_modules/lodash-es/differenceWith.js"),A=n("../node_modules/lodash-es/isEqual.js"),R=n("../node_modules/lodash-es/omit.js"),w=n("./lib/analytics/tracks.js"),k=n("./lib/analytics/utils/cost-to-usd.js"),D=n("../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),M=n.n(D),E=n("./lib/analytics/utils/refresh-country-code-cookie-gdpr.js"),L=n("./lib/analytics/utils/is-ad-tracking-allowed.js"),B=n("./lib/analytics/ad-tracking/constants.js"),N=n("./lib/analytics/ad-tracking/load-tracking-scripts.js"),I=n("./lib/analytics/ad-tracking/floodlight.js"),x=n("./lib/analytics/ad-tracking/criteo.js");n("./lib/analytics/ad-tracking/setup.js");function W(){return(W=M()(regeneratorRuntime.mark((function t(e){var n,r,i,o,s,c,u,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.a)();case 2:if(Object(L.a)()){t.next=5;break}return Object(B.z)("recordAddToCart: [Skipping] ad tracking is not allowed"),t.abrupt("return");case 5:return t.next=7,Object(N.a)();case 7:Object(B.z)("recordAddToCart:",e),B.R&&(r=["event","conversion",{send_to:B.v.wpcomGoogleAdsGtagAddToCart}],Object(B.z)("recordAddToCart: [Google Ads Gtag] WPCom",r),(n=window).gtag.apply(n,r)),B.E&&(s=["trackSingle",B.v.facebookInit,"AddToCart",{product_slug:e.product_slug,free_trial:Boolean(e.free_trial)}],Object(B.z)("recordAddToCart: [Facebook]",s),(i=window).fbq.apply(i,a()(s)),s=["trackSingle",B.v.facebookJetpackInit,"AddToCart",{product_slug:e.product_slug,free_trial:Boolean(e.free_trial)}],Object(B.z)("recordAddToCart: [Jetpack]",s),(o=window).fbq.apply(o,a()(s))),B.B&&(c={ec:"addtocart",el:e.product_slug},Object(B.z)("recordAddToCart: [Bing]",c),window.uetq.push(c)),B.F&&(Object(B.z)("recordAddToCart: [Floodlight]"),Object(I.b)({u2:e.product_name,send_to:"DC-6355556/wordp0/addto0+standard"})),B.C&&(u=["viewItem",{item:e.product_id}],Object(B.z)("recordAddToCart: [Criteo]",u),x.b.apply(void 0,u)),B.N&&(l=["track","addtocart",{value:e.cost,currency:e.currency,line_items:[{product_name:e.product_name,product_id:e.product_slug}]}],Object(B.z)("recordAddToCart: [Pinterest]",l),(d=window).pintrk.apply(d,l)),Object(B.z)("recordAddToCart: dataLayer:",JSON.stringify(window.dataLayer,null,2));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var F=n("./lib/analytics/ga.js");function q(t){var e=t.cartItem,n=Object(k.a)(e.cost,e.currency);Object(F.a)("Checkout","calypso_cart_product_add","",n||void 0),function(t){W.apply(this,arguments)}(e)}var G=n("./lib/cart-values/cart-items.js");function z(t){return Object(R.a)(t,["extra"])}function K(t){Object(w.recordTracksEvent)("calypso_cart_product_add",z(t)),q({cartItem:t})}function V(t){Object(w.recordTracksEvent)("calypso_cart_product_remove",z(t))}var U=n("./lib/products-list/index.js"),$=n("./lib/wp/browser.js"),H=n("./lib/redux-bridge/index.js"),Y=n("./state/ui/selectors/get-selected-site-id.js"),J=n("./state/current-user/selectors.js"),X=n("./state/ui/payment/reducer.js"),Z=Object(U.a)(),Q=$.a.undocumented(),tt=null,et=null,nt=null,rt={get:function(){var t=at()?et.getLatestValue():{};return Object(i.a)({},t,{hasLoadedFromServer:at(),hasPendingServerUpdates:et&&et.hasPendingServerUpdates()})},setSelectedSiteId:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var n=t||"no-site";tt!==n&&(tt=n,et&&nt&&(C.a.remove(nt),et.off("change",it)),(et=S(tt,Q)).on("change",it),nt=C.a.add(rt,et._poll.bind(et)))}}};function at(){return et&&et.hasLoadedFromServer()}function it(){rt.emit("change")}function ot(t){var e=function(e){return Object(m.c)(t(e),Z.get())},n=rt.get(),r=e(n);et&&et.update(e),function(t,e){var n=Object(G.j)(t),r=Object(G.j)(e);Object(P.a)(Object(T.a)(r,n,A.a),K),Object(P.a)(Object(T.a)(n,r,A.a),V)}(n,r)}Object(l.a)(rt),rt.dispatchToken=f.a.register((function(t){var e=t.action;switch(e.type){case u.c:et&&nt&&(C.a.remove(nt),et.off("change",it)),et=null,nt=null,tt=null;break;case u.i:ot(Object(G.c)(rt.get()));break;case u.j:ot(Object(G.gb)(rt.get()));break;case u.d:ot(Object(G.i)(rt.get(),e.registrationData));break;case u.e:ot(o.a.apply(void 0,a()(e.cartItems.map((function(t){return Object(G.a)(t)})))));break;case u.f:ot(o.a.apply(void 0,[Object(G.d)()].concat(a()(e.cartItems.map((function(t){return Object(G.b)(t)}))))));break;case u.a:ot(Object(m.a)(e.coupon));break;case u.b:ot(Object(m.q)());break;case u.g:ot(Object(G.fb)(e.cartItem,rt.get(),e.domainsWithPlansOnly));break;case u.h:ot(Object(G.hb)(e.oldItem,e.newItem));break;case d.b:var n=e.rawDetails;Object(s.a)(n,"country")&&ot(Object(m.r)(Object(c.a)(n,"country"))),Object(s.a)(n,"postal-code")&&ot(Object(m.t)(Object(c.a)(n,"postal-code")));break;case d.c:var r,i;switch(Object(c.a)(e,["payment","paymentMethod"])){case"WPCOM_Billing_MoneyPress_Stored":r=Object(X.b)(e,"card_zip"),i=Object(X.b)(e,"country_code");break;case"WPCOM_Billing_WPCOM":r=null,i=null;break;case"WPCOM_Billing_Ebanx":case"WPCOM_Billing_Web_Payment":case"WPCOM_Billing_Stripe_Payment_Method":var l=Object(c.a)(e,"payment.newCardDetails",{});r=l["postal-code"],i=l.country;break;default:!function(t){var e=Object(c.a)(t,"payment"),n={payment_method:Object(c.a)(e,"paymentMethod","missing"),extra:JSON.stringify(e?Object(R.a)(e,"paymentMethod"):t)};Object(w.recordTracksEvent)("calypso_cart_unrecognized_payment_method",n)}(e),r=null,i=null}ot(Object(m.s)({postalCode:r,countryCode:i}));break;case u.k:ot(Object(m.r)(e.countryCode));break;case u.l:ot(Object(m.t)(e.postalCode))}}));e.a=rt;Object(H.a)().then((function(t){var e=Object(J.n)(t.getState()),n=Object(Y.a)(t.getState());rt.setSelectedSiteId(n,e),t.subscribe(function(t,e,n){var r=e(t.getState());return function(){var a=e(t.getState());a!==r&&(r=a,n(a))}}(t,Y.a,rt.setSelectedSiteId))}))},"./lib/data-poller/index.js":function(t,e,n){"use strict";var r=n("../node_modules/debug/src/browser.js"),a=n.n(r),i=a()("calypso:poller"),o=0;function s(t,e,n){n=n||{},this.id=o,o++,this.paused=!1,this.startOnFirstChange=this.startOnFirstChange.bind(this),this.stopOnNoChangeListeners=this.stopOnNoChangeListeners.bind(this),this.interval=n.interval||3e4,this.pauseWhenHidden=!0,"pauseWhenHidden"in n&&(this.pauseWhenHidden=n.pauseWhenHidden),void 0!==n.leading?this.leading=!!n.leading:this.leading=!0,this.dataStore=t,this.fetcher=e,this.dataStore.on("newListener",this.startOnFirstChange),this.dataStore.on("removeListener",this.stopOnNoChangeListeners),this.dataStore.listeners("change").length>0&&this.start()}s.prototype.start=function(){var t=function(){i("Calling fetcher for %o",{fetcher:this.fetcher,store:this.dataStore}),this.fetch()}.bind(this);this.timer||(i("Starting poller for %o",this.dataStore),this.leading&&t(),this.timer=setInterval(t,this.interval),this.paused=!1)},s.prototype.stop=function(){this.timer&&(i("Stopping poller for %o",this.dataStore),clearInterval(this.timer),this.timer=!1,this.paused=!1)},s.prototype.fetch=function(){"string"==typeof this.fetcher?this.dataStore[this.fetcher]():this.fetcher.call(null)},s.prototype.clear=function(){this.dataStore.off("newListener",this.startOnFirstChange),this.dataStore.off("removeListener",this.stopOnNoChangeListeners),this.stop()},s.prototype.startOnFirstChange=function(t){"change"===t&&this.start()},s.prototype.stopOnNoChangeListeners=function(t){"change"===t&&0===this.dataStore.listeners("change").length&&this.stop()};var c=s,u=a()("calypso:poller"),d={};function l(){var t,e;for(e in u("Pausing active pollers"),d)(t=d[e]).timer&&t.pauseWhenHidden&&(t.stop(),t.paused=!0)}function p(){var t,e;for(e in u("Resuming paused pollers"),d)(t=d[e]).paused&&t.start()}function _(){document.hidden?l():p()}e.a={add:function(t,e,n){var r=new c(t,e,n);return 0===r.id&&document&&document.addEventListener("visibilitychange",_,!1),d[r.id]=r,u("Adding poller %o",r),r},remove:function(t){"object"!=typeof t&&d[t]&&(t=d[t]),t.clear(),u("Removing poller %o",t),delete d[t.id]},pauseAll:l,resumePaused:p}},"./lib/products-list/index.js":function(t,e,n){"use strict";var r=n("../node_modules/debug/src/browser.js"),a=n.n(r),i=n("./lib/wp/browser.js"),o=n("./lib/mixins/emitter/index.js"),s=a()("calypso:ProductsList");function c(){if(!(this instanceof c))return new c;this.initialized=!1}Object(o.a)(c.prototype),c.prototype.get=function(){var t;if(!this.data){if(s("First time loading ProductsList, check store"),"undefined"!=typeof localStorage)try{t=JSON.parse(localStorage.getItem("ProductsList"))}catch(t){}t?this.initialize(t):this.data={},this.fetch()}return this.data},c.prototype.fetch=function(){s("getting ProductsList from api"),this.isFetching=!0,i.a.undocumented().getProducts(function(t,e){if(t)s("error fetching ProductsList from api",t);else{var n=e;if(s("ProductsList fetched from api:",n),this.initialized?this.data=n:this.initialize(n),this.isFetching=!1,this.emit("change"),"undefined"!=typeof localStorage)try{localStorage.setItem("ProductsList",JSON.stringify(n))}catch(t){}}}.bind(this))},c.prototype.initialize=function(t){this.data=t,this.initialized=!0},c.prototype.hasLoadedFromServer=function(){return this.initialized};var u=new c;e.a=function(){return u.hasLoadedFromServer()||u.isFetching||u.get(),u}},"./lib/transaction/action-types.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return c}));var r="TRANSACTION_DOMAIN_DETAILS_SET",a="TRANSACTION_NEW_CREDIT_CARD_DETAILS_SET",i="TRANSACTION_PAYMENT_SET",o="TRANSACTION_RESET",s="TRANSACTION_STEP_SET",c="TRANSACTION_STRIPE_SET"},"./lib/web-payment/index.js":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c}));var r=n("./config/index.js"),a="basic-card",i="https://apple.com/apple-pay";function o(){return!!r.a.isEnabled("my-sites/checkout/web-payment/apple-pay")&&(!!window.PaymentRequest&&(void 0===o.canMakePayments&&(o.canMakePayments=Boolean(window.ApplePaySession&&window.ApplePaySession.canMakePayments())),o.canMakePayments))}function s(){return o()?i:r.a.isEnabled("my-sites/checkout/web-payment/basic-card")&&window.PaymentRequest?a:null}function c(t,e){switch(t){case a:return e("Browser wallet");case i:return"Apple Pay";default:return t}}}}]);