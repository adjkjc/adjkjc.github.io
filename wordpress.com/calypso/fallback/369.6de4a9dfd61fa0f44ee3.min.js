(window.webpackJsonp=window.webpackJsonp||[]).push([[369],{"./components/data/query-canonical-theme/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/prop-types/index.js"),r=s.n(n),i=s("../node_modules/react/index.js"),o=s.n(i),a=s("../node_modules/react-redux/es/index.js"),c=s("./components/data/query-theme/index.jsx"),u=s("./state/themes/selectors/is-wpcom-theme.js"),l=s("./state/themes/selectors/is-wporg-theme.js"),m=function(e){var t=e.siteId,s=e.themeId,n=e.isWpcom,r=e.isWporg;return o.a.createElement(i.Fragment,null,o.a.createElement(c.a,{themeId:s,siteId:"wpcom"}),!n&&o.a.createElement(c.a,{themeId:s,siteId:"wporg"}),!n&&!r&&t&&o.a.createElement(c.a,{themeId:s,siteId:t}))};m.propTypes={siteId:r.a.number,themeId:r.a.string.isRequired,isWpcom:r.a.bool.isRequired,isWporg:r.a.bool.isRequired},t.a=Object(a.c)((function(e,t){var s=t.themeId;return{isWpcom:Object(u.a)(e,s),isWporg:Object(l.a)(e,s)}}))(m)},"./components/data/query-site-plans/index.jsx":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("../node_modules/prop-types/index.js"),r=s.n(n),i=s("../node_modules/react/index.js"),o=s("../node_modules/react-redux/es/index.js"),a=s("./state/sites/plans/selectors.js"),c=s("./state/sites/plans/actions.js");function u(e){var t=e.siteId,s=Object(o.d)();return Object(i.useEffect)((function(){s(function(e){return function(t,s){e&&!Object(a.l)(s(),e)&&t(Object(c.b)(e))}}(t))}),[s,t]),null}u.propTypes={siteId:r.a.number}},"./components/data/query-site-purchases/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/inherits.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/createSuper.js"),l=s.n(u),m=s("../node_modules/prop-types/index.js"),d=s.n(m),h=s("../node_modules/react/index.js"),p=s("../node_modules/react-redux/es/index.js"),j=s("./state/purchases/selectors.js"),f=s("./state/purchases/actions.js"),b=function(e){c()(s,e);var t=l()(s);function s(){return r()(this,s),t.apply(this,arguments)}return o()(s,[{key:"requestSitePurchases",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.siteId&&!e.requesting&&this.props.fetchSitePurchases(e.siteId)}},{key:"UNSAFE_componentWillMount",value:function(){this.requestSitePurchases()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.requestSitePurchases(e)}},{key:"render",value:function(){return null}}]),s}(h.Component);b.propTypes={siteId:d.a.number,requesting:d.a.bool,fetchSitePurchases:d.a.func.isRequired},t.a=Object(p.c)((function(e){return{requesting:Object(j.k)(e)}}),{fetchSitePurchases:f.b})(b)},"./components/data/query-theme-filters/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/inherits.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/createSuper.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),d=s.n(m),h=s("../node_modules/prop-types/index.js"),p=s.n(h),j=s("../node_modules/react/index.js"),f=s("../node_modules/react-redux/es/index.js"),b=s("./state/themes/actions/request-theme-filters.js"),g=function(e){c()(s,e);var t=l()(s);function s(){return r()(this,s),t.apply(this,arguments)}return o()(s,[{key:"componentDidMount",value:function(){this.props.requestThemeFilters()}},{key:"render",value:function(){return null}}]),s}(j.Component);d()(g,"propTypes",{requestThemeFilters:p.a.func.isRequired}),t.a=Object(f.c)(null,{requestThemeFilters:b.a})(g)},"./components/data/query-theme/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/inherits.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/createSuper.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),d=s.n(m),h=s("../node_modules/prop-types/index.js"),p=s.n(h),j=s("../node_modules/react/index.js"),f=s("../node_modules/react-redux/es/index.js"),b=s("./state/themes/actions/request-theme.js");s("./state/themes/init.js");function g(e,t,s){var n,r;return null!==(n=null===(r=e.themes.themeRequests[t])||void 0===r?void 0:r[s])&&void 0!==n&&n}var v=function(e){c()(s,e);var t=l()(s);function s(){return r()(this,s),t.apply(this,arguments)}return o()(s,[{key:"componentDidMount",value:function(){this.request(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.themeId===e.themeId||this.request(e)}},{key:"request",value:function(e){e.isRequesting||e.requestTheme(e.themeId,e.siteId)}},{key:"render",value:function(){return null}}]),s}(j.Component);d()(v,"propTypes",{siteId:p.a.oneOfType([p.a.number,p.a.oneOf(["wpcom","wporg"])]).isRequired,themeId:p.a.string.isRequired,isRequesting:p.a.bool.isRequired,requestTheme:p.a.func.isRequired});t.a=Object(f.c)((function(e,t){return{isRequesting:g(e,t.siteId,t.themeId)}}),{requestTheme:b.a})(v)},"./components/popover/menu.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(h),j=s("../node_modules/react/index.js"),f=s.n(j),b=s("../node_modules/prop-types/index.js"),g=s.n(b),v=s("./components/popover/index.jsx"),O=function(e){return"HR"===e.tagName},y=function(e){l()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),p()(c()(e),"menu",f.a.createRef()),p()(c()(e),"_setPropsOnChild",(function(t){if(null==t)return t;var s=t.props,n=s.action,r=s.onClick;return f.a.cloneElement(t,{action:null,onClick:function(){r&&r(),e._onClose(n)}})})),p()(c()(e),"_onShow",(function(){var t=e.menu.current;e._previouslyFocusedElement=document.activeElement,t&&t.focus()})),p()(c()(e),"_getClosestSibling",(function(t){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.menu.current,r=n.firstChild,i=n.lastChild;if(s||(r=n.lastChild,i=n.firstChild),t===n)return r;var o=t[s?"nextSibling":"previousSibling"],a=o||i;return O(a)?e._getClosestSibling(a,s):a})),p()(c()(e),"_onKeyDown",(function(t){var s,n=t.target,r=!1;switch(t.keyCode){case 9:e.props.onClose(),r=!0;break;case 38:s=e._getClosestSibling(n,!1),r=!0;break;case 40:s=e._getClosestSibling(n,!0),r=!0}s&&s.focus(),r&&t.preventDefault()})),p()(c()(e),"_onClose",(function(t){e._previouslyFocusedElement&&(e._previouslyFocusedElement.focus(),e._previouslyFocusedElement=null),e.props.onClose&&e.props.onClose(t)})),e}return o()(s,[{key:"componentWillUnmount",value:function(){this._previouslyFocusedElement=null}},{key:"render",value:function(){var e=this.props,t=e.popoverComponent,s=e.autoPosition,n=e.className,r=e.context,i=e.customPosition,o=e.isVisible,a=e.popoverTitle,c=e.position;return f.a.createElement(t,{onClose:this._onClose,onShow:this._onShow,autoPosition:s,className:n,context:r,customPosition:i,isVisible:o,popoverTitle:a,position:c},f.a.createElement("div",{ref:this.menu,role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},f.a.Children.map(this.props.children,this._setPropsOnChild,this)))}}]),s}(j.Component);p()(y,"propTypes",{autoPosition:g.a.bool,isVisible:g.a.bool.isRequired,onClose:g.a.func.isRequired,position:g.a.string,className:g.a.string,popoverComponent:g.a.elementType,popoverTitle:g.a.string,customPosition:g.a.object}),p()(y,"defaultProps",{autoPosition:!0,position:"top",popoverComponent:v.a}),t.a=y},"./components/site-selector-modal/style.scss":function(e,t,s){},"./components/sites-dropdown/index.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(h),j=s("../node_modules/prop-types/index.js"),f=s.n(j),b=s("../node_modules/react/index.js"),g=s.n(b),v=s("../node_modules/react-redux/es/index.js"),O=s("../node_modules/classnames/index.js"),y=s.n(O),_=s("../node_modules/lodash-es/noop.js"),w=s("../node_modules/lodash-es/get.js"),k=s("./components/gridicon/index.tsx"),x=s("./blocks/site/index.jsx"),C=s("./blocks/site/placeholder.jsx"),I=s("./components/site-selector/index.jsx"),S=s("./state/selectors/get-primary-site-id.js"),T=s("./state/current-user/selectors.js"),q=(s("./components/sites-dropdown/style.scss"),function(e){l()(s,e);var t=d()(s);function s(e){var n;return r()(this,s),(n=t.call(this,e)).selectSite=n.selectSite.bind(c()(n)),n.siteFilter=n.siteFilter.bind(c()(n)),n.toggleOpen=n.toggleOpen.bind(c()(n)),n.onClose=n.onClose.bind(c()(n)),n.state={selectedSiteId:n.props.selectedSiteId||n.props.primarySiteId},n}return o()(s,[{key:"selectSite",value:function(e){this.props.onSiteSelect(e),this.setState({selectedSiteId:e,open:!1})}},{key:"siteFilter",value:function(e){return this.props.filter(e.ID)}},{key:"toggleOpen",value:function(){this.props.hasMultipleSites&&this.setState({open:!this.state.open})}},{key:"onClose",value:function(e){this.setState({open:!1}),this.props.onClose&&this.props.onClose(e)}},{key:"render",value:function(){return g.a.createElement("div",{className:y()("sites-dropdown",{"is-open":this.state.open},{"has-multiple-sites":this.props.hasMultipleSites})},g.a.createElement("div",{className:"sites-dropdown__wrapper"},g.a.createElement("div",{className:"sites-dropdown__selected",onClick:this.toggleOpen},this.props.isPlaceholder?g.a.createElement(C.a,null):g.a.createElement(x.a,{siteId:this.state.selectedSiteId,indicator:!1}),this.props.hasMultipleSites&&g.a.createElement(k.a,{icon:"chevron-down"})),this.props.hasMultipleSites&&this.state.open&&g.a.createElement(I.a,{autoFocus:!0,onClose:this.onClose,onSiteSelect:this.selectSite,selected:this.state.selectedSiteId,hideSelected:!0,filter:this.props.filter&&this.siteFilter})))}}]),s}(b.PureComponent));p()(q,"propTypes",{selectedSiteId:f.a.number,showAllSites:f.a.bool,onClose:f.a.func,onSiteSelect:f.a.func,filter:f.a.func,isPlaceholder:f.a.bool,hasMultipleSites:f.a.bool,selectedSite:f.a.object}),p()(q,"defaultProps",{showAllSites:!1,onClose:_.a,onSiteSelect:_.a,isPlaceholder:!1,hasMultipleSites:!1}),t.a=Object(v.c)((function(e){return{primarySiteId:Object(S.a)(e),hasMultipleSites:Object(w.a)(Object(T.b)(e),"site_count",1)>1}}))(q)},"./components/sites-dropdown/style.scss":function(e,t,s){},"./lib/accept/dialog.scss":function(e,t,s){},"./lib/accept/index.js":function(e,t,s){"use strict";var n=s("../node_modules/react-dom/index.js"),r=s.n(n),i=s("../node_modules/react/index.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/createClass.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/inherits.js"),p=s.n(h),j=s("../node_modules/@babel/runtime/helpers/createSuper.js"),f=s.n(j),b=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),g=s.n(b),v=s("../node_modules/prop-types/index.js"),O=s.n(v),y=s("../packages/i18n-calypso/dist/esm/index.js"),_=s("../node_modules/classnames/index.js"),w=s.n(_),k=s("../packages/components/dist/esm/dialog/index.js"),x=(s("./lib/accept/dialog.scss"),function(e){p()(s,e);var t=f()(s);function s(){var e;c()(this,s);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(d()(e),"state",{isVisible:!0}),g()(d()(e),"onClose",(function(t){e.setState({isVisible:!1}),e.props.onClose("accept"===t)})),g()(d()(e),"getActionButtons",(function(){var t=e.props.options,s=t&&t.isScary,n=w()({"is-scary":s});return[{action:"cancel",label:e.props.cancelButtonText?e.props.cancelButtonText:e.props.translate("Cancel"),additionalClassNames:"is-cancel"},{action:"accept",label:e.props.confirmButtonText?e.props.confirmButtonText:e.props.translate("OK"),isPrimary:!0,additionalClassNames:n}]})),e}return l()(s,[{key:"render",value:function(){return this.state.isVisible?o.a.createElement(k.a,{buttons:this.getActionButtons(),onClose:this.onClose,className:"accept__dialog",isVisible:!0},this.props.message):null}}]),s}(i.Component));g()(x,"displayName","AcceptDialog"),g()(x,"propTypes",{translate:O.a.func,message:O.a.node,onClose:O.a.func.isRequired,confirmButtonText:O.a.node,cancelButtonText:O.a.node,options:O.a.object});var C=Object(y.c)(x);t.a=function(e,t,s,n,i){var a=document.createElement("div");document.body.appendChild(a),r.a.render(o.a.createElement(C,{message:e,onClose:function(e){a&&(r.a.unmountComponentAtNode(a),document.body.removeChild(a),a=null),t&&t(e)},confirmButtonText:s,cancelButtonText:n,options:i}),a)}},"./lib/wporg/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return _})),s.d(t,"b",(function(){return w})),s.d(t,"c",(function(){return k})),s.d(t,"d",(function(){return x}));var n=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),o=s.n(i),a=s("../node_modules/debug/src/browser.js"),c=s.n(a),u=s("../packages/i18n-calypso/dist/esm/index.js"),l=s("../node_modules/lodash-es/find.js"),m=s("../node_modules/qs/lib/index.js"),d=c()("jsonp"),h=function(e,t,s){var n,r,i,o=encodeURIComponent,a=document.getElementsByTagName("script")[0]||document.head;i="__jp"+p++,r=setTimeout((function(){c(),s&&s(new Error("Timeout"))}),6e4);function c(){n.parentNode&&n.parentNode.removeChild(n),window[i]=j,r&&clearTimeout(r)}return window[i]=function(e){d("jsonp got",e),c(),s&&s(null,e)},e+="="+o(i)+"?"+Object(m.stringify)(t),d('jsonp req "%s"',e),(n=document.createElement("script")).src=e,a.parentNode.insertBefore(n,a),function(){window[i]&&c()}},p=0;function j(){}var f=s("./languages.js"),b=c()("wporg"),g="https://api.wordpress.org/themes/info/1.1/";function v(){return(v=o()(regeneratorRuntime.mark((function e(t,s){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:s});case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return e.t0=e.sent,e.abrupt("return",[null,e.t0]);case 9:return e.t1=Error,e.next=12,n.body;case 12:return e.t2=e.sent,e.t3=new e.t1(e.t2),e.abrupt("return",[e.t3,null]);case 17:return e.prev=17,e.t4=e.catch(0),e.abrupt("return",[e.t4,null]);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function O(e,t){return y.apply(this,arguments)}function y(){return(y=o()(regeneratorRuntime.mark((function e(t,s){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"?").concat(Object(m.stringify)(s)),{method:"GET",headers:{Accept:"application/json"}});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.t0=Error,e.next=10,n.body;case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){var t,s,n={fields:"icons,banners,compatibility,ratings,-contributors",locale:(t=u.a.getLocaleSlug(),s=Object(l.a)(f.a,{langSlug:t}).wpLocale,""===s&&(s=t),s)},r="https://api.wordpress.org/plugins/info/1.0/"+(e=e.replace(new RegExp(".php$"),""))+".jsonp";return new Promise((function(e,t){h(r,n,(function(s,n){return s?(b("error downloading plugin details from .org: %s",s),void t(s)):n&&n.slug?void e(n):(b("unrecognized format fetching plugin details from .org: %s",n),void t(new Error("Unrecognized response format")))}))}))}function w(e,t){var s,n=e.page||1,i=e.pageSize||24,o=e.category||"all",a=e.search;s="request[page]="+n+"&request[per_page]="+i+"&request[fields][icons]=1&request[fields][banners]=1&request[fields][compatibility]=1&request[fields][tested]=0&request[fields][requires]=0&request[fields][sections]=0",s+=a?"&request[search]="+a:"&request[browse]="+o,function(e,t){return v.apply(this,arguments)}("https://api.wordpress.org/plugins/info/1.1/?action=query_plugins",encodeURI(s)).then((function(e){var s=r()(e,2),n=s[0],i=s[1];t(n,i)}))}function k(e){return O(g,{action:"theme_information","request[fields][extended_author]":!0,"request[slug]":e})}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,s=e.page,n=e.number,r={action:"query_themes","request[fields][extended_author]":!0,"request[search]":t,"request[page]":s,"request[per_page]:":n};return O(g,r)}},"./my-sites/customize/panels.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),o=s.n(i),a={widgets:["panel","widgets"],fonts:["section","jetpack_fonts"],identity:["section","title_tagline"],"custom-css":["section","jetpack_custom_css"],amp:["section","amp_design"],menus:["panel","nav_menus"]};function c(e){if(a.hasOwnProperty(e)){var t=o()(a[e],2),s=t[0],n=t[1];return r()({},"autofocus[".concat(s,"]"),n)}return null}},"./my-sites/themes/auto-loading-homepage-modal.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(h),j=s("../node_modules/react/index.js"),f=s.n(j),b=s("../node_modules/prop-types/index.js"),g=s.n(b),v=s("../node_modules/react-redux/es/index.js"),O=s("../packages/i18n-calypso/dist/esm/index.js"),y=s("../packages/components/dist/esm/dialog/index.js");s("./state/themes/init.js");var _=s("./state/themes/selectors/get-canonical-theme.js"),w=s("./state/themes/selectors/is-activating-theme.js"),k=s("./state/themes/selectors/has-activated-theme.js"),x=s("./state/themes/selectors/theme-has-auto-loading-homepage.js"),C=s("./state/themes/selectors/is-theme-active.js");function I(e,t){var s,n;return(null===(s=e.themes.themeHasAutoLoadingHomepageWarning)||void 0===s?void 0:s.themeId)===t&&(null===(n=e.themes.themeHasAutoLoadingHomepageWarning)||void 0===n?void 0:n.show)}var S=s("./state/ui/selectors/get-selected-site-id.js"),T=s("./state/themes/action-types.js");var q=s("./state/themes/actions/activate.js"),E=(s("./my-sites/themes/auto-loading-homepage-modal.scss"),function(e){l()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),p()(c()(e),"closeModalHandler",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){if(t){var s=e.props,n=s.installingThemeId,r=s.siteId,i=s.source;return e.props.acceptAutoLoadingHomepageWarning(n),e.props.activateTheme(n,r,i)}e.props.hideAutoLoadingHomepageWarning()}})),e}return o()(s,[{key:"render",value:function(){var e=this.props,t=e.theme,s=e.hasActivated,n=e.isActivating,r=e.hasAutoLoadingHomepage,i=e.isCurrentTheme,o=e.isVisible,a=void 0!==o&&o;if(i)return null;if(!r)return null;if(n||s)return null;if(!t)return null;var c=this.props.theme.name;return f.a.createElement(y.a,{className:"themes__auto-loading-homepage-modal",isVisible:a,buttons:[{action:"keepCurrentTheme",label:Object(O.f)("No, keep my current theme"),isPrimary:!1,onClick:this.closeModalHandler(!1)},{action:"activeTheme",label:Object(O.f)("Yes, Activate %(themeName)s",{args:{themeName:c}}),isPrimary:!0,onClick:this.closeModalHandler(!0)}],onClose:this.closeModalHandler(!1)},f.a.createElement("div",null,f.a.createElement("h1",{className:"themes__auto-loading-homepage-modal-title"},Object(O.f)("{{strong}}%(themeName)s{{/strong}} will automatically change your homepage layout. Your current homepage will become a draft. Would you like to continue?",{args:{themeName:c},components:{strong:f.a.createElement("strong",null)}}))))}}]),s}(j.Component));p()(E,"propTypes",{source:g.a.oneOf(["details","list","upload"]).isRequired,theme:g.a.shape({author:g.a.string,author_uri:g.a.string,id:g.a.string,name:g.a.string}),hasActivated:g.a.bool.isRequired,isActivating:g.a.bool.isRequired,hasAutoLoadingHomepage:g.a.bool,siteId:g.a.number,isVisible:g.a.bool,onClose:g.a.func,installingThemeId:g.a.string.isRequired});t.a=Object(v.c)((function(e){var t=Object(S.a)(e),s=function(e){var t;return null===(t=e.themes.themeHasAutoLoadingHomepageWarning)||void 0===t?void 0:t.themeId}(e);return{siteId:t,installingThemeId:s,theme:s&&Object(_.a)(e,t,s),isActivating:!!Object(w.a)(e,t),hasActivated:!!Object(k.a)(e,t),hasAutoLoadingHomepage:Object(x.a)(e,s),isCurrentTheme:Object(C.a)(e,s,t),isVisible:I(e,s)}}),{acceptAutoLoadingHomepageWarning:function(e){return{type:T.m,themeId:e}},hideAutoLoadingHomepageWarning:function(){return{type:T.x}},activateTheme:q.a})(E)},"./my-sites/themes/auto-loading-homepage-modal.scss":function(e,t,s){},"./my-sites/themes/helpers.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./lib/analytics/ga.js"),r=s("../node_modules/to-title-case/index.js"),i=s.n(r),o=s("../node_modules/lodash-es/mapValues.js");function a(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click",r="".concat(e," ").concat(t," ").concat(s);Object(n.a)("Themes",i()(r))}function c(e){return Object(o.a)(e,u)}function u(e,t){var s=e.action;return Object.assign({},e,{action:function(e){s&&s(e),a("more button",t)}})}function l(e,t){var s=t.filter,n=t.vertical,r=t.tier,o=t.site_id,a="/themes",c="Themes";return n&&(a+="/".concat(n)),r&&(a+="/".concat(r)),s&&(a+="/filter/".concat(s)),o&&(a+="/:site",c+=" > Single Site"),r&&(c+=" > Type > ".concat(i()(r))),{analyticsPath:a,analyticsPageTitle:c}}},"./my-sites/themes/thanks-modal.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/createClass.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/inherits.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/createSuper.js"),p=s.n(h),j=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),f=s.n(j),b=s("../node_modules/react/index.js"),g=s.n(b),v=s("../node_modules/prop-types/index.js"),O=s.n(v),y=s("../node_modules/react-redux/es/index.js"),_=s("../node_modules/page/page.js"),w=s.n(_),k=s("../packages/i18n-calypso/dist/esm/index.js"),x=s("./components/gridicon/index.tsx"),C=s("../packages/components/dist/esm/dialog/index.js"),I=s("./components/pulsing-dot/index.jsx"),S=s("./my-sites/themes/helpers.js"),T=s("./state/themes/selectors/get-active-theme.js"),q=s("./state/themes/selectors/get-canonical-theme.js"),E=s("./state/themes/selectors/get-theme-details-url.js"),A=s("./state/themes/selectors/get-theme-forum-url.js"),P=s("./state/themes/selectors/is-activating-theme.js"),U=s("./state/themes/selectors/has-activated-theme.js"),z=s("./state/themes/selectors/is-wpcom-theme.js"),N=s("./state/themes/action-types.js");s("./state/themes/init.js");var R=s("./state/ui/selectors/get-selected-site-id.js"),L=s("./state/sites/actions.js"),F=s("./state/selectors/get-customize-or-edit-front-page-url.js"),W=s("./state/selectors/should-customize-homepage-with-gutenberg.js"),M=s("./state/selectors/get-site-url.js"),B=(s("./my-sites/themes/thanks-modal.scss"),function(e){d()(s,e);var t=p()(s);function s(){var e;o()(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),f()(l()(e),"onCloseModal",(function(){e.props.clearActivated(e.props.siteId),e.setState({show:!1})})),f()(l()(e),"trackClick",(function(e,t){Object(S.c)("current theme",e,t)})),f()(l()(e),"visitSite",(function(){e.trackClick("visit site"),window.open(e.props.siteUrl,"_blank")})),f()(l()(e),"goBack",(function(){e.trackClick("go back"),e.onCloseModal()})),f()(l()(e),"onLinkClick",(function(t){return function(){e.onCloseModal(),e.trackClick(t,"click")}})),f()(l()(e),"renderBody",(function(){return g.a.createElement("ul",null,g.a.createElement("li",null,"list"===e.props.source?e.renderThemeInfo():e.renderCustomizeInfo()),g.a.createElement("li",null,e.renderSupportInfo()))})),f()(l()(e),"learnThisTheme",(function(){e.trackClick("learn this theme"),e.onCloseModal(),w()(e.props.detailsUrl)})),f()(l()(e),"goToCustomizer",(function(){var t=e.props,s=t.customizeUrl,n=t.shouldEditHomepageWithGutenberg;e.trackClick("thanks modal customize"),e.onCloseModal(),n?w()(s):window.open(s,"_blank")})),f()(l()(e),"renderThemeInfo",(function(){return Object(k.f)("{{a}}Learn more about{{/a}} this theme.",{components:{a:g.a.createElement("a",{href:e.props.detailsUrl,onClick:e.onLinkClick("theme info")})}})})),f()(l()(e),"renderCustomizeInfo",(function(){return Object(k.f)("{{a}}Customize{{/a}} this design.",{components:{a:g.a.createElement("a",{href:e.props.customizeUrl,onClick:e.onLinkClick("customize")})}})})),f()(l()(e),"renderSupportInfo",(function(){var t=e.props.currentTheme.author_uri;return e.props.forumUrl?Object(k.f)("Have questions? Stop by our {{a}}support forums{{/a}}.",{components:{a:g.a.createElement("a",{href:e.props.forumUrl,onClick:e.onLinkClick("support")})}}):t?Object(k.f)("Have questions? {{a}}Contact the theme author.{{/a}}",{components:{a:g.a.createElement("a",{href:t,onClick:e.onLinkClick("org author")})}}):null})),f()(l()(e),"renderContent",(function(){var t=e.props.currentTheme,s=t.name,n=t.author;return g.a.createElement("div",null,g.a.createElement("h1",null,Object(k.f)("Thanks for choosing {{br/}} %(themeName)s",{args:{themeName:s},components:{br:g.a.createElement("br",null)}})),g.a.createElement("span",null,Object(k.f)("by %(themeAuthor)s",{args:{themeAuthor:n}})))})),f()(l()(e),"renderLoading",(function(){return g.a.createElement("div",{className:"themes__thanks-modal-loading"},g.a.createElement(I.a,{active:!0}))})),f()(l()(e),"getEditSiteLabel",(function(){var t=e.props,s=t.shouldEditHomepageWithGutenberg;if(!t.hasActivated)return Object(k.f)("Activating theme…");var n=Object(k.f)("Edit Homepage"),r=g.a.createElement(g.a.Fragment,null,g.a.createElement(x.a,{icon:"external"}),Object(k.f)("Customize site"));return g.a.createElement("span",{className:"thanks-modal__button-customize"},s?n:r)})),f()(l()(e),"getViewSiteLabel",(function(){return g.a.createElement("span",{className:"thanks-modal__button-customize"},g.a.createElement(x.a,{icon:"external"}),Object(k.f)("View Site"))})),f()(l()(e),"getButtons",(function(){var t=e.props,s=t.shouldEditHomepageWithGutenberg,n=t.hasActivated,i=s?{action:"view",label:e.getViewSiteLabel(),onClick:e.visitSite}:{action:"learn",label:Object(k.f)("Learn about this theme"),onClick:e.learnThisTheme};return[r()({},i,{disabled:!n}),{action:"customizeSite",label:e.getEditSiteLabel(),isPrimary:!0,disabled:!n,onClick:e.goToCustomizer}]})),e}return c()(s,[{key:"componentDidUpdate",value:function(e){!1===e.hasActivated&&!0===this.props.hasActivated&&this.props.refreshSite(this.props.siteId)}},{key:"render",value:function(){var e=this.props,t=e.currentTheme,s=e.hasActivated,n=e.isActivating;return g.a.createElement(C.a,{className:"themes__thanks-modal",isVisible:n||s,buttons:this.getButtons(),onClose:this.onCloseModal},s&&t?this.renderContent():this.renderLoading())}}]),s}(b.Component));f()(B,"propTypes",{source:O.a.oneOf(["details","list","upload"]).isRequired,clearActivated:O.a.func.isRequired,refreshSite:O.a.func.isRequired,currentTheme:O.a.shape({author:O.a.string,author_uri:O.a.string,id:O.a.string,name:O.a.string}),customizeUrl:O.a.string,detailsUrl:O.a.string,forumUrl:O.a.string,hasActivated:O.a.bool.isRequired,isActivating:O.a.bool.isRequired,isThemeWpcom:O.a.bool.isRequired,siteId:O.a.number});t.a=Object(y.c)((function(e){var t=Object(R.a)(e),s=Object(M.a)(e,t),n=Object(T.a)(e,t);return{siteId:t,siteUrl:s,currentTheme:n&&Object(q.a)(e,t,n),shouldEditHomepageWithGutenberg:Object(W.a)(e,t),detailsUrl:Object(E.a)(e,n,t),customizeUrl:Object(F.a)(e,n,t),forumUrl:Object(A.a)(e,n,t),isActivating:!!Object(P.a)(e,t),hasActivated:!!Object(U.a)(e,t),isThemeWpcom:Object(z.a)(e,n)}}),(function(e){return{clearActivated:function(t){return e(function(e){return{type:N.r,siteId:e}}(t))},refreshSite:function(t){return e(Object(L.e)(t))}}}))(B)},"./my-sites/themes/thanks-modal.scss":function(e,t,s){},"./my-sites/themes/theme-options.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return $}));var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),r=s.n(n),i=s("../node_modules/redux/es/redux.js"),o=s("../node_modules/react-redux/es/index.js"),a=s("../packages/i18n-calypso/dist/esm/index.js"),c=s("../node_modules/lodash-es/identity.js"),u=s("../node_modules/lodash-es/mapValues.js"),l=s("../node_modules/lodash-es/pickBy.js"),m=s("../node_modules/lodash-es/has.js"),d=s("./config/index.js"),h=s("./state/themes/actions/activate.js"),p=s("./lib/accept/index.js"),j=s("./state/sites/selectors/get-site-title.js"),f=s("./lib/wp/browser.js"),b=s("./state/themes/action-types.js");s("./state/themes/init.js");var g=s("./state/themes/selectors/get-theme.js");function v(e,t){return function(s,n){var r=Object(g.a)(n(),t,e).name,i=Object(j.a)(n(),t);Object(p.a)(a.a.translate("Are you sure you want to delete %(themeName)s from %(siteTitle)s?",{args:{themeName:r,siteTitle:i},comment:"Themes: theme delete confirmation dialog"}),(function(n){n&&s(function(e,t){return function(s){return s({type:b.s,themeId:e,siteId:t}),f.a.undocumented().deleteThemeFromJetpack(t,e).then((function(n){s({type:b.u,themeId:e,siteId:t,themeName:n.name})})).catch((function(n){s({type:b.t,themeId:e,siteId:t,error:n})}))}}(e,t))}),a.a.translate("Delete %(themeName)s",{args:{themeName:r},comment:"Themes: theme delete dialog confirm button"}),a.a.translate("Back",{context:"go back (like the back button in a browser)"}))}}var O=s("./state/sites/selectors/is-jetpack-site.js"),y=s("./state/themes/actions/install-theme.js"),_=s("../node_modules/page/page.js"),w=s.n(_),k=s("./lib/url/is-external.ts"),x=s("./state/themes/selectors/get-theme-customize-url.js");function C(e,t){return function(s,n){var r=Object(x.a)(n(),e,t);Object(k.a)(r)?window.location.href=r:w()(Object(x.a)(n(),e,t))}}var I=s("./state/themes/actions/suffix-theme-id-for-install.js");function S(e,t){return function(s,n){return Object(O.a)(n(),t)&&!Object(g.a)(n(),t,e)?s(function(e,t){return function(s){return s(Object(y.a)(e,t)).then((function(){s(C(e,t))}))}}(Object(I.a)(n(),t,e),t)):s(C(e,t))}}function T(e){return{type:b.C,themeId:e}}var q=s("./state/themes/actions/show-auto-loading-homepage-warning.js"),E=s("./state/sites/selectors/get-site-slug.js"),A=s("./state/themes/selectors/is-theme-premium.js");function P(e,t,s){return Object(O.a)(e,s)||!Object(A.a)(e,t)?null:"/checkout/".concat(Object(E.a)(e,s),"/theme:").concat(t)}var U=s("./state/themes/selectors/is-premium-theme-available.js"),z=s("./state/themes/selectors/is-theme-active.js"),N=s("./lib/plans/constants.js"),R=s("./state/sites/plans/selectors.js");var L=s("./state/sites/selectors/has-jetpack-site-jetpack-themes-extended-features.js"),F=s("./state/themes/selectors/is-wpcom-theme.js");function W(e,t,s){return!!Object(g.a)(e,s,t)||Object(F.a)(e,t)&&Object(L.a)(e,s)}var M=s("./state/themes/selectors/is-theme-gutenberg-first.js");function B(e,t){if(!t)return null;var s="/start/with-theme?ref=calypshowcase&theme="+t;return Object(A.a)(e,t)&&(s+="&premium=true"),s}var H=s("./state/themes/selectors/get-theme-details-url.js"),V=s("./state/themes/utils.js");function D(e,t,s){if(!t||!Object(A.a)(e,t))return null;var n=s?"/".concat(Object(E.a)(e,s)):"";return d.a.isEnabled("manage/themes/details")?"/theme/".concat(t,"/setup").concat(n):"".concat(V.k).concat(n).concat(t,"/support")}function J(e,t,s){if(!t)return null;var n=V.k+t;return d.a.isEnabled("manage/themes/details")&&(n="/theme/".concat(t,"/support")),n+(s?"/".concat(Object(E.a)(e,s)):"")}var G=s("./state/sites/selectors/is-jetpack-site-multi-site.js"),K=s("./state/selectors/can-current-user.js"),Y=s("./state/current-user/selectors.js"),Q=s("./state/selectors/get-customize-or-edit-front-page-url.js");function X(){var e=d.a.isEnabled("upgrades/checkout")?{label:Object(a.f)("Purchase",{context:"verb"}),extendedLabel:Object(a.f)("Purchase this design"),header:Object(a.f)("Purchase on:",{context:"verb",comment:"label for selecting a site for which to purchase a theme"}),getUrl:P,hideForTheme:function(e,t,s){return Object(O.a)(e,s)||!Object(Y.b)(e)||!Object(A.a)(e,t)||Object(U.a)(e,t,s)||Object(z.a)(e,t,s)}}:{},t=d.a.isEnabled("upgrades/checkout")?{label:Object(a.f)("Upgrade to activate",{comment:"label prompting user to upgrade the Jetpack plan to activate a certain theme"}),extendedLabel:Object(a.f)("Upgrade to activate",{comment:"label prompting user to upgrade the Jetpack plan to activate a certain theme"}),header:Object(a.f)("Upgrade on:",{context:"verb",comment:"label for selecting a site for which to upgrade a plan"}),getUrl:function(e,t,s){return function(e,t,s){return Object(O.a)(e,s)&&Object(A.a)(e,t)&&!Object(R.i)(e,s,N.Tb)?"/checkout/".concat(Object(E.a)(e,s),"/professional"):null}(e,t,s)},hideForTheme:function(e,t,s){return!Object(O.a)(e,s)||!Object(Y.b)(e)||!Object(A.a)(e,t)||Object(z.a)(e,t,s)||Object(U.a)(e,t,s)}}:{},s={label:Object(a.f)("Activate"),extendedLabel:Object(a.f)("Activate this design"),header:Object(a.f)("Activate on:",{comment:"label for selecting a site on which to activate a theme"}),action:h.a,hideForTheme:function(e,t,s){return!Object(Y.b)(e)||Object(G.a)(e,s)||Object(z.a)(e,t,s)||Object(A.a)(e,t)&&!Object(U.a)(e,t,s)||Object(O.a)(e,s)&&!W(e,t,s)}},n={label:Object(a.f)("Delete"),action:v,hideForTheme:function(e,t,s,n){return!Object(O.a)(e,s)||"wpcom"===n||Object(z.a)(e,t,s)}},r={label:Object(a.f)("Customize"),extendedLabel:Object(a.f)("Customize this design"),header:Object(a.f)("Customize on:",{comment:"label in the dialog for selecting a site for which to customize a theme"}),icon:"customize",getUrl:Q.a,hideForTheme:function(e,t,s){return!Object(K.b)(e,s,"edit_theme_options")||!Object(z.a)(e,t,s)}},i={label:Object(a.f)("Try & Customize"),extendedLabel:Object(a.f)("Try & Customize"),header:Object(a.f)("Try & Customize on:",{comment:"label in the dialog for opening the Customizer with the theme in preview"}),action:S,hideForTheme:function(e,t,s){return!Object(Y.b)(e)||s&&(!Object(K.b)(e,s,"edit_theme_options")||Object(O.a)(e,s)&&Object(G.a)(e,s))||Object(z.a)(e,t,s)||Object(A.a)(e,t)&&Object(O.a)(e,s)&&!Object(U.a)(e,t,s)||Object(O.a)(e,s)&&!W(e,t,s)||Object(M.a)(e,t)}},o={label:Object(a.f)("Live demo",{comment:"label for previewing the theme demo website"}),action:T},c={action:q.a},u=Object(a.f)("Pick this design",{comment:"when signing up for a WordPress.com account with a selected theme"});return{customize:r,preview:o,purchase:e,upgradePlan:t,activate:s,tryandcustomize:i,deleteTheme:n,signup:{label:u,extendedLabel:u,getUrl:B,hideForTheme:function(e){return Object(Y.b)(e)}},separator:{separator:!0},info:{label:Object(a.f)("Info",{comment:"label for displaying the theme info sheet"}),icon:"info",getUrl:H.a},support:{label:Object(a.f)("Setup"),icon:"help",getUrl:D,hideForTheme:function(e,t){return!Object(A.a)(e,t)}},help:{label:Object(a.f)("Support"),getUrl:J},showAutoLoadingHomepageWarning:c}}var $=Object(o.c)((function(e,t){var s=t.siteId,n=t.origin,r=void 0===n?s:n,i=c.a,o=c.a;return s?(i=function(t){return function(n){return t(e,n,s)}},o=function(t){return function(n){return t(e,n,s,r)}}):(i=function(t){return function(s,n){return t(e,s,n)}},o=function(t){return function(s,n){return t(e,s,n,r)}}),Object(u.a)(X(),(function(e){return Object.assign({},e,e.getUrl?{getUrl:i(e.getUrl)}:{},e.hideForTheme?{hideForTheme:o(e.hideForTheme)}:{})}))}),(function(e,t){var s,n=t.siteId,r=t.source,o=void 0===r?"unknown":r,a=Object(l.a)(X(),"action");return s=n?function(e){return function(t){return e(t,n,o)}}:function(e){return function(t,s){return e(t,s,o)}},Object(i.bindActionCreators)(Object(u.a)(a,(function(e){var t=e.action;return s(t)})),e)}),(function(e,t,s){var n=s.defaultOption,i=s.secondaryOption,o=s.getScreenshotOption;return e=Object(u.a)(e,(function(e,s){return Object(m.a)(e,"action")?r()({},e,{action:t[s]}):e})),r()({},s,{options:e,defaultOption:e[n],secondaryOption:i?e[i]:null,getScreenshotOption:function(t){return e[o(t)]}})}))},"./my-sites/themes/theme-preview.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(h),j=s("../node_modules/prop-types/index.js"),f=s.n(j),b=s("../node_modules/react/index.js"),g=s.n(b),v=s("../node_modules/react-redux/es/index.js"),O=s("../packages/i18n-calypso/dist/esm/index.js"),y=s("../packages/components/dist/esm/button/index.js"),_=s("./components/pulsing-dot/index.jsx"),w=s("./components/data/query-theme/index.jsx"),k=s("./my-sites/themes/theme-options.js");s("./state/themes/init.js");var x=s("./state/themes/selectors/is-installing-theme.js"),C=s("./state/themes/selectors/is-theme-active.js"),I=s("./state/themes/selectors/is-activating-theme.js"),S=s("./state/themes/selectors/get-canonical-theme.js");function T(e,t,s){var n=Object(S.a)(e,s,t);return null==n?void 0:n.demo_uri}var q=s("./state/ui/selectors/get-selected-site-id.js"),E=s("./state/sites/selectors/is-jetpack-site.js"),A=s("./state/themes/action-types.js");var P=s("./components/web-preview/index.jsx"),U=function(e){l()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),p()(c()(e),"state",{showActionIndicator:!1}),p()(c()(e),"onPrimaryButtonClick",(function(){var t=e.getPrimaryOption();t.action&&t.action(e.props.themeId),!e.props.isJetpack&&e.props.hideThemePreview()})),p()(c()(e),"onSecondaryButtonClick",(function(){var t=e.getSecondaryOption();t.action&&t.action(e.props.themeId),!e.props.isJetpack&&e.props.hideThemePreview()})),p()(c()(e),"getPrimaryOption",(function(){return e.props.themeOptions.primary})),p()(c()(e),"getSecondaryOption",(function(){return e.props.isActive?null:e.props.themeOptions.secondary})),p()(c()(e),"renderPrimaryButton",(function(){var t=e.getPrimaryOption(),s=t.getUrl?t.getUrl(e.props.themeId):null;return g.a.createElement(y.a,{primary:!0,onClick:e.onPrimaryButtonClick,href:s},t.label)})),p()(c()(e),"renderSecondaryButton",(function(){var t=e.getSecondaryOption();if(t){var s=t.getUrl?t.getUrl(e.props.themeId):null;return g.a.createElement(y.a,{onClick:e.onSecondaryButtonClick,href:s},t.label)}})),e}return o()(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.isActivating&&!e.isActivating&&(this.setState({showActionIndicator:!1}),this.props.hideThemePreview()),!this.props.isInstalling&&e.isInstalling&&this.setState({showActionIndicator:!0})}},{key:"render",value:function(){var e=this.props.themeId,t=this.state.showActionIndicator;return e?g.a.createElement("div",null,this.props.isJetpack&&g.a.createElement(w.a,{themeId:e,siteId:"wporg"}),this.props.children,this.props.demoUrl&&g.a.createElement(P.a,{showPreview:!0,showExternal:!1,showSEO:!1,onClose:this.props.hideThemePreview,previewUrl:this.props.demoUrl+"?demo=true&iframe=true&theme_preview=true",externalUrl:this.props.demoUrl,belowToolbar:this.props.belowToolbar},t&&g.a.createElement(_.a,{active:!0}),!t&&this.renderSecondaryButton(),!t&&this.renderPrimaryButton())):null}}]),s}(g.a.Component);p()(U,"displayName","ThemePreview"),p()(U,"propTypes",{belowToolbar:f.a.element,demoUrl:f.a.string,isActivating:f.a.bool,isActive:f.a.bool,isInstalling:f.a.bool,isJetpack:f.a.bool,themeId:f.a.string,themeOptions:f.a.object});var z=Object(k.a)(U);t.a=Object(v.c)((function(e){var t=function(e){return e.themes.themePreviewVisibility}(e);if(!t)return{themeId:t};var s=Object(q.a)(e);return{themeId:t,isJetpack:Object(E.a)(e,s),themeOptions:function(e){return e.themes.themePreviewOptions}(e),isInstalling:Object(x.a)(e,t,s),isActive:Object(C.a)(e,t,s),isActivating:Object(I.a)(e,s),demoUrl:T(e,t,s),options:["activate","preview","purchase","upgradePlan","tryandcustomize","customize","separator","info","signup","support","help"]}}),{hideThemePreview:function(){return{type:A.C,themeId:null}}})(Object(O.c)(z))},"./my-sites/themes/themes-site-selector-modal.jsx":function(e,t,s){"use strict";var n=s("../node_modules/@babel/runtime/helpers/classCallCheck.js"),r=s.n(n),i=s("../node_modules/@babel/runtime/helpers/createClass.js"),o=s.n(i),a=s("../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=s.n(a),u=s("../node_modules/@babel/runtime/helpers/inherits.js"),l=s.n(u),m=s("../node_modules/@babel/runtime/helpers/createSuper.js"),d=s.n(m),h=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(h),j=s("../node_modules/prop-types/index.js"),f=s.n(j),b=s("../node_modules/react/index.js"),g=s.n(b),v=s("../node_modules/react-redux/es/index.js"),O=s("../node_modules/page/page.js"),y=s.n(O),_=s("../node_modules/lodash-es/defer.js"),w=s("../node_modules/lodash-es/omit.js"),k=s("../node_modules/lodash-es/mapValues.js"),x=s("./components/theme/index.jsx"),C=s("../node_modules/classnames/index.js"),I=s.n(C),S=s("../node_modules/lodash-es/includes.js"),T=s("../packages/i18n-calypso/dist/esm/index.js"),q=s("../packages/components/dist/esm/button/index.js"),E=s("../packages/components/dist/esm/dialog/index.js"),A=s("./components/sites-dropdown/index.jsx"),P=s("./state/selectors/get-primary-site-id.js"),U=s("./state/selectors/get-visible-sites.js"),z=(s("./components/site-selector-modal/style.scss"),function(e){l()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),p()(c()(e),"state",{siteId:e.props.initialSiteId}),p()(c()(e),"setSite",(function(t){e.setState({siteId:t})})),p()(c()(e),"onClose",(function(t){"mainAction"===t&&e.props.mainAction(e.state.siteId),e.props.hide()})),p()(c()(e),"onButtonClick",(function(){e.props.mainAction(e.state.siteId)})),e}return o()(s,[{key:"getMainLink",value:function(){var e=this.props.getMainUrl&&this.props.getMainUrl(this.state.siteId);return e?g.a.createElement(q.a,{primary:!0,href:e,onClick:this.onButtonClick},this.props.mainActionLabel):{action:"mainAction",label:this.props.mainActionLabel,isPrimary:!0}}},{key:"render",value:function(){var e=this.getMainLink(),t=[{action:"back",label:this.props.translate("Back")},e],s=I()("site-selector-modal",this.props.className);return g.a.createElement(E.a,{className:s,isVisible:this.props.isVisible,buttons:t,onClose:this.onClose},g.a.createElement("div",{className:"site-selector-modal__content"},this.props.children),g.a.createElement(A.a,{onSiteSelect:this.setSite,selectedSiteId:this.state.siteId,filter:this.props.filter}))}}]),s}(b.Component));p()(z,"propTypes",{children:f.a.node,filter:f.a.func,hide:f.a.func.isRequired,isVisible:f.a.bool.isRequired,mainAction:f.a.func.isRequired,getMainUrl:f.a.func,mainActionLabel:f.a.string.isRequired,className:f.a.string,translate:f.a.func.isRequired,initialSiteId:f.a.number});var N=Object(v.c)((function(e,t){var s=t.filter,n=Object(P.a)(e),r=Object(U.a)(e).map((function(e){return e.ID}));return s&&(r=r.filter(s)),{initialSiteId:Object(S.a)(r,n)?n:r[0]}}))(Object(T.c)(z)),R=s("./my-sites/themes/helpers.js"),L=s("./state/sites/selectors/get-site-slug.js"),F=s("./state/themes/selectors/get-theme.js"),W=(s("./my-sites/themes/themes-site-selector-modal.scss"),f.a.shape({label:f.a.string,header:f.a.string,getUrl:f.a.func,action:f.a.func})),M=function(e){l()(s,e);var t=d()(s);function s(){var e;r()(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),p()(c()(e),"state",{selectedThemeId:null,selectedOption:null}),p()(c()(e),"trackAndCallAction",(function(t){var s=e.state.selectedOption.action,n=e.state.selectedThemeId,r=e.props.search,i=e.props.getSiteSlug(t),o=e.props.pathName+"/"+i;r&&(o+="?s="+r),Object(R.c)("site selector",e.props.name),y()(o),s&&Object(_.a)((function(){s(n,t)}))})),p()(c()(e),"showSiteSelectorModal",(function(t,s){e.setState({selectedThemeId:s,selectedOption:t})})),p()(c()(e),"hideSiteSelectorModal",(function(){e.showSiteSelectorModal(null,null)})),p()(c()(e),"wrapOption",(function(t){return Object.assign({},t,t.header?{action:function(s){return e.showSiteSelectorModal(t,s)}}:{},t.getUrl&&t.header?{getUrl:null}:{})})),e}return o()(s,[{key:"render",value:function(){var e=g.a.cloneElement(this.props.children,Object.assign({},Object(w.a)(this.props,["children","options","defaultOption"]),{options:Object(k.a)(this.props.options,this.wrapOption),defaultOption:this.wrapOption(this.props.defaultOption),secondaryOption:this.props.secondaryOption?this.wrapOption(this.props.secondaryOption):null})),t=this.state,s=t.selectedOption,n=t.selectedThemeId,r=this.props.getWpcomTheme(n);return g.a.createElement("div",null,e,s&&g.a.createElement(N,{className:"themes__site-selector-modal",isVisible:!0,filter:function(e){return!(s.hideForTheme&&s.hideForTheme(n,e))},hide:this.hideSiteSelectorModal,mainAction:this.trackAndCallAction,mainActionLabel:s.label,getMainUrl:s.getUrl?function(e){return s.getUrl(n,e)}:null},g.a.createElement(x.a,{isActionable:!1,theme:r}),g.a.createElement("h1",null,s.header)))}}]),s}(g.a.Component);p()(M,"propTypes",{children:f.a.element,options:f.a.objectOf(W),defaultOption:W,secondaryOption:W,pathName:f.a.string.isRequired,getSiteSlug:f.a.func,getWpcomTheme:f.a.func});var B=function(e){return function(t){return Object(L.a)(e,t)}},H=function(e){return function(t){return Object(F.a)(e,"wpcom",t)}};t.a=Object(v.c)((function(e){return{getSiteSlug:B(e),getWpcomTheme:H(e)}}))(M)},"./my-sites/themes/themes-site-selector-modal.scss":function(e,t,s){},"./state/posts/actions/request-posts.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),r=s.n(n),i=s("./lib/wp/browser.js"),o=s("./state/action-types.js"),a=s("./state/posts/actions/receive-posts.js");s("./state/posts/init.js");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(s){return s({type:o.Vl,siteId:e,query:t}),(e?i.a.site(e):i.a.me()).postsList(r()({},t)).then((function(n){var r=n.found,i=n.posts;s(Object(a.a)(i)),s({type:o.Xl,siteId:e,query:t,found:r,posts:i})})).catch((function(n){s({type:o.Wl,siteId:e,query:t,error:n})}))}}},"./state/posts/actions/request-site-posts.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/posts/actions/request-posts.js");s("./state/posts/init.js");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?Object(n.a)(e,t):null}},"./state/selectors/get-customize-or-edit-front-page-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./state/themes/selectors/is-theme-active.js"),r=s("./state/themes/selectors/get-theme-customize-url.js"),i=s("./state/selectors/is-site-using-full-site-editing.js"),o=s("./state/selectors/get-front-page-editor-url.js"),a=s("./state/selectors/should-customize-homepage-with-gutenberg.js");function c(e,t,s){return(Object(a.a)(e,s)||Object(i.a)(e,s))&&Object(n.a)(e,t,s)?Object(o.a)(e,s):Object(r.a)(e,t,s)}},"./state/selectors/get-front-page-editor-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/selectors/get-editor-url.js"),r=s("./state/sites/selectors/get-site-front-page.js");function i(e,t){var s=Object(r.a)(e,t);return 0!==s&&Object(n.a)(e,t,s,"page")}},"./state/selectors/get-site-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("../node_modules/lodash-es/get.js"),r=s("./state/selectors/get-raw-site.js");function i(e,t){return Object(n.a)(Object(r.a)(e,t),"URL",null)}},"./state/selectors/is-site-using-full-site-editing.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("../node_modules/lodash-es/get.js"),r=s("./state/selectors/get-raw-site.js"),i=s("./state/sites/selectors/has-static-front-page.js");function o(e,t){var s=Object(r.a)(e,t);return Object(n.a)(s,"is_fse_active",!1)&&Object(i.a)(e,t)}},"./state/selectors/should-customize-homepage-with-gutenberg.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./state/sites/selectors/get-site-front-page-type.js"),r=s("./state/themes/selectors/get-active-theme.js"),i=s("./state/themes/selectors/is-theme-gutenberg-first.js");function o(e,t){var s=Object(r.a)(e,t),o=Object(i.a)(e,s),a="page"===Object(n.a)(e,t);return o&&a}},"./state/sites/plans/actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return v})),s.d(t,"c",(function(){return O})),s.d(t,"d",(function(){return y}));var n=s("../node_modules/debug/src/browser.js"),r=s.n(n),i=s("../node_modules/lodash-es/map.js"),o=s("../packages/i18n-calypso/dist/esm/index.js"),a=s("./state/sites/plans/assembler.js"),c=s("./state/action-types.js"),u=s("./lib/wp/browser.js"),l=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),m=s.n(l),d=s("./state/data-layer/wpcom-http/utils.js"),h=s("./state/notices/actions.js"),p=s("./state/data-layer/wpcom-http/actions.js"),j=s("./state/data-layer/handler-registry.js"),f=function(e){return{duration:8e3,id:"sites-plan-transfer-notice-".concat(e)}};Object(j.b)("state/data-layer/wpcom/sites/plan-transfer/index.js",m()({},c.ir,[Object(d.a)({fetch:function(e){return Object(p.a)({apiVersion:"1",method:"POST",path:"/sites/"+e.siteId+"/plan-transfer",query:{new_user_id:e.newOwnerUserId}},e)},onSuccess:function(e){var t=e.siteId;return[Object(h.f)(Object(o.f)("Plan purchaser has been changed successfully."),f(t)),O(t)]},onError:function(e,t){var s=e.siteId,n=t.message;return Object(h.b)(n,f(s))}})]));var b=r()("calypso:site-plans:actions");function g(e){return{type:c.er,siteId:e}}function v(e){return function(t){return t({type:c.br,siteId:e}),new Promise((function(s){u.a.undocumented().getSitePlans(e,(function(n,r){if(n){b("Fetching site plans failed: ",n);var u=n.message||o.a.translate("There was a problem fetching site plans. Please try again later or contact support.");t({type:c.dr,siteId:e,error:u})}else t(function(e,t){return{type:c.cr,siteId:e,plans:Object(i.a)(t,a.a)}}(e,r));s()}))}))}}function O(e){return function(t){t(g(e)),t(v(e))}}var y=function(e,t){return{type:c.ir,newOwnerUserId:t,siteId:e}}},"./state/sites/selectors/get-customizer-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("../node_modules/@babel/runtime/helpers/objectSpread2.js"),r=s.n(n),i=s("../node_modules/lodash-es/compact.js"),o=s("./my-sites/customize/panels.js"),a=s("./lib/url/add-query-args.ts"),c=s("./state/sites/selectors/get-site-admin-url.js"),u=s("./state/sites/selectors/get-site-slug.js"),l=s("./state/sites/selectors/is-jetpack-site.js");function m(e,t,s){if(!Object(l.a)(e,t)){var n=Object(u.a)(e,t);return[""].concat(Object(i.a)(["customize",s,n])).join("/")}var m,d=Object(c.a)(e,t,"customize.php");return d?("undefined"!=typeof window&&(m=window.location.href),Object(a.a)(r()({return:m},Object(o.a)(s)),d)):null}},"./state/sites/selectors/get-site-front-page-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/sites/selectors/get-site-option.js");function r(e,t){return Object(n.a)(e,t,"show_on_front")}},"./state/sites/selectors/get-site-front-page.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/sites/selectors/get-site-option.js");function r(e,t){return Object(n.a)(e,t,"page_on_front")}},"./state/sites/selectors/has-static-front-page.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/sites/selectors/get-site-front-page.js"),r=s("./state/sites/selectors/get-site-front-page-type.js");function i(e,t){return"page"===Object(r.a)(e,t)&&!!Object(n.a)(e,t)}},"./state/themes/actions/activate.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s("./state/sites/selectors/is-jetpack-site.js"),r=s("./lib/wp/browser.js"),i=s("./state/themes/action-types.js"),o=s("./state/themes/actions/theme-activated.js");s("./state/themes/init.js");function a(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a){return a({type:i.n,themeId:e,siteId:t}),r.a.undocumented().activateTheme(e,t).then((function(r){var i=r.stylesheet||e;a(Object(o.a)(i,t,s,n))})).catch((function(s){a({type:i.o,themeId:e,siteId:t,error:s})}))}}var c=s("./state/themes/actions/install-theme.js");function u(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(r){return r(Object(c.a)(e,t)).then((function(){r(a(e,t,s,n))}))}}var l=s("./state/themes/actions/show-auto-loading-homepage-warning.js"),m=s("./state/themes/actions/suffix-theme-id-for-install.js"),d=s("./state/themes/selectors/theme-has-auto-loading-homepage.js");function h(e,t){var s,n;return(null===(s=e.themes.themeHasAutoLoadingHomepageWarning)||void 0===s?void 0:s.themeId)===t&&(null===(n=e.themes.themeHasAutoLoadingHomepageWarning)||void 0===n?void 0:n.accepted)}var p=s("./state/themes/selectors/get-theme.js");function j(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,o){return Object(d.a)(o(),e)&&!h(o(),e)?i(Object(l.a)(e)):Object(n.a)(o(),t)&&!Object(p.a)(o(),t,e)?i(u(Object(m.a)(o(),t,e),t,s,r)):i(a(e,t,s,r))}}},"./state/themes/actions/install-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("../node_modules/lodash-es/endsWith.js"),r=s("./lib/wp/browser.js"),i=s("./state/themes/action-types.js"),o=s("./state/themes/actions/receive-theme.js"),a=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function c(e,t){return function(s,u){return s({type:i.y,siteId:t,themeId:e}),r.a.undocumented().installThemeOnJetpack(t,e).then((function(r){if(s(Object(o.a)(r,t)),s({type:i.A,siteId:t,themeId:e}),Object(n.a)(e,"-wpcom")){var l=function(e,t){var s,n;return null!==(s=null===(n=Object(a.a)(e,"wpcom",t))||void 0===n?void 0:n.template)&&void 0!==s?s:null}(u(),e.replace("-wpcom",""));if(l)return s(c(l+"-wpcom",t))}})).catch((function(n){s({type:i.z,siteId:t,themeId:e,error:n})}))}}},"./state/themes/actions/request-theme-filters.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./state/themes/action-types.js"),r=s("../node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(r),o=s("../packages/i18n-calypso/dist/esm/index.js"),a=s("./state/data-layer/wpcom-http/utils.js"),c=s("./state/data-layer/wpcom-http/actions.js"),u=s("./state/notices/actions.js"),l=s("./state/data-layer/handler-registry.js");Object(l.b)("state/data-layer/wpcom/theme-filters/index.js",i()({},n.w,[Object(a.a)({fetch:function(e){return Object(c.a)({method:"GET",apiVersion:"1.2",path:"/theme-filters"},e)},onSuccess:function(e,t){return{type:n.v,filters:t}},onError:function(){return Object(u.b)(o.a.translate("Problem fetching theme filters."))}})]));s("./state/themes/init.js");function m(){return{type:n.w}}},"./state/themes/actions/request-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("../node_modules/lodash-es/map.js"),r=s("./lib/wp/browser.js"),i=s("./lib/wporg/index.js"),o=s("./state/themes/action-types.js"),a=s("./state/themes/actions/receive-theme.js"),c=s("./state/themes/actions/receive-themes.js");s("./state/themes/init.js");var u=s("./state/themes/utils.js");function l(e,t){return function(s){return s({type:o.D,siteId:t,themeId:e}),"wporg"===t?Object(i.c)(e).then((function(n){if(!n)throw"Theme not found";s(Object(a.a)(Object(u.j)(n),t)),s({type:o.F,siteId:t,themeId:e})})).catch((function(n){s({type:o.E,siteId:t,themeId:e,error:n})})):"wpcom"===t?r.a.undocumented().themeDetails(e).then((function(n){s(Object(a.a)(Object(u.i)(n),t)),s({type:o.F,siteId:t,themeId:e})})).catch((function(n){s({type:o.E,siteId:t,themeId:e,error:n})})):r.a.undocumented().jetpackThemeDetails(e,t).then((function(r){var i=r.themes;s(Object(c.a)(Object(n.a)(i,u.h),t)),s({type:o.F,siteId:t,themeId:e})})).catch((function(n){s(function(e,t,s){return{type:o.E,siteId:e,themeId:t,error:s}}(t,e,n))}))}}},"./state/themes/actions/set-back-path.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/action-types.js");s("./state/themes/init.js");function r(e){return{type:n.q,path:e}}},"./state/themes/actions/set-theme-preview-options.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/action-types.js");s("./state/themes/init.js");function r(e,t){return{type:n.B,primary:e,secondary:t}}},"./state/themes/actions/show-auto-loading-homepage-warning.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/action-types.js");s("./state/themes/init.js");function r(e){return{type:n.J,themeId:e}}},"./state/themes/actions/suffix-theme-id-for-install.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/selectors/is-site-automated-transfer.js"),r=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function i(e,t,s){return Object(n.a)(e,t)?s:function(e,t){var s,n;return(null!==(s=null===(n=Object(r.a)(e,"wpcom",t))||void 0===n?void 0:n.download)&&void 0!==s?s:"").includes("wordpress.com")}(e,s)?s+"-wpcom":s}},"./state/themes/actions/theme-activated.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./state/themes/action-types.js"),r=s("./state/analytics/actions/record.js"),i=s("./state/analytics/actions/with-analytics.js"),o=s("./state/posts/actions/request-site-posts.js"),a=s("./state/themes/selectors/get-active-theme.js"),c=s("./state/themes/selectors/get-last-theme-query.js"),u=s("./state/themes/selectors/prepend-theme-filter-keys.js"),l=s("./state/themes/utils.js");s("./state/themes/init.js");function m(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",m=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=function(d,h){var p={type:n.p,themeStylesheet:e,siteId:t},j=Object(a.a)(h(),t),f=Object(c.a)(h(),t),b=Object(u.a)(h(),f.filter),g=b+(f.search||""),v=Object(r.e)("calypso_themeshowcase_theme_activate",{theme:Object(l.c)(e),previous_theme:j,source:s,purchased:m,search_term:g||null,search_taxonomies:b});d(Object(i.a)(v,p)),d(Object(o.a)(t,{type:"page"}))};return d}},"./state/themes/selectors/find-theme-filter-term.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("../node_modules/@babel/runtime/helpers/slicedToArray.js"),r=s.n(n),i=s("../node_modules/lodash-es/filter.js"),o=s("../node_modules/lodash-es/get.js"),a=s("./lib/create-selector/index.js"),c=s("./state/themes/selectors/get-theme-filters.js"),u=s("./state/themes/selectors/get-theme-filter-term.js"),l=(s("./state/themes/init.js"),Object(a.a)((function(e,t){var s=t.split(":"),n=r()(s,2),a=n[0],l=n[1];if(l)return Object(u.a)(e,a,l);var m=Object(c.a)(e),d=Object(i.a)(m,(function(e){return!!Object(o.a)(e,a)}));return 1!==d.length?null:d[0][a]}),(function(e){return[Object(c.a)(e)]})))},"./state/themes/selectors/get-active-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s("./state/themes/init.js");function n(e,t){var s,n=null!==(s=e.themes.activeThemes[t])&&void 0!==s?s:null;return n&&n.replace("-wpcom","")}},"./state/themes/selectors/get-canonical-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("../node_modules/lodash-es/find.js"),r=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function i(e,t,s){var i=Object(n.a)(["wpcom","wporg",t],(function(t){return Object(r.a)(e,t,s)}));return Object(r.a)(e,i,s)}},"./state/themes/selectors/get-last-theme-query.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("./state/themes/init.js");var n={};function r(e,t){var s;return null!==(s=e.themes.lastQuery[t])&&void 0!==s?s:n}},"./state/themes/selectors/get-premium-theme-price.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("../packages/i18n-calypso/dist/esm/index.js"),r=s("./state/sites/selectors/is-jetpack-site.js"),i=s("./state/themes/selectors/get-theme.js"),o=s("./state/themes/selectors/is-premium-theme-available.js"),a=s("./state/themes/selectors/is-theme-premium.js");s("./state/themes/init.js");function c(e,t,s){if(!Object(a.a)(e,t)||Object(o.a)(e,t,s))return"";if(Object(r.a)(e,s))return n.a.translate("Upgrade",{comment:"Used to indicate a premium theme is available to the user once they upgrade their plan"});var c=Object(i.a)(e,"wpcom",t);return null==c?void 0:c.price}},"./state/themes/selectors/get-theme-customize-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./state/sites/selectors/get-customizer-url.js"),r=s("./state/sites/selectors/is-jetpack-site.js"),i=s("./state/themes/selectors/get-theme.js"),o=s("./state/themes/selectors/is-theme-active.js");s("./state/themes/init.js");function a(e,t,s){var a=Object(n.a)(e,s);if(!s||!t||Object(o.a)(e,t,s))return a;var c,u="string"==typeof a&&a.includes("?")?"&":"?";if(Object(r.a)(e,s))c=t;else{var l=Object(i.a)(e,"wpcom",t);if(!l)return a;c=l.stylesheet}return a+u+"theme="+c}},"./state/themes/selectors/get-theme-details-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./config/index.js"),r=s("./state/sites/selectors/is-jetpack-site.js"),i=s("./state/sites/selectors/has-jetpack-site-jetpack-themes-extended-features.js"),o=s("./state/sites/selectors/get-site-option.js"),a=s("./state/sites/selectors/get-site-slug.js"),c=s("./state/themes/utils.js");s("./state/themes/init.js");function u(e,t,s){if(!t)return null;if(Object(r.a)(e,s)&&(!n.a.isEnabled("manage/themes/details/jetpack")||!Object(i.a)(e,s)))return Object(o.a)(e,s,"admin_url")+"themes.php?theme="+t;var u=c.k+t;return n.a.isEnabled("manage/themes/details")&&(u="/theme/".concat(t)),u+(s?"/".concat(Object(a.a)(e,s)):"")}},"./state/themes/selectors/get-theme-filter-string-from-term.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("../node_modules/lodash-es/includes.js"),r=s("../node_modules/lodash-es/mapValues.js"),i=s("../node_modules/lodash-es/keys.js"),o=s("../node_modules/lodash-es/forIn.js"),a=s("./lib/create-selector/index.js"),c=s("./state/themes/selectors/get-theme-filters.js"),u=s("./state/themes/selectors/is-ambiguous-theme-filter-term.js"),l=(s("./state/themes/init.js"),Object(a.a)((function(e){var t={},s=Object(r.a)(Object(c.a)(e),i.a);return Object(o.a)(s,(function(s,n){s.forEach((function(s){var r=Object(u.a)(e,s)?"".concat(n,":").concat(s):s;t[r]=n}))})),t}),(function(e){return[Object(c.a)(e)]})));function m(e,t){var s=l(e)[t];return s?Object(n.a)(t,":")?t:"".concat(s,":").concat(t):""}},"./state/themes/selectors/get-theme-filter-term.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("../node_modules/lodash-es/get.js"),r=s("./state/themes/selectors/get-theme-filter-terms.js");s("./state/themes/init.js");function i(e,t,s){return Object(n.a)(Object(r.a)(e,t),s)}},"./state/themes/selectors/get-theme-filter-terms.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("../node_modules/lodash-es/get.js"),r=s("./state/themes/selectors/get-theme-filters.js");s("./state/themes/init.js");function i(e,t){return Object(n.a)(Object(r.a)(e),t)}},"./state/themes/selectors/get-theme-filters.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s("./state/themes/init.js");function n(e){return e.themes.themeFilters}},"./state/themes/selectors/get-theme-forum-url.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./state/themes/selectors/is-theme-premium.js"),r=s("./state/themes/selectors/is-wpcom-theme.js"),i=s("./state/themes/selectors/is-wporg-theme.js");s("./state/themes/init.js");function o(e,t){return Object(n.a)(e,t)?"//premium-themes.forums.wordpress.com/forum/"+t:Object(r.a)(e,t)?"//en.forums.wordpress.com/forum/themes":Object(i.a)(e,t)?"//wordpress.org/support/theme/"+t:null}},"./state/themes/selectors/get-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./lib/create-selector/index.js"),r=(s("./state/themes/init.js"),Object(n.a)((function(e,t,s){var n=e.themes.queries[t];return n?n.getItem(s):null}),(function(e){return e.themes.queries})))},"./state/themes/selectors/has-activated-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s("./state/themes/init.js");function n(e,t){var s;return null!==(s=e.themes.completedActivationRequests[t])&&void 0!==s&&s}},"./state/themes/selectors/is-activating-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s("./state/themes/init.js");function n(e,t){var s;return null!==(s=e.themes.activationRequests[t])&&void 0!==s&&s}},"./state/themes/selectors/is-ambiguous-theme-filter-term.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("../node_modules/lodash-es/filter.js"),r=s("../node_modules/lodash-es/get.js"),i=s("./lib/create-selector/index.js"),o=s("./state/themes/selectors/get-theme-filters.js"),a=(s("./state/themes/init.js"),Object(i.a)((function(e,t){var s=Object(o.a)(e);return Object(n.a)(s,(function(e){return!!Object(r.a)(e,t)})).length>1}),(function(e){return[Object(o.a)(e)]})))},"./state/themes/selectors/is-installing-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/sites/selectors/is-jetpack-site.js"),r=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function i(e,t,s){var i,o,a=function(e,t,s){return s&&Object(n.a)(e,s)&&!Object(r.a)(e,s,t)?"".concat(t,"-wpcom"):t}(e,t,s);return null!==(i=null===(o=e.themes.themeInstalls[s])||void 0===o?void 0:o[a])&&void 0!==i&&i}},"./state/themes/selectors/is-premium-theme-available.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./lib/plans/constants.js"),r=s("./state/sites/plans/selectors.js"),i=s("../node_modules/lodash-es/some.js"),o=s("./state/purchases/selectors.js");s("./state/themes/init.js");function a(e,t,s){return function(e,t,s){var n=Object(o.g)(e,s);return Object(i.a)(n,{productSlug:"premium_theme",meta:t})}(e,t,s)||Object(r.i)(e,s,n.Tb)}},"./state/themes/selectors/is-theme-active.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/selectors/get-active-theme.js");s("./state/themes/init.js");function r(e,t,s){return Object(n.a)(e,s)===t}},"./state/themes/selectors/is-theme-gutenberg-first.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("../node_modules/lodash-es/intersection.js"),r=s("./state/themes/selectors/get-theme.js"),i=s("./state/themes/utils.js");s("./state/themes/init.js");function o(e,t){var s=Object(r.a)(e,"wpcom",t),o=Object(i.d)(s,"theme_feature");return!!Object(n.a)(o,["global-styles","auto-loading-homepage"]).length}},"./state/themes/selectors/is-theme-premium.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./state/themes/selectors/get-theme.js"),r=s("./state/themes/utils.js");s("./state/themes/init.js");function i(e,t){return Object(r.e)(Object(n.a)(e,"wpcom",t))}},"./state/themes/selectors/is-valid-theme-filter-term.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/selectors/find-theme-filter-term.js");s("./state/themes/init.js");function r(e,t){return!!Object(n.a)(e,t)}},"./state/themes/selectors/is-wpcom-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function r(e,t){return!!Object(n.a)(e,"wpcom",t)}},"./state/themes/selectors/is-wporg-theme.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function r(e,t){return!!Object(n.a)(e,"wporg",t)}},"./state/themes/selectors/prepend-theme-filter-keys.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./state/themes/selectors/get-theme-filter-string-from-term.js");s("./state/themes/init.js");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=t.split(/[+\s]/).map((function(t){return Object(n.a)(e,t)})).join(" ").trim();return s?s+" ":""}},"./state/themes/selectors/theme-has-auto-loading-homepage.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("../node_modules/lodash-es/includes.js"),r=s("./state/themes/utils.js"),i=s("./state/themes/selectors/get-theme.js");s("./state/themes/init.js");function o(e,t){return Object(n.a)(Object(r.d)(Object(i.a)(e,"wpcom",t),"theme_feature"),"auto-loading-homepage")}}}]);